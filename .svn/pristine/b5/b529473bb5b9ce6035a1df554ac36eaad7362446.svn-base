"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[8193],{8193:(Me,v,i)=>{i.r(v),i.d(v,{AppUserModule:()=>Ie});var g=i(6019),y=i(4382),S=i(4646),x=i(6154),A=i(563),F=i(8576),n=i(9133),q=i(5351),C=i(8977),m=i(4176),T=i(1628),d=i(9839),L=i(1125),I=i(8053),M=i(4747),e=i(3668),h=i(5304),O=i(6765),w=i(2300),E=i(9594),U=i(888),D=i(5694),Z=i(5243),_=i(8167),Q=i(5498),k=i(138),J=i(86),Y=i(904),B=i(7444),V=i(9112),R=i(6400),f=i(8621),b=i(9851),H=i(6731),G=i(9711),P=i(2463);const j=["dialog"],z=["groupInput"];function $(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialog("create")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.createButton")," "))}function K(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeData()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",0==t.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"button.deleteButton")," ")}}function W(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"th",35),e.TgZ(1,"mat-checkbox",36),e.NdJ("change",function(s){e.CHM(t);const l=e.oxw(2);return s?l.masterToggle():null}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function X(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td",37),e.TgZ(1,"mat-checkbox",38),e.NdJ("click",function(s){return s.stopPropagation()})("change",function(s){const p=e.CHM(t).$implicit,u=e.oxw(2);return s?u.selection.toggle(p):null}),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("checked",a.selection.isSelected(t))("aria-label",a.checkboxLabel(t))}}function ee(o,r){1&o&&(e.TgZ(0,"th",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.positionCol")))}function te(o,r){if(1&o&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&o){const t=r.index,a=e.oxw(2);e.xp6(1),e.Oqu(t+1+a.page*a.pageSize)}}function oe(o,r){1&o&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"appUserModule.userNameCol")))}function ae(o,r){if(1&o&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.userName)}}function se(o,r){1&o&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"appUserModule.fullNameCol")))}function re(o,r){if(1&o&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.fullName)}}function ie(o,r){1&o&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"appUserModule.emailCol")))}function le(o,r){if(1&o&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.email)}}function ne(o,r){1&o&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"appUserModule.phoneNumberCol")))}function pe(o,r){if(1&o&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.phoneNumber)}}function ce(o,r){1&o&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.createdByCol")))}function me(o,r){if(1&o&&(e.TgZ(0,"td",37),e._uU(1),e.ALo(2,"userPipe"),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.createdBy))}}function ue(o,r){1&o&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.createdDateCol")))}function de(o,r){if(1&o&&(e.TgZ(0,"td",37),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.createdDate,"dd-MM-yyyy HH:mm:ss"))}}function ge(o,r){1&o&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.actionCol")))}function he(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(2).openDialog("edit",s)}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA()}2&o&&e.s9C("matTooltip",e.lcZ(1,1,"button.editButton"))}function _e(o,r){1&o&&(e.TgZ(0,"td",37),e.YNc(1,he,4,3,"a",42),e.ALo(2,"userRoles"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"DeleteUser")))}function fe(o,r){1&o&&e._UZ(0,"tr",44)}function Ae(o,r){1&o&&e._UZ(0,"tr",45)}function Ze(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"table",17),e.ynx(3,18),e.YNc(4,W,2,3,"th",19),e.YNc(5,X,2,2,"td",20),e.BQk(),e.ynx(6,21),e.YNc(7,ee,3,3,"th",22),e.YNc(8,te,2,1,"td",20),e.BQk(),e.ynx(9,23),e.YNc(10,oe,3,3,"th",24),e.YNc(11,ae,2,1,"td",20),e.BQk(),e.ynx(12,25),e.YNc(13,se,3,3,"th",24),e.YNc(14,re,2,1,"td",20),e.BQk(),e.ynx(15,26),e.YNc(16,ie,3,3,"th",24),e.YNc(17,le,2,1,"td",20),e.BQk(),e.ynx(18,27),e.YNc(19,ne,3,3,"th",24),e.YNc(20,pe,2,1,"td",20),e.BQk(),e.ynx(21,28),e.YNc(22,ce,3,3,"th",24),e.YNc(23,me,3,3,"td",20),e.BQk(),e.ynx(24,29),e.YNc(25,ue,3,3,"th",24),e.YNc(26,de,3,4,"td",20),e.BQk(),e.ynx(27,30),e.YNc(28,ge,3,3,"th",31),e.YNc(29,_e,3,3,"td",20),e.BQk(),e.YNc(30,fe,1,0,"tr",32),e.YNc(31,Ae,1,0,"tr",33),e.qZA(),e.qZA(),e.TgZ(32,"mat-paginator",34),e.NdJ("page",function(s){return e.CHM(t),e.oxw().onChangePage(s)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageIndex",t.page)("length",t.totalRow)("disabled",!1)}}function ve(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"appUserModule.userNameRequired")," "))}function xe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"appUserModule.passwordRequired")," "))}function Ce(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"appUserModule.passwordMinlength")," "))}function Te(o,r){if(1&o&&(e.TgZ(0,"mat-option",81),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.emId),e.xp6(1),e.hij(" ",t.emName," ")}}function Ue(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TCardNo.cardNoEmployeeRequired")," "))}function be(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"appUserModule.emailInValid")," "))}function Ne(o,r){1&o&&(e.TgZ(0,"div"),e._UZ(1,"img",82),e.qZA())}function ye(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",83),e.TgZ(1,"div",84),e._UZ(2,"img",85),e.TgZ(3,"a",86),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(68),l=e.oxw();return s.value="",l.clearImage()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(2),e.s9C("src","data:image/jpg;base64,"+t.getValidForm.image.value,e.LSH)}}function Se(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip",87),e.NdJ("removed",function(){const l=e.CHM(t).$implicit;return e.oxw(2).remove(l)}),e._uU(1),e.TgZ(2,"button",88),e.TgZ(3,"mat-icon"),e._uU(4,"cancel"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Fe(o,r){if(1&o&&(e.TgZ(0,"mat-option",89),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.s9C("id",t.groupCode),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function qe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",46),e.NdJ("submit",function(){return e.CHM(t),e.oxw().addData()}),e.TgZ(1,"h2",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",48),e.TgZ(5,"mat-form-field",49),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",50,51),e.ALo(11,"translate"),e.TgZ(12,"mat-hint",52),e._uU(13),e.qZA(),e.YNc(14,ve,3,3,"mat-error",53),e.qZA(),e.TgZ(15,"mat-form-field",49),e.TgZ(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",54,55),e.ALo(21,"translate"),e.TgZ(22,"mat-hint",52),e._uU(23),e.qZA(),e.YNc(24,xe,3,3,"mat-error",53),e.YNc(25,Ce,3,3,"mat-error",53),e.qZA(),e.TgZ(26,"mat-form-field",49),e.TgZ(27,"mat-label"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"mat-select",56),e.YNc(31,Te,2,2,"mat-option",57),e.qZA(),e.YNc(32,Ue,3,3,"mat-error",53),e.qZA(),e.TgZ(33,"div",58),e.TgZ(34,"div",7),e.TgZ(35,"mat-form-field",49),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e._UZ(39,"input",59,60),e.ALo(41,"translate"),e.TgZ(42,"mat-icon",61),e._uU(43,"email"),e.qZA(),e.TgZ(44,"mat-hint",52),e._uU(45),e.qZA(),e.YNc(46,be,3,3,"mat-error",53),e.qZA(),e.qZA(),e.TgZ(47,"div",7),e.TgZ(48,"mat-form-field",62),e.TgZ(49,"mat-label"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-icon",61),e._uU(53," phone"),e.qZA(),e._UZ(54,"input",63,64),e.ALo(56,"translate"),e.TgZ(57,"mat-hint",52),e._uU(58),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",65),e.TgZ(60,"fieldset"),e.TgZ(61,"legend"),e._uU(62),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"button",66),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"input",67,68),e.NdJ("change",function(s){return e.CHM(t),e.oxw().imagePreview(s)}),e.qZA(),e.YNc(69,Ne,2,0,"div",53),e.YNc(70,ye,6,1,"div",69),e.qZA(),e.qZA(),e.TgZ(71,"mat-form-field",70),e.TgZ(72,"mat-label"),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"mat-chip-list",71,72),e.YNc(77,Se,5,1,"mat-chip",73),e._UZ(78,"input",74,75),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"mat-autocomplete",76,77),e.NdJ("optionSelected",function(s){return e.CHM(t),e.oxw().selected(s)}),e.YNc(83,Fe,2,3,"mat-option",78),e.ALo(84,"async"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"mat-dialog-actions",65),e.TgZ(86,"button",79),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"button",80),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(10),a=e.MAs(20),s=e.MAs(40),l=e.MAs(55),p=e.MAs(76),u=e.MAs(82),c=e.oxw();e.Q6J("formGroup",c.userForm),e.xp6(2),e.Oqu(e.lcZ(3,36,c.title)),e.xp6(5),e.Oqu(e.lcZ(8,38,"appUserModule.userNameCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(11,40,"appUserModule.userNameCol")),e.xp6(4),e.hij("",t.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",c.getValidForm.userName.hasError("required")),e.xp6(3),e.Oqu(e.lcZ(18,42,"appUserModule.passwordCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(21,44,"appUserModule.passwordCol")),e.xp6(4),e.hij("",a.value.length," / 50"),e.xp6(1),e.Q6J("ngIf",c.getValidForm.password.hasError("required")),e.xp6(1),e.Q6J("ngIf",c.getValidForm.password.hasError("minlength")),e.xp6(3),e.Oqu(e.lcZ(29,46,"TCardNo.cardNoEmployeeCol")),e.xp6(3),e.Q6J("ngForOf",c.employees),e.xp6(1),e.Q6J("ngIf",c.getValidForm.emId.hasError("required")),e.xp6(5),e.Oqu(e.lcZ(38,48,"appUserModule.emailCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(41,50,"appUserModule.emailCol")),e.xp6(6),e.hij("",s.value.length," / 50"),e.xp6(1),e.Q6J("ngIf",c.getValidForm.email.hasError("email")),e.xp6(4),e.Oqu(e.lcZ(51,52,"appUserModule.phoneNumberCol")),e.xp6(4),e.s9C("placeholder",e.lcZ(56,54,"appUserModule.phoneNumberCol")),e.xp6(4),e.hij("",l.value.length," / 15"),e.xp6(4),e.Oqu(e.lcZ(63,56,"appUserModule.imageCol")),e.xp6(3),e.Oqu(e.lcZ(66,58,"button.uploadButton")),e.xp6(4),e.Q6J("ngIf",""===c.getValidForm.image.value||null===c.getValidForm.image.value),e.xp6(1),e.Q6J("ngIf",""!==c.getValidForm.image.value&&null!==c.getValidForm.image.value),e.xp6(3),e.Oqu(e.lcZ(74,60,"appUserModule.groupCol")),e.xp6(4),e.Q6J("ngForOf",c.listGroups),e.xp6(1),e.s9C("placeholder",e.lcZ(80,62,"appUserModule.groupCol")),e.Q6J("formControl",c.fruitCtrl)("matAutocomplete",u)("matChipInputFor",p)("matChipInputSeparatorKeyCodes",c.separatorKeysCodes),e.xp6(5),e.Q6J("ngForOf",e.lcZ(84,64,c.filteredFruits)),e.xp6(4),e.Oqu(e.lcZ(88,66,"button.cancelButton")),e.xp6(2),e.Q6J("disabled",c.preventAbuse),e.xp6(1),e.Oqu(e.lcZ(91,68,"button.saveButton"))}}const N=JSON.parse(localStorage.getItem(M.h.CURRENT_USER)),Le=[{path:"",component:(()=>{class o{constructor(t,a,s,l,p,u){this.translateService=t,this.dialog=a,this.pagin=s,this.formBuilder=l,this.dataService=p,this.notificationService=u,this.action="",this.title="",this.displayedColumns=["select","position","userName","fullName","email","phoneNumber","createdDate","createdBy","action"],this.dataSource=new m.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.pageSizeOptions=[5,10,25,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.selection=new q.Ov(!0,[]),this.separatorKeysCodes=[T.K5,T.OC],this.filePath="",this.fruitCtrl=new n.NI,this.userForm=this.formBuilder.group({id:"",userName:["",n.kI.compose([n.kI.required,n.kI.maxLength(50)])],password:["",n.kI.compose([n.kI.maxLength(50),n.kI.minLength(6)])],fullName:"",phoneNumber:"",email:["",n.kI.compose([n.kI.email,n.kI.maxLength(50)])],image:"",groups:[],createdDate:"",createdBy:"",updatedBy:"",updatedDate:"",emId:["",n.kI.compose([n.kI.required])]}),this.filteredFruits=this.fruitCtrl.valueChanges.pipe((0,L.O)(null),(0,I.U)(c=>c?this._filter(c):this.groups.slice())),this.listGroups=[]}ngOnInit(){this.loadAllUsers(),this.getAllGroups(),this.getEmployees()}openDialog(t,a,s){if(this.action=t,s={width:"750px"},"create"==t)this.translateService.get("appUserModule.createMessage").subscribe(p=>this.title=p),this.userForm.controls.password.setValidators([n.kI.minLength(6),n.kI.maxLength(50),n.kI.required]);else{this.clearPasswordValidators(),this.translateService.get("appUserModule.editMessage").subscribe(u=>this.title=u),this.userForm.controls.id.setValue(a.id);let p=this.dataSource.filteredData.filter(u=>u.id==a.id)[0];this.userForm.controls.userName.setValue(p.userName),this.userForm.controls.fullName.setValue(p.fullName),this.userForm.controls.image.setValue(p.image),this.userForm.controls.email.setValue(p.email),this.userForm.controls.phoneNumber.setValue(p.phoneNumber),this.userForm.controls.createdDate.setValue(p.createdDate),this.userForm.controls.createdBy.setValue(p.createdBy),this.userForm.controls.updatedDate.setValue(p.updatedDate),this.userForm.controls.updatedBy.setValue(p.updatedBy),this.userForm.controls.groups.setValue(p.groups),this.userForm.controls.emId.setValue(p.emId),this.listGroups=p.groups}this.dialog.open(this.dialogTemplate,s).afterClosed().subscribe(p=>{this.onReset()})}loadAllUsers(){this.preventAbuse=!0,this.dataService.get("appusers/getlistpaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(t=>{this.dataSource=new m.by(t.items),this.totalRow=t.totalCount,this.preventAbuse=!1},t=>{this.translateService.get("messageSystem.loadFail").subscribe(a=>d.Q.GET_FAILSE_MSG=a),this.notificationService.printErrorMessage(d.Q.GET_FAILSE_MSG),this.preventAbuse=!1})}getAllGroups(){this.dataService.get("appgroups/getall").subscribe(t=>{this.groups=t},t=>{})}getEmployees(){this.dataService.get("TEmployee/getAllEmployee").subscribe(t=>{this.employees=t},t=>{})}addData(){if(!this.userForm.invalid)if(this.preventAbuse=!0,this.userForm.controls.groups.setValue(this.listGroups),"create"==this.action){let t={userName:this.userForm.controls.userName.value,fullName:this.employees.filter(a=>a.emId==this.userForm.controls.emId.value)[0].emName,passwordHash:this.userForm.controls.password.value,phoneNumber:this.userForm.controls.phoneNumber.value,email:this.userForm.controls.email.value,image:""!=this.userForm.controls.image.value?this.userForm.controls.image.value:null,groups:this.userForm.controls.groups.value!=[]?this.userForm.controls.groups.value:null,createdBy:N.id,emId:this.userForm.controls.emId.value};this.dataService.post("appusers/create",t).subscribe(a=>{let s;this.translateService.get("messageSystem.createSuccess").subscribe(l=>s=l),this.notificationService.printSuccessMessage(s),this.preventAbuse=!1,this.loadAllUsers(),this.onReset()},a=>{let s;this.translateService.get("messageSystem.createFail").subscribe(l=>s=l),this.notificationService.printErrorMessage(a),this.preventAbuse=!1})}else"edit"==this.action&&this.dataService.put("appusers/update",{userName:this.userForm.controls.userName.value,fullName:this.userForm.controls.fullName.value,passwordHash:this.userForm.controls.password.value,phoneNumber:this.userForm.controls.phoneNumber.value,email:this.userForm.controls.email.value,image:""!=this.userForm.controls.image.value?this.userForm.controls.image.value:null,id:this.userForm.controls.id.value,groups:this.userForm.controls.groups.value!=[]?this.userForm.controls.groups.value:null,updatedBy:N.id,createdDate:this.userForm.controls.createdDate.value,createdBy:this.userForm.controls.createdBy.value,emId:this.userForm.controls.emId.value}).subscribe(a=>{let s;this.translateService.get("messageSystem.updateSuccess").subscribe(l=>s=l),this.notificationService.printSuccessMessage(s),this.preventAbuse=!1,this.loadAllUsers(),this.onReset()},a=>{let s;this.translateService.get("messageSystem.updateFail").subscribe(l=>s=l),this.notificationService.printErrorMessage(a),this.preventAbuse=!1})}removeData(){let t=[];this.selection.selected.forEach(a=>{t.push(a.id)}),this.translateService.get("messageSystem.confirmDelete").subscribe(a=>d.Q.CONFIRM_DELETE_MSG=a),this.notificationService.printConfirmationDialog(d.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(t)))}deleteItemConfirm(t){this.preventAbuse=!0,this.dataService.delete("appusers/deletemulti","checkedList",t).subscribe(a=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(s=>d.Q.DELETED_OK_MSG=s),this.notificationService.printSuccessMessage(d.Q.DELETED_OK_MSG),this.preventAbuse=!1,this.selection.clear(),this.loadAllUsers()},a=>{this.translateService.get("messageSystem.deletefail").subscribe(s=>d.Q.DELETE_FAILSE_MSG=s),this.notificationService.printErrorMessage(d.Q.DELETE_FAILSE_MSG),this.preventAbuse=!1})}applyFilter(t){this.keyword=t.target.value,this.page=0,this.loadAllUsers(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onChangePage(t){this.page=t.pageIndex,this.pageSize=t.pageSize,this.loadAllUsers()}get getValidForm(){return this.userForm.controls}get password(){return this.userForm.get("password")}clearPasswordValidators(){this.password.clearValidators(),this.password.updateValueAndValidity()}imagePreview(t){const a=t.target.files[0],s=new FileReader;s.onload=()=>{let p=s.result.split("base64,")[1];this.userForm.controls.image.setValue(p)},s.readAsDataURL(a)}selected(t){let a=t.option.value;this.listGroups.includes(a)||this.listGroups.push(a),this.groupInput.nativeElement.value="",this.fruitCtrl.setValue(null)}remove(t){const a=this.listGroups.indexOf(t);a>=0&&(this.listGroups.splice(a,1),this.groups.push(t))}_filter(t){var a;const s=null===(a=t.groupCode)||void 0===a?void 0:a.toLowerCase();return this.groups.filter(l=>null==l?void 0:l.groupCode.toLowerCase().includes(s))}onReset(){this.clearPasswordValidators(),this.listGroups=[],this.userForm.reset(),this.dialog.closeAll()}clearImage(){this.userForm.controls.image.setValue("")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.sK),e.Y36(h.uw),e.Y36(O.d),e.Y36(n.qu),e.Y36(w.D),e.Y36(E.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user"]],viewQuery:function(t,a){if(1&t&&(e.Gf(C.NW,5),e.Gf(j,5),e.Gf(z,5)),2&t){let s;e.iGM(s=e.CRH())&&(a.paginator=s.first),e.iGM(s=e.CRH())&&(a.dialogTemplate=s.first),e.iGM(s=e.CRH())&&(a.groupInput=s.first)}},decls:29,vars:18,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","satrt center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","userName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","fullName"],["matColumnDef","email"],["matColumnDef","phoneNumber"],["matColumnDef","createdBy"],["matColumnDef","createdDate"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["action","",3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline"],["matInput","","formControlName","userName","required","","maxlength","20",3,"placeholder"],["userName",""],["align","end"],[4,"ngIf"],["matInput","","formControlName","password","maxlength","50",3,"placeholder"],["password",""],["formControlName","emId"],[3,"value",4,"ngFor","ngForOf"],["fxLayout.md","row","fxLayout.xs","column"],["type","email","matInput","","formControlName","email","maxlength","50",3,"placeholder"],["email",""],["matPrefix",""],["appearance","outline","align","end"],["type","tel","matInput","","maxlength","15","formControlName","phoneNumber",3,"placeholder"],["phoneNumber",""],["align","center"],["type","button","mat-stroked-button","","onclick","document.getElementById('getFile').click()"],["type","file","id","getFile",2,"display","none",3,"change"],["fileInput",""],["class","image-div",4,"ngIf"],["appearance","outline",1,"example-chip-list"],["aria-label","Fruit selection"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["formControlName","groups",3,"placeholder","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],["groupInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],["mat-stroked-button","","color","warn","mat-dialog-close",""],["mat-stroked-button","","color","primary","type","submit",3,"disabled"],[3,"value"],["src","../../../assets/images/user-none.png",1,"image-preview"],[1,"image-div"],[1,"image-preview"],[1,"image-preview",3,"src"],["href","javascript:void(0)",1,"remove-image",3,"click"],[3,"removed"],["matChipRemove",""],[3,"value","id"]],template:function(t,a){1&t&&(e._UZ(0,"ng-progress",0,1),e.TgZ(2,"mat-card"),e.TgZ(3,"div"),e.TgZ(4,"mat-card-title",2),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-divider"),e._UZ(8,"br"),e._UZ(9,"br"),e.TgZ(10,"div",3),e.TgZ(11,"div",4),e.YNc(12,$,3,3,"button",5),e.ALo(13,"userRoles"),e.YNc(14,K,3,4,"button",6),e.ALo(15,"userRoles"),e.qZA(),e._UZ(16,"div",7),e.TgZ(17,"div",7),e.TgZ(18,"mat-form-field",8),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",9,10),e.NdJ("keyup",function(l){return a.applyFilter(l)}),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(25,Ze,33,7,"div",11),e.ALo(26,"userRoles"),e.qZA(),e.YNc(27,qe,92,70,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,6,"appUserModule.title")),e.xp6(7),e.Q6J("ngIf",e.lcZ(13,8,"CreateUser")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,10,"DeleteUser")),e.xp6(6),e.hij(" ",e.lcZ(21,12,"button.searchButton"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(24,14,"button.searchPlaceholder")),e.xp6(3),e.Q6J("ngIf",e.lcZ(26,16,"ViewUser")))},directives:[x.Yh,U.a8,U.n5,D.d,Z.xw,Z.yH,Z.Wh,g.O5,_.KE,Q.oO,_.hX,k.Nt,J.lW,m.BZ,m.w1,m.fO,m.Dz,m.as,m.nj,C.NW,m.ge,Y.oG,m.ev,B.gM,V.Hw,m.XQ,m.Gk,n._Y,n.JL,n.sg,h.uh,h.xY,n.Fj,n.JJ,n.u,n.Q7,n.nD,_.bx,R.gD,g.sg,_.qo,f.qn,b.ZL,f.oH,n.oH,b.XC,h.H8,h.ZT,_.TO,H.ey,f.HS,f.qH],pipes:[A.X$,G.v,P.d,g.uU,g.Ov],styles:[".remove-image[_ngcontent-%COMP%]{display:inline;position:absolute;top:13px;right:1px;text-decoration:none;color:#fff;background:rgb(233 226 226);text-shadow:0 1px 2px rgba(0,0,0,.5);transition:background .5s}.remove-image[_ngcontent-%COMP%]:hover{background:#E54E4E;top:13px;right:1px}.image-preview[_ngcontent-%COMP%]{position:relative;border-radius:3px}"]}),o})()}];let Ie=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.ez,F.q,x.Q8.withConfig({spinnerPosition:"right",color:"#red"}),S.bj,A.aw,y.Bz.forChild(Le)]]}),o})()}}]);