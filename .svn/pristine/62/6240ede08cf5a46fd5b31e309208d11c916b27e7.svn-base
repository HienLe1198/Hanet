"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[3660],{3660:(G,d,o)=>{o.r(d),o.d(d,{CardLostDamagedStatisticModule:()=>P});var c=o(6019),m=o(8977),v=o(2262),n=o(4176),l=o(9839),t=o(3668),g=o(2300),p=o(9594),u=o(6765),h=o(563),f=o(6154),C=o(888),L=o(5694),D=o(5243),Z=o(86),S=o(9711);function T(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.exportButton")," "))}function A(a,i){1&a&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function _(a,i){if(1&a&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&a){const e=i.index,s=t.oxw(2);t.xp6(1),t.Oqu(e+1+s.page*s.pageSize)}}function b(a,i){1&a&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardLostDamagedModule.cardNoCol")))}function y(a,i){if(1&a&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.Oqu(e.caNo)}}function N(a,i){1&a&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardLostDamagedModule.cardNumberCol")))}function O(a,i){if(1&a&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.Oqu(e.caNumber)}}function Q(a,i){1&a&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardLostDamagedModule.status")))}function E(a,i){if(1&a&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.Oqu(e.cardStatus)}}function I(a,i){1&a&&t._UZ(0,"tr",27)}function M(a,i){1&a&&t._UZ(0,"tr",28)}function z(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div",8),t.TgZ(2,"table",9),t.ynx(3,10),t.YNc(4,A,3,3,"th",11),t.YNc(5,_,2,1,"td",12),t.BQk(),t.ynx(6,13),t.YNc(7,b,3,3,"th",14),t.YNc(8,y,2,1,"td",12),t.BQk(),t.ynx(9,15),t.YNc(10,N,3,3,"th",14),t.YNc(11,O,2,1,"td",12),t.BQk(),t.ynx(12,16),t.YNc(13,Q,3,3,"th",17),t.YNc(14,E,2,1,"td",18),t.BQk(),t.YNc(15,I,1,0,"tr",19),t.YNc(16,M,1,0,"tr",20),t.qZA(),t.qZA(),t.TgZ(17,"mat-paginator",21),t.NdJ("page",function(r){return t.CHM(e),t.oxw().onChangePage(r)}),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.page)("length",e.totalRow)("disabled",!1)}}let R=(()=>{class a{constructor(e,s,r,x){this.dataService=e,this.notificationService=s,this.pagin=r,this.translateService=x,this.displayedColumns=["position","cardNo","cardNumber","cardStatus"],this.dataSource=new n.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.preventAbuse=!1}ngOnInit(){this.loadData()}loadData(){this.preventAbuse=!0,this.dataService.get("TCardNo/GetCardNoLostDamagedByPaging?page="+this.page+"&pageSize="+this.pageSize).subscribe(e=>{this.data=e.items,0==this.data.length&&(this.translateService.get("messageSystem.staticsNull").subscribe(s=>l.Q.STATISTIC_NULL=s),this.notificationService.printErrorMessage(l.Q.STATISTIC_NULL)),this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=e.totalCount},e=>{this.translateService.get("messageSystem.loadFail").subscribe(s=>l.Q.GET_FAILSE_MSG=s),this.notificationService.printErrorMessage(l.Q.GET_FAILSE_MSG)}),this.preventAbuse=!1}onChangePage(e){this.page=e.pageIndex,this.pageSize=e.pageSize,this.loadData()}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}exportExcel(){this.dataService.post("TCardNo/ExportXLCardamagedOrLost").subscribe(e=>{window.location.href=e.result},e=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(s=>l.Q.EXPORT_FAILSE_MSG=s),this.notificationService.printErrorMessage(l.Q.EXPORT_FAILSE_MSG)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(g.D),t.Y36(p.g),t.Y36(u.d),t.Y36(h.sK))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-card-lost-damaged-statistic"]],viewQuery:function(e,s){if(1&e&&(t.Gf(m.NW,5),t.Gf(v.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(s.paginator=r.first),t.iGM(r=t.CRH())&&(s.sort=r.first)}},decls:14,vars:9,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column","fxLayout","start center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cardNo"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","cardNumber"],["matColumnDef","cardStatus"],["mat-header-cell","","mat-sort-header","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","","mat-sort-header","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-row",""],["mat-row",""]],template:function(e,s){1&e&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"mat-divider"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.YNc(10,T,3,3,"button",4),t.ALo(11,"userRoles"),t.qZA(),t.YNc(12,z,18,8,"div",5),t.ALo(13,"userRoles"),t.qZA()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,3,"cardLostDamagedModule.title")),t.xp6(6),t.Q6J("ngIf",t.lcZ(11,5,"ExportLostOrDamagedCardStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,7,"ViewLostOrDamagedCardStatistic")))},directives:[f.Yh,C.a8,C.n5,L.d,D.xw,c.O5,Z.lW,n.BZ,n.w1,n.fO,n.Dz,n.as,n.nj,m.NW,n.ge,n.ev,n.XQ,n.Gk],pipes:[h.X$,S.v],styles:[""]}),a})();var U=o(4382),Y=o(4646),w=o(8576);const B=[{path:"",component:R}];let P=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[g.D,p.g,u.d],imports:[[c.ez,w.q,S.a,U.Bz.forChild(B),f.Q8.withConfig({spinnerPosition:"right",color:"#red"}),Y.bj]]}),a})()}}]);