"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[379],{379:(st,g,n)=>{n.r(g),n.d(g,{DebtStatisticModule:()=>at});var r=n(6019),m=n(8977),y=n(2262),l=n(4176),d=n(9839),t=n(3668),f=n(2300),_=n(9594),u=n(6765),b=n(563),Z=n(6154),x=n(888),D=n(5694),h=n(5243),S=n(8167),C=n(138),p=n(9133),v=n(6400),A=n(6731),M=n(86),T=n(9711);function N(e,o){if(1&e&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function q(e,o){if(1&e&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.Q6J("value",i.id),t.xp6(1),t.Oqu(i.name)}}function w(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(i),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function L(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(i),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function O(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(i),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("disabled",i.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function U(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function Y(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const i=o.index,a=t.oxw(2);t.xp6(1),t.Oqu(i+1+a.page*a.pageSize)}}function Q(e,o){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.emNameCol")))}function F(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.Oqu(i.emName)}}function J(e,o){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.departmentCol")))}function B(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.Oqu(i.depName)}}function E(e,o){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.emPhoneCol")))}function I(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.Oqu(i.emPhone)}}function P(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.cardNoCol")))}function R(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.Oqu(i.caNo)}}function z(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.cardNumberCol")))}function H(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.Oqu(i.caNumber)}}function k(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.vehicleType")))}function $(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.Oqu(i.cvtName)}}function G(e,o){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.ticketType")))}function j(e,o){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.Oqu(i.typename)}}function X(e,o){1&e&&t._UZ(0,"tr",42)}function W(e,o){1&e&&t._UZ(0,"tr",43)}function V(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"table",22),t.ynx(3,23),t.YNc(4,U,3,3,"th",24),t.YNc(5,Y,2,1,"td",25),t.BQk(),t.ynx(6,26),t.YNc(7,Q,3,3,"th",27),t.YNc(8,F,2,1,"td",28),t.BQk(),t.ynx(9,29),t.YNc(10,J,3,3,"th",27),t.YNc(11,B,2,1,"td",28),t.BQk(),t.ynx(12,30),t.YNc(13,E,3,3,"th",27),t.YNc(14,I,2,1,"td",28),t.BQk(),t.ynx(15,31),t.YNc(16,P,3,3,"th",24),t.YNc(17,R,2,1,"td",25),t.BQk(),t.ynx(18,32),t.YNc(19,z,3,3,"th",24),t.YNc(20,H,2,1,"td",25),t.BQk(),t.ynx(21,33),t.YNc(22,k,3,3,"th",24),t.YNc(23,$,2,1,"td",25),t.BQk(),t.ynx(24,34),t.YNc(25,G,3,3,"th",24),t.YNc(26,j,2,1,"td",25),t.BQk(),t.YNc(27,X,1,0,"tr",35),t.YNc(28,W,1,0,"tr",36),t.qZA(),t.TgZ(29,"mat-paginator",37),t.NdJ("page",function(s){return t.CHM(i),t.oxw().onChangePage(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const i=t.oxw();t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("pageIndex",i.page)("length",i.totalRow)("disabled",!1)}}let K=(()=>{class e{constructor(i,a,s,c,nt){this.dataService=i,this.notificationService=a,this.pagin=s,this.translateService=c,this.datePipe=nt,this.customPaginatorIntl=new m.ye,this.displayedColumns=["position","emName","depName","emPhone","caNo","caNumber","cvtName","typename"],this.dataSource=new l.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.disableButton=!0,this.keyword="",this.totalRow=0,this.totalPage=0,this.fillterName="",this.sortby=0,this.ordinal=0,this.sortbys=[{id:0,name:"H\u1ecd t\xean"},{id:1,name:"Ph\xf2ng ban"},{id:2,name:"Lo\u1ea1i xe"},{id:3,name:"Lo\u1ea1i v\xe9"}],this.ordinals=[{id:0,name:"T\u1eeb tr\xean xu\u1ed1ng"},{id:1,name:"T\u1eeb d\u01b0\u1edbi l\xean"}],this.follow="0",this.dateNow=new Date,this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.monthFrom=this.datePipe.transform(new Date(this.dateNow.getFullYear(),this.dateNow.getMonth()),"yyyy-MM"),this.monthTo=this.datePipe.transform(new Date(this.dateNow.getFullYear(),this.dateNow.getMonth()),"yyyy-MM"),this.showList=!1}ngOnInit(){this.loadDataExport()}Refresh(){this.keyword="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.monthFrom=this.datePipe.transform(new Date(this.dateNow.getFullYear(),this.dateNow.getMonth()),"yyyy-MM"),this.monthTo=this.datePipe.transform(new Date(this.dateNow.getFullYear(),this.dateNow.getMonth()),"yyyy-MM"),this.follow="0",this.fillterName="",this.sortby=0,this.ordinal=0,this.showList=!1,this.disableButton=!0}loadData(){null==this.monthFrom&&(this.monthFrom=""),null==this.monthTo&&(this.monthTo=""),new Date(this.monthFrom)>new Date(this.monthTo)?this.notificationService.printErrorMessage("Th\xe1ng b\u1eaft \u0111\u1ea7u kh\xf4ng \u0111\u01b0\u1ee3c l\u1edbn h\u01a1n th\xe1ng k\u1ebft th\xfac!"):null==this.sortby||null==this.ordinal||(this.dataService.get("DebtStatistic/GetAllDebtStatisticByPaging?fromDateByMonth="+this.monthFrom+"&toDateByMonth="+this.monthTo+"&orderBy="+this.sortby+"&thuTu="+this.ordinal+"&page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.fillterName).subscribe(i=>{this.data=i.items,0==this.data.length&&(this.showList=!1,this.translateService.get("messageSystem.staticsNull").subscribe(a=>d.Q.STATISTIC_NULL=a),this.notificationService.printErrorMessage(d.Q.STATISTIC_NULL)),this.data.length>0&&(this.disableButton=!1,this.showList=!0,this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=i.totalCount)},i=>{}),this.loadDataExport())}loadDataExport(){this.dataService.get("DebtStatistic/GetAllDebtStatistic?fromDateByMonth="+this.monthFrom+"&toDateByMonth="+this.monthTo+"&orderBy="+this.sortby+"&thuTu="+this.ordinal+"&keyword="+this.fillterName).subscribe(i=>{this.dataExports=i},i=>{})}exportExcel(){this.dataService.post("DebtStatistic/ExportXls",this.dataExports).subscribe(i=>{window.location.href=i.result},i=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(a=>d.Q.EXPORT_FAILSE_MSG=a),this.notificationService.printErrorMessage(d.Q.EXPORT_FAILSE_MSG)})}onChangePage(i){this.page=i.pageIndex,this.pageSize=i.pageSize,this.loadData()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.D),t.Y36(_.g),t.Y36(u.d),t.Y36(b.sK),t.Y36(r.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-debt-statistic"]],viewQuery:function(i,a){if(1&i&&(t.Gf(m.NW,7),t.Gf(y.YE,5)),2&i){let s;t.iGM(s=t.CRH())&&(a.paginator=s.first),t.iGM(s=t.CRH())&&(a.sort=s.first)}},decls:51,vars:36,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex",""],["fxFlex","",2,"margin","5px"],["appearance","outline"],["matInput","","type","month",3,"ngModel","ngModelChange"],["appearance","outline",2,"margin-right","5px"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emName"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","depName"],["matColumnDef","emPhone"],["matColumnDef","caNo"],["matColumnDef","caNumber"],["matColumnDef","cvtName"],["matColumnDef","typename"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of debtStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-row",""],["mat-row",""]],template:function(i,a){1&i&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"mat-form-field",6),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"input",7),t.NdJ("ngModelChange",function(c){return a.monthFrom=c}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",5),t.TgZ(19,"mat-form-field",6),t.TgZ(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"input",7),t.NdJ("ngModelChange",function(c){return a.monthTo=c}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",5),t.TgZ(25,"mat-form-field",8),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",9),t.NdJ("ngModelChange",function(c){return a.sortby=c}),t.YNc(30,N,2,2,"mat-option",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"mat-form-field",8),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"mat-select",9),t.NdJ("ngModelChange",function(c){return a.ordinal=c}),t.YNc(40,q,2,2,"mat-option",10),t.qZA(),t.qZA(),t.qZA(),t._UZ(41,"div",4),t.qZA(),t.TgZ(42,"div",11),t.YNc(43,w,3,3,"button",12),t.ALo(44,"userRoles"),t.YNc(45,L,3,3,"button",13),t.ALo(46,"userRoles"),t.YNc(47,O,3,4,"button",14),t.ALo(48,"userRoles"),t.qZA(),t.qZA(),t.YNc(49,V,30,8,"div",15),t.ALo(50,"userRoles"),t.qZA()),2&i&&(t.xp6(5),t.Oqu(t.lcZ(6,16,"debtStatisticModule.title")),t.xp6(10),t.Oqu(t.lcZ(16,18,"debtStatisticModule.fromMonth")),t.xp6(2),t.Q6J("ngModel",a.monthFrom),t.xp6(4),t.Oqu(t.lcZ(22,20,"debtStatisticModule.toMonth")),t.xp6(2),t.Q6J("ngModel",a.monthTo),t.xp6(4),t.Oqu(t.lcZ(28,22,"debtStatisticModule.sortbysCol")),t.xp6(2),t.Q6J("ngModel",a.sortby),t.xp6(1),t.Q6J("ngForOf",a.sortbys),t.xp6(4),t.Oqu(t.lcZ(35,24,"debtStatisticModule.sortbysCol")),t.xp6(3),t.Oqu(t.lcZ(38,26,"debtStatisticModule.ordinalsCol")),t.xp6(2),t.Q6J("ngModel",a.ordinal),t.xp6(1),t.Q6J("ngForOf",a.ordinals),t.xp6(3),t.Q6J("ngIf",t.lcZ(44,28,"ViewDebtStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(46,30,"ViewDebtStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(48,32,"ExportDebtStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(50,34,a.showList&&"ViewDebtStatistic")))},directives:[Z.Yh,x.a8,x.n5,D.d,h.xw,h.yH,S.KE,S.hX,C.Nt,p.Fj,p.JJ,p.On,v.gD,p.Q7,r.sg,h.Wh,r.O5,A.ey,M.lW,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,m.NW,l.ge,l.ev,l.XQ,l.Gk],pipes:[b.X$,T.v],styles:[""]}),e})();var tt=n(4382),et=n(8576),it=n(4646);const ot=[{path:"",component:K}];let at=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[f.D,_.g,u.d,r.uU,{provide:m.ye,useClass:u.d}],imports:[[r.ez,et.q,T.a,tt.Bz.forChild(ot),Z.Q8.withConfig({spinnerPosition:"right",color:"#red"}),it.bj]]}),e})()}}]);