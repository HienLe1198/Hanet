"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[1507],{1507:(at,y,i)=>{i.r(y),i.d(y,{SaleCardMonthByEmployeeStatisticModule:()=>k});var c=i(6019),d=i(8977),v=i(2262),s=i(4176),p=i(9839),t=i(3668),g=i(2300),m=i(9133),f=i(9594),u=i(6765),C=i(563),S=i(6154),x=i(888),T=i(5694),h=i(5243),Z=i(8167),_=i(6400),E=i(138),A=i(6731),B=i(86),M=i(9711);function N(e,o){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.Q6J("value",a.emId),t.xp6(1),t.hij(" ",a.emName," ")}}function b(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(a),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function L(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(a),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function O(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(a),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const a=t.oxw();t.Q6J("disabled",a.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function q(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function U(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.index,l=t.oxw(2);t.xp6(1),t.Oqu(a+1+l.page*l.pageSize)}}function D(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"saleCardMonthByEmployeeStatisticModule.cvtNameCol")))}function Q(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.cvtName)}}function F(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"saleCardMonthByEmployeeStatisticModule.typeNameCol")))}function Y(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.typeName)}}function I(e,o){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"saleCardMonthByEmployeeStatisticModule.rePrice")))}function w(e,o){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.rePrice)}}function J(e,o){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"saleCardMonthByEmployeeStatisticModule.count")))}function R(e,o){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.count)}}function z(e,o){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"saleCardMonthByEmployeeStatisticModule.total")))}function P(e,o){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.total)}}function H(e,o){1&e&&t._UZ(0,"tr",39)}function j(e,o){1&e&&t._UZ(0,"tr",40)}function G(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",20),t.TgZ(2,"table",21),t.ynx(3,22),t.YNc(4,q,3,3,"th",23),t.YNc(5,U,2,1,"td",24),t.BQk(),t.ynx(6,25),t.YNc(7,D,3,3,"th",23),t.YNc(8,Q,2,1,"td",24),t.BQk(),t.ynx(9,26),t.YNc(10,F,3,3,"th",23),t.YNc(11,Y,2,1,"td",24),t.BQk(),t.ynx(12,27),t.YNc(13,I,3,3,"th",28),t.YNc(14,w,2,1,"td",29),t.BQk(),t.ynx(15,30),t.YNc(16,J,3,3,"th",28),t.YNc(17,R,2,1,"td",29),t.BQk(),t.ynx(18,31),t.YNc(19,z,3,3,"th",28),t.YNc(20,P,2,1,"td",29),t.BQk(),t.YNc(21,H,1,0,"tr",32),t.YNc(22,j,1,0,"tr",33),t.qZA(),t.TgZ(23,"mat-paginator",34),t.NdJ("page",function(n){return t.CHM(a),t.oxw().onChangePage(n)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=t.oxw();t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",a.pageSizeOptions)("pageIndex",a.page)("length",a.totalRow)("disabled",!1)}}let X=(()=>{class e{constructor(a,l,n,r,tt,et){this.dataService=a,this.formBuilder=l,this.notificationService=n,this.pagin=r,this.translateService=tt,this.datePipe=et,this.customPaginatorIntl=new d.ye,this.displayedColumns=["position","cvtName","typeName","rePrice","total","count"],this.dataSource=new s.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.disableButton=!0,this.keyword="",this.totalRow=0,this.totalPage=0,this.preventAbuse=!1,this.fillterName="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.showList=!1,this.employee=0,this.Form=this.formBuilder.group({emId:""})}autocompleteObjectValidator(){return a=>"string"==typeof a.value?{invalidAutocompleteObject:{value:a.value}}:null}ngOnInit(){this.getTEmployee()}changeDateTo(a){this.dateTo=a.target.value}Refresh(){this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.fillterName="",this.employee=null,this.showList=!1}loadData(){null==this.employee&&(this.employee=0),this.dataService.get("SaleCardMonthByEmStatistic/GetAll?dateFrom="+this.dateFrom+"&dateTo="+this.dateTo+"&EmIdCreated="+this.employee+"&filter="+this.fillterName+"&page="+this.page+"&pageSize="+this.pageSize).subscribe(a=>{if(this.salecards=a.items,0==this.salecards.length)return this.showList=!1,this.Refresh(),this.translateService.get("messageSystem.staticsNull").subscribe(l=>p.Q.STATISTIC_NULL=l),void this.notificationService.printErrorMessage(p.Q.STATISTIC_NULL);this.salecards.length>0&&(this.showList=!0,this.disableButton=!1,this.dataSource=this.salecards,this.dataSource.sort=this.sort,this.totalRow=a.totalCount)},a=>{}),this.loadDataExport()}loadDataExport(){this.dataService.get("SaleCardMonthByEmStatistic/GetAllToExport?dateFrom="+this.dateFrom+"&dateTo="+this.dateTo+"&EmIdCreated="+this.employee+"&filter="+this.fillterName).subscribe(a=>{this.salecardExports=a},a=>{})}exportExcel(){this.dataService.post("SaleCardMonthByEmStatistic/ExportXls",{dateFrom:this.dateFrom,dateTo:this.dateTo,data:this.salecardExports}).subscribe(l=>{window.location.href=l.result},l=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(n=>p.Q.EXPORT_FAILSE_MSG=n),this.notificationService.printErrorMessage(p.Q.EXPORT_FAILSE_MSG)})}getTEmployee(){this.dataService.get("TEmployee/GetAllNoParam").subscribe(a=>{this.tEmployees=a},a=>{})}onChangePage(a){this.page=a.pageIndex,this.pageSize=a.pageSize,this.loadData()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(g.D),t.Y36(m.qu),t.Y36(f.g),t.Y36(u.d),t.Y36(C.sK),t.Y36(c.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sale-card-month-by-employee-statistic"]],viewQuery:function(a,l){if(1&a&&(t.Gf(d.NW,7),t.Gf(v.YE,5)),2&a){let n;t.iGM(n=t.CRH())&&(l.paginator=n.first),t.iGM(n=t.CRH())&&(l.sort=n.first)}},decls:41,vars:28,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex",""],["fxFlex","",2,"margin","5px"],["appearance","outline"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","required","",3,"ngModel","ngModelChange"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cvtName"],["matColumnDef","typeName"],["matColumnDef","rePrice"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","count"],["matColumnDef","total"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of saleCardMonthByEmployeeStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-row",""],["mat-row",""]],template:function(a,l){1&a&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"mat-form-field",6),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"mat-select",7),t.NdJ("ngModelChange",function(r){return l.employee=r}),t.YNc(18,N,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",5),t.TgZ(20,"mat-form-field",6),t.TgZ(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"input",9),t.NdJ("ngModelChange",function(r){return l.dateFrom=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",5),t.TgZ(26,"mat-form-field",6),t.TgZ(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"input",9),t.NdJ("ngModelChange",function(r){return l.dateTo=r}),t.qZA(),t.qZA(),t.qZA(),t._UZ(31,"div",4),t.qZA(),t.TgZ(32,"div",10),t.YNc(33,b,3,3,"button",11),t.ALo(34,"userRoles"),t.YNc(35,L,3,3,"button",12),t.ALo(36,"userRoles"),t.YNc(37,O,3,4,"button",13),t.ALo(38,"userRoles"),t.qZA(),t.qZA(),t.YNc(39,G,24,8,"div",14),t.ALo(40,"userRoles"),t.qZA()),2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,12,"saleCardMonthByEmployeeStatisticModule.title")),t.xp6(10),t.Oqu(t.lcZ(16,14,"saleCardMonthByEmployeeStatisticModule.emNameCol")),t.xp6(2),t.Q6J("ngModel",l.employee),t.xp6(1),t.Q6J("ngForOf",l.tEmployees),t.xp6(4),t.Oqu(t.lcZ(23,16,"saleCardMonthByEmployeeStatisticModule.dateFromCol")),t.xp6(2),t.Q6J("ngModel",l.dateFrom),t.xp6(4),t.Oqu(t.lcZ(29,18,"saleCardMonthByEmployeeStatisticModule.dateToCol")),t.xp6(2),t.Q6J("ngModel",l.dateTo),t.xp6(3),t.Q6J("ngIf",t.lcZ(34,20,"ViewEmployeeCollectCardBStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(36,22,"ViewEmployeeCollectCardBStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(38,24,"ExportEmployeeCollectCardBStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(40,26,l.showList&&"ViewEmployeeCollectCardBStatistic")))},directives:[S.Yh,x.a8,x.n5,T.d,h.xw,h.yH,Z.KE,Z.hX,_.gD,m.Q7,m.JJ,m.On,c.sg,E.Nt,m.Fj,h.Wh,c.O5,A.ey,B.lW,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,d.NW,s.ge,s.ev,s.XQ,s.Gk],pipes:[C.X$,M.v],styles:[""]}),e})();var $=i(4382),W=i(4646),V=i(8576);const K=[{path:"",component:X}];let k=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[g.D,f.g,u.d,c.uU,{provide:d.ye,useClass:u.d}],imports:[[c.ez,V.q,M.a,$.Bz.forChild(K),S.Q8.withConfig({spinnerPosition:"right",color:"#red"}),W.bj]]}),e})()}}]);