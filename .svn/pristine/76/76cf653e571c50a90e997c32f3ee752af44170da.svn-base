"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[6714],{6714:(nt,h,a)=>{a.r(h),a.d(h,{RevenueByShiftStatisticModule:()=>et});var r=a(6019),p=a(8977),T=a(2262),l=a(4176),u=a(9839),t=a(3668),g=a(2300),S=a(9594),d=a(6765),v=a(563),y=a(6154),x=a(888),C=a(5694),f=a(5243),_=a(8167),A=a(6400),m=a(9133),B=a(138),R=a(6731),b=a(86),Z=a(9711);function N(e,n){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.Q6J("value",i.emId),t.xp6(1),t.Oqu(i.emName)}}function O(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(i),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function L(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(i),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function M(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(i),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("disabled",i.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function U(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function E(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=n.index,o=t.oxw(2);t.xp6(1),t.Oqu(i+1+o.page*o.pageSize)}}function q(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.vehicleTypeCol")))}function D(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.cvtName)}}function Q(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.ticketTypeCol")))}function I(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.typename)}}function Y(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"revenueByShiftStatistic.donViCol")))}function F(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.donVi)}}function J(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"revenueByShiftStatistic.donGiaCol")))}function w(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.donGia)}}function z(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"revenueByShiftStatistic.slTinhToanCol")))}function P(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.slTinhToan)}}function G(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"revenueByShiftStatistic.tongPhiCol")))}function H(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.tongPhi)}}function $(e,n){1&e&&t._UZ(0,"tr",36)}function j(e,n){1&e&&t._UZ(0,"tr",37)}function k(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",20),t.TgZ(2,"table",21),t.ynx(3,22),t.YNc(4,U,3,3,"th",23),t.YNc(5,E,2,1,"td",24),t.BQk(),t.ynx(6,25),t.YNc(7,q,3,3,"th",23),t.YNc(8,D,2,1,"td",24),t.BQk(),t.ynx(9,26),t.YNc(10,Q,3,3,"th",23),t.YNc(11,I,2,1,"td",24),t.BQk(),t.ynx(12,27),t.YNc(13,Y,3,3,"th",23),t.YNc(14,F,2,1,"td",24),t.BQk(),t.ynx(15,28),t.YNc(16,J,3,3,"th",23),t.YNc(17,w,2,1,"td",24),t.BQk(),t.ynx(18,29),t.YNc(19,z,3,3,"th",23),t.YNc(20,P,2,1,"td",24),t.BQk(),t.ynx(21,30),t.YNc(22,G,3,3,"th",23),t.YNc(23,H,2,1,"td",24),t.BQk(),t.YNc(24,$,1,0,"tr",31),t.YNc(25,j,1,0,"tr",32),t.qZA(),t.TgZ(26,"mat-paginator",33),t.NdJ("page",function(s){return t.CHM(i),t.oxw().onChangePage(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const i=t.oxw();t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("pageIndex",i.page)("length",i.totalRow)("disabled",!1)}}let V=(()=>{class e{constructor(i,o,s,c,it){this.dataService=i,this.notificationService=o,this.pagin=s,this.translateService=c,this.datePipe=it,this.displayedColumns=["position","vehicleType","ticketType","donVi","donGia","soLuongTinhToan","tongPhi"],this.dataSource=new l.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.disableButton=!0,this.keyword="",this.totalRow=0,this.totalPage=0,this.fillterName="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.showList=!1,this.employee=[]}ngOnInit(){this.getEmployeeTypes(),this.loadDataExport()}Refresh(){this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.fillterName="",this.showList=!1,this.employee=[]}loadData(){var i;if(this.employee.length>0)i=JSON.stringify(this.employee),this.dataService.get("RevenueByShiftStatistic/GetAllByPaging?deTuNgay="+this.dateFrom+"&Em_Id="+i+"&page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.fillterName).subscribe(o=>{this.data=o.items,0==this.data.length&&(this.Refresh(),this.showList=!1,this.translateService.get("messageSystem.staticsNull").subscribe(s=>u.Q.STATISTIC_NULL=s),this.notificationService.printErrorMessage(u.Q.STATISTIC_NULL)),this.data.length>0&&(this.disableButton=!1,this.dataSource=this.data),this.totalRow=o.totalCount,this.totalPage=o.totalPages},o=>{});else{let o;this.translateService.get("revenueByShiftStatistic.employeeChosse").subscribe(s=>o=s),this.notificationService.printErrorMessage(o)}this.loadDataExport()}getEmployeeTypes(){this.dataService.get("TEmployee/getAllEmployee").subscribe(i=>{this.employees=i},i=>{})}onChangePage(i){this.page=i.pageIndex,this.pageSize=i.pageSize,this.loadData()}loadDataExport(){if(this.employee.length>0){var i=JSON.stringify(this.employee);this.dataService.get("RevenueByShiftStatistic/GetAll?deTuNgay="+this.dateFrom+"&Em_Id="+i+"&keyword="+this.fillterName).subscribe(o=>{this.dataExports=o},o=>{})}}exportExcel(){this.dataExports.post("RevenueByShiftStatistic/ExportXls",{dateFrom:this.dateFrom,data:this.dataExports}).subscribe(o=>{window.location.href=o.result},o=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(s=>u.Q.EXPORT_FAILSE_MSG=s),this.notificationService.printErrorMessage(u.Q.EXPORT_FAILSE_MSG)})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(g.D),t.Y36(S.g),t.Y36(d.d),t.Y36(v.sK),t.Y36(r.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-revenue-by-shift-statistic"]],viewQuery:function(i,o){if(1&i&&(t.Gf(p.NW,7),t.Gf(T.YE,5)),2&i){let s;t.iGM(s=t.CRH())&&(o.paginator=s.first),t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:34,vars:24,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex",""],["fxFlex","",2,"margin","5px"],["appearance","outline"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","required","",3,"ngModel","ngModelChange"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vehicleType"],["matColumnDef","ticketType"],["matColumnDef","donVi"],["matColumnDef","donGia"],["matColumnDef","soLuongTinhToan"],["matColumnDef","tongPhi"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of cardInOutStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"mat-divider"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t._UZ(10,"div",4),t.TgZ(11,"div",5),t.TgZ(12,"mat-form-field",6),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"mat-select",7),t.NdJ("ngModelChange",function(c){return o.employee=c}),t.YNc(17,N,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",5),t.TgZ(19,"mat-form-field",6),t.TgZ(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"input",9),t.NdJ("ngModelChange",function(c){return o.dateFrom=c}),t.qZA(),t.qZA(),t.qZA(),t._UZ(24,"div",4),t.qZA(),t.TgZ(25,"div",10),t.YNc(26,O,3,3,"button",11),t.ALo(27,"userRoles"),t.YNc(28,L,3,3,"button",12),t.ALo(29,"userRoles"),t.YNc(30,M,3,4,"button",13),t.ALo(31,"userRoles"),t.qZA(),t.YNc(32,k,27,8,"div",14),t.ALo(33,"userRoles"),t.qZA()),2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,10,"revenueByShiftStatistic.title")),t.xp6(10),t.Oqu(t.lcZ(15,12,"revenueByShiftStatistic.emName")),t.xp6(2),t.Q6J("ngModel",o.employee),t.xp6(1),t.Q6J("ngForOf",o.employees),t.xp6(4),t.Oqu(t.lcZ(22,14,"cardInOutStatisticModule.fromDate")),t.xp6(2),t.Q6J("ngModel",o.dateFrom),t.xp6(3),t.Q6J("ngIf",t.lcZ(27,16,"ViewRevenueStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(29,18,"ExportRevenueStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(31,20,"ViewRevenueStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(33,22,o.showList&&"ViewRevenueStatistic")))},directives:[y.Yh,x.a8,x.n5,C.d,f.xw,f.yH,_.KE,_.hX,A.gD,m.JJ,m.On,r.sg,B.Nt,m.Fj,m.Q7,f.Wh,r.O5,R.ey,b.lW,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,p.NW,l.ge,l.ev,l.XQ,l.Gk],pipes:[v.X$,Z.v],styles:[""]}),e})();var X=a(4382),W=a(4646),K=a(8576);const tt=[{path:"",component:V}];let et=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[g.D,S.g,d.d,r.uU,{provide:p.ye,useClass:d.d}],imports:[[r.ez,K.q,Z.a,X.Bz.forChild(tt),y.Q8.withConfig({spinnerPosition:"right",color:"#red"}),W.bj]]}),e})()}}]);