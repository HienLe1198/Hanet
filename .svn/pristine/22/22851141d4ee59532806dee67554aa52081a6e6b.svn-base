"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[6240],{6240:(ft,g,l)=>{l.r(g),l.d(g,{PShiftModule:()=>ht});var S=l(6019),P=l(5351),r=l(9133),_=l(8977),y=l(2262),c=l(4176),h=l(9839),t=l(3668),x=l(2300),p=l(5304),Z=l(9594),T=l(6765),v=l(563),A=l(6154),C=l(888),L=l(5694),u=l(5243),d=l(8167),M=l(5498),q=l(138),F=l(86),E=l(904),I=l(7444),D=l(9112),b=l(9711);const N=["dialog"];function k(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialog("create")})("click",function(){return t.CHM(e),t.oxw().addData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.createButton")," "))}function Q(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",0==e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.deleteButton")," ")}}function O(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"th",33),t.TgZ(1,"mat-checkbox",34),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(2);return o?s.masterToggle():null}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function U(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"mat-checkbox",36),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const m=t.CHM(e).$implicit,f=t.oxw(2);return o?f.selection.toggle(m):null}),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("checked",a.selection.isSelected(e))("aria-label",a.checkboxLabel(e))}}function w(i,n){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function Y(i,n){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=n.index,a=t.oxw(2);t.xp6(1),t.Oqu(e+1+a.page*a.pageSize)}}function R(i,n){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"pShiftModule.shiftCol")))}function J(i,n){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.shift)}}function B(i,n){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"pShiftModule.fromTimeCol")))}function G(i,n){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.fromTime)}}function H(i,n){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"pShiftModule.toTimeCol")))}function z(i,n){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.toTime)}}function V(i,n){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"pShiftModule.areaCol")))}function j(i,n){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Oqu(e.area)}}function $(i,n){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.actionCol")))}function W(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"a",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).openDialog("edit",o)}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA()}2&i&&t.s9C("matTooltip",t.lcZ(1,1,"button.editButton"))}function K(i,n){1&i&&(t.TgZ(0,"td",35),t.YNc(1,W,4,3,"a",40),t.ALo(2,"userRoles"),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,"UpdatePShift")))}function X(i,n){1&i&&t._UZ(0,"tr",42)}function tt(i,n){1&i&&t._UZ(0,"tr",43)}function et(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"div",16),t.TgZ(2,"table",17),t.ynx(3,18),t.YNc(4,O,2,3,"th",19),t.YNc(5,U,2,2,"td",20),t.BQk(),t.ynx(6,21),t.YNc(7,w,3,3,"th",22),t.YNc(8,Y,2,1,"td",20),t.BQk(),t.ynx(9,23),t.YNc(10,R,3,3,"th",24),t.YNc(11,J,2,1,"td",20),t.BQk(),t.ynx(12,25),t.YNc(13,B,3,3,"th",24),t.YNc(14,G,2,1,"td",20),t.BQk(),t.ynx(15,26),t.YNc(16,H,3,3,"th",24),t.YNc(17,z,2,1,"td",20),t.BQk(),t.ynx(18,27),t.YNc(19,V,3,3,"th",24),t.YNc(20,j,2,1,"td",20),t.BQk(),t.ynx(21,28),t.YNc(22,$,3,3,"th",29),t.YNc(23,K,3,3,"td",20),t.BQk(),t.YNc(24,X,1,0,"tr",30),t.YNc(25,tt,1,0,"tr",31),t.qZA(),t.qZA(),t.TgZ(26,"mat-paginator",32),t.NdJ("page",function(o){return t.CHM(e),t.oxw().onChangePage(o)}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.page)("length",e.totalRow)("disabled",!1)}}function it(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"pShiftModule.shiftRequired")," "))}function ot(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"pShiftModule.FromTimeRequired")," "))}function at(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"pShiftModule.ToTimeRequired")," "))}function nt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"form",44),t.NdJ("submit",function(){return t.CHM(e),t.oxw().addData()}),t.TgZ(1,"h2",45),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-dialog-content",46),t.TgZ(5,"mat-form-field",47),t.TgZ(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"input",48),t.ALo(10,"translate"),t.YNc(11,it,3,3,"mat-error",49),t.qZA(),t.TgZ(12,"div",50),t.TgZ(13,"mat-form-field",51),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",52),t.ALo(18,"translate"),t.YNc(19,ot,3,3,"mat-error",49),t.qZA(),t.TgZ(20,"mat-form-field",53),t.TgZ(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"input",54),t.ALo(25,"translate"),t.YNc(26,at,3,3,"mat-error",49),t.qZA(),t.qZA(),t.TgZ(27,"mat-form-field",47),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",55),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.TgZ(33,"mat-dialog-actions",56),t.TgZ(34,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"button",58),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.PShiftForm),t.xp6(2),t.Oqu(t.lcZ(3,16,e.title)),t.xp6(5),t.Oqu(t.lcZ(8,18,"pShiftModule.shiftCol")),t.xp6(2),t.s9C("placeholder",t.lcZ(10,20,"pShiftModule.shiftCol")),t.xp6(2),t.Q6J("ngIf",e.getValidForm.shift.hasError("required")),t.xp6(4),t.Oqu(t.lcZ(16,22,"pShiftModule.fromTimeCol")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,24,"pShiftModule.fromTimeCol")),t.xp6(2),t.Q6J("ngIf",e.getValidForm.fromTime.hasError("required")),t.xp6(3),t.Oqu(t.lcZ(23,26,"pShiftModule.toTimeCol")),t.xp6(2),t.s9C("placeholder",t.lcZ(25,28,"pShiftModule.toTimeCol")),t.xp6(2),t.Q6J("ngIf",e.getValidForm.toTime.hasError("required")),t.xp6(3),t.Oqu(t.lcZ(30,30,"pShiftModule.areaCol")),t.xp6(2),t.s9C("placeholder",t.lcZ(32,32,"pShiftModule.areaCol")),t.xp6(4),t.Oqu(t.lcZ(36,34,"button.cancelButton")),t.xp6(2),t.Q6J("disabled",e.preventAbuse),t.xp6(1),t.Oqu(t.lcZ(39,36,"button.saveButton"))}}let lt=(()=>{class i{constructor(e,a,o,s,m,f){this.dataService=e,this.dialog=a,this.notificationService=o,this.pagin=s,this.translateService=m,this.formBuilder=f,this.displayedColumns=["select","position","shift","fromTime","toTime","area","action"],this.dataSource=new c.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.selection=new P.Ov(!0,[]),this.action="",this.title="",this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.PShiftForm=this.formBuilder.group({shiftId:"",shift:["",r.kI.compose([r.kI.required])],fromTime:["",r.kI.compose([r.kI.required])],toTime:["",r.kI.compose([r.kI.required])],area:""})}ngOnInit(){this.getAllPShift()}openDialog(e,a,o){if(this.action=e,"create"==e)this.translateService.get("pShiftModule.createMessage").subscribe(m=>this.title=m);else{this.translateService.get("pShiftModule.editMessage").subscribe(f=>this.title=f),this.PShiftForm.controls.shiftId.setValue(a.shiftId);let m=this.dataSource.filteredData.filter(f=>f.shiftId==a.shiftId)[0];this.PShiftForm.controls.shift.setValue(m.shift),this.PShiftForm.controls.fromTime.setValue(m.fromTime),this.PShiftForm.controls.toTime.setValue(m.toTime),this.PShiftForm.controls.area.setValue(m.area)}const s=this.dialog.open(this.dialogTemplate,{width:"650px"});s.disableClose=!0,s.afterClosed().subscribe(m=>{this.onReset()})}getAllPShift(){this.preventAbuse=!0,this.dataService.get("PShift/GetAllByPaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(e=>{this.dataSource=new c.by(e.items),this.dataSource.sort=this.sort,this.totalRow=e.totalCount},e=>{this.translateService.get("messageSystem.loadFail").subscribe(a=>h.Q.GET_FAILSE_MSG=a),this.notificationService.printErrorMessage(h.Q.GET_FAILSE_MSG)}),this.preventAbuse=!1}onReset(){this.dialog.closeAll(),this.PShiftForm.reset()}applyFilter(e){this.keyword=e.target.value,this.page=0,this.getAllPShift(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}get getValidForm(){return this.PShiftForm.controls}addData(){this.PShiftForm.invalid||(this.preventAbuse=!0,"create"==this.action?this.dataService.post("PShift/create",{shift:this.PShiftForm.controls.shift.value,fromTime:this.PShiftForm.controls.fromTime.value,toTime:this.PShiftForm.controls.toTime.value,area:this.PShiftForm.controls.area.value}).subscribe(a=>{let o;this.translateService.get("messageSystem.createSuccess").subscribe(s=>o=s),this.notificationService.printSuccessMessage(o),this.getAllPShift(),this.dialog.closeAll(),this.onReset()},a=>{let o;this.translateService.get("messageSystem.createFail").subscribe(s=>o=s),this.notificationService.printErrorMessage(o)}):"edit"==this.action&&this.dataService.put("PShift/update",{shiftId:this.PShiftForm.controls.shiftId.value,shift:this.PShiftForm.controls.shift.value,fromTime:this.PShiftForm.controls.fromTime.value,toTime:this.PShiftForm.controls.toTime.value,area:this.PShiftForm.controls.area.value}).subscribe(a=>{let o;this.translateService.get("messageSystem.updateSuccess").subscribe(s=>o=s),this.notificationService.printSuccessMessage(o),this.getAllPShift(),this.dialog.closeAll(),this.onReset()},a=>{let o;this.translateService.get("messageSystem.updateFail").subscribe(s=>o=s),this.notificationService.printErrorMessage(o)}),this.onReset(),this.preventAbuse=!1)}removeData(){let e=[];this.selection.selected.forEach(a=>{e.push(a.shiftId)}),this.translateService.get("messageSystem.confirmDelete").subscribe(a=>h.Q.CONFIRM_DELETE_MSG=a),this.notificationService.printConfirmationDialog(h.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(e)))}deleteItemConfirm(e){this.preventAbuse=!0,this.dataService.delete("PShift/deletemulti","checkedList",e).subscribe(a=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(o=>h.Q.DELETED_OK_MSG=o),this.translateService.get("messageSystem.deleteFail").subscribe(o=>h.Q.DELETE_FAILSE_MSG=o),a[0]>0&&this.notificationService.printSuccessMessage(h.Q.DELETED_OK_MSG+a[0]),a[1]>0&&this.notificationService.printErrorMessage(h.Q.DELETE_FAILSE_MSG+a[1]),this.selection.clear(),this.getAllPShift()},a=>{this.translateService.get("messageSystem.deletefail").subscribe(o=>h.Q.DELETE_FAILSE_MSG=o),this.notificationService.printErrorMessage(h.Q.DELETE_FAILSE_MSG)}),this.preventAbuse=!1}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onChangePage(e){this.page=e.pageIndex,this.pageSize=e.pageSize,this.getAllPShift()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.D),t.Y36(p.uw),t.Y36(Z.g),t.Y36(T.d),t.Y36(v.sK),t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-p-shift"]],viewQuery:function(e,a){if(1&e&&(t.Gf(_.NW,5),t.Gf(y.YE,5),t.Gf(N,5)),2&e){let o;t.iGM(o=t.CRH())&&(a.paginator=o.first),t.iGM(o=t.CRH())&&(a.sort=o.first),t.iGM(o=t.CRH())&&(a.dialogTemplate=o.first)}},decls:29,vars:18,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","satrt center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","shift"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","fromTime"],["matColumnDef","toTime"],["matColumnDef","area"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["action","",3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline"],["matInput","","formControlName","shift","required","",3,"placeholder"],[4,"ngIf"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column","fxLayoutGap","center center"],["appearance","outline",2,"margin-right","5px"],["type","time","matInput","","formControlName","fromTime","required","",3,"placeholder"],["appearance","outline",2,"margin-left","5px"],["type","time","matInput","","formControlName","toTime","required","",3,"placeholder"],["matInput","","formControlName","area",3,"placeholder"],["align","center"],["mat-stroked-button","","color","warn","mat-dialog-close","",3,"click"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"]],template:function(e,a){1&e&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t.TgZ(11,"div",4),t.YNc(12,k,3,3,"button",5),t.ALo(13,"userRoles"),t.YNc(14,Q,3,4,"button",6),t.ALo(15,"userRoles"),t.qZA(),t._UZ(16,"div",7),t.TgZ(17,"div",7),t.TgZ(18,"mat-form-field",8),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",9,10),t.NdJ("keyup",function(s){return a.applyFilter(s)}),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(25,et,27,8,"div",11),t.ALo(26,"userRoles"),t.qZA(),t.YNc(27,nt,40,38,"ng-template",null,12,t.W1O)),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,6,"pShiftModule.title")),t.xp6(7),t.Q6J("ngIf",t.lcZ(13,8,"CreatePShift")),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,10,"DeletePShift")),t.xp6(6),t.hij(" ",t.lcZ(21,12,"button.searchButton"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(24,14,"button.searchPlaceholder")),t.xp6(3),t.Q6J("ngIf",t.lcZ(26,16,"ViewPShift")))},directives:[A.Yh,C.a8,C.n5,L.d,u.xw,u.yH,u.Wh,S.O5,d.KE,M.oO,d.hX,q.Nt,F.lW,c.BZ,c.w1,c.fO,c.Dz,c.as,c.nj,_.NW,c.ge,E.oG,c.ev,I.gM,D.Hw,c.XQ,c.Gk,r._Y,r.JL,r.sg,p.uh,p.xY,r.Fj,r.JJ,r.u,r.Q7,u.SQ,p.H8,p.ZT,d.TO],pipes:[v.X$,b.v],styles:[""]}),i})();var st=l(4382),rt=l(8576),ct=l(4646);const mt=[{path:"",component:lt}];let ht=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[x.D,Z.g,T.d],imports:[[S.ez,rt.q,b.a,st.Bz.forChild(mt),A.Q8.withConfig({spinnerPosition:"right",color:"#red"}),ct.bj]]}),i})()}}]);