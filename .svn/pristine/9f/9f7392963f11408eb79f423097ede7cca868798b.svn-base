"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[3371],{3371:(Le,v,l)=>{l.r(v),l.d(v,{AppMenuModule:()=>Ne});var C=l(9711),F=l(4382),g=l(6019),M=l(5351),T=l(1628),u=l(9133),S=l(8977),d=l(4176),m=l(9839),I=l(4544),h=l(1423),b=l(1125),A=l(8053),q=l(4747),e=l(3668),D=l(2300),N=l(563),O=l(9594),E=l(6765),_=l(5304),L=l(6154),k=l(888),J=l(5694),x=l(5243),f=l(8167),Q=l(5498),w=l(138),B=l(86),P=l(904),R=l(7444),Y=l(9112),y=l(9851),H=l(6731),V=l(2463);const G=["dialog"],j=["menuUser"];function z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialog("create")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.createButton")," "))}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().openAddUserDialog()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.addMenuUserButton")," "))}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeData()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",0==t.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"button.deleteButton")," ")}}function K(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"th",33),e.TgZ(1,"mat-checkbox",34),e.NdJ("change",function(a){e.CHM(t);const i=e.oxw(2);return a?i.masterToggle():null}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function X(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td",35),e.TgZ(1,"mat-checkbox",36),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=e.CHM(t).$implicit,p=e.oxw(2);return a?p.selection.toggle(c):null}),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selection.isSelected(t))("aria-label",n.checkboxLabel(t))}}function ee(o,s){1&o&&(e.TgZ(0,"th",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.positionCol")))}function te(o,s){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=s.index,n=e.oxw(2);e.xp6(1),e.Oqu(t+1+n.page*n.pageSize)}}function ne(o,s){1&o&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"appMenuModule.menuNameCol")))}function oe(o,s){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Oqu(t.menuName)}}function ae(o,s){1&o&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.createdByCol")))}function ie(o,s){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"userPipe"),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.createdBy))}}function se(o,s){1&o&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.createdDateCol")))}function le(o,s){if(1&o&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.createdDate,"dd-MM-yyyy HH:mm:ss"))}}function re(o,s){1&o&&(e.TgZ(0,"th",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.actionCol")))}function ce(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).openDialog("edit",a)}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA()}2&o&&e.s9C("matTooltip",e.lcZ(1,1,"button.editButton"))}function ue(o,s){1&o&&(e.TgZ(0,"td",35),e.YNc(1,ce,4,3,"a",40),e.ALo(2,"userRoles"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"UpdateMenu")))}function pe(o,s){1&o&&e._UZ(0,"tr",42)}function de(o,s){1&o&&e._UZ(0,"tr",43)}function me(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"table",18),e.ynx(3,19),e.YNc(4,K,2,3,"th",20),e.YNc(5,X,2,2,"td",21),e.BQk(),e.ynx(6,22),e.YNc(7,ee,3,3,"th",23),e.YNc(8,te,2,1,"td",21),e.BQk(),e.ynx(9,24),e.YNc(10,ne,3,3,"th",25),e.YNc(11,oe,2,1,"td",21),e.BQk(),e.ynx(12,26),e.YNc(13,ae,3,3,"th",25),e.YNc(14,ie,3,3,"td",21),e.BQk(),e.ynx(15,27),e.YNc(16,se,3,3,"th",25),e.YNc(17,le,3,4,"td",21),e.BQk(),e.ynx(18,28),e.YNc(19,re,3,3,"th",29),e.YNc(20,ue,3,3,"td",21),e.BQk(),e.YNc(21,pe,1,0,"tr",30),e.YNc(22,de,1,0,"tr",31),e.qZA(),e.qZA(),e.TgZ(23,"mat-paginator",32),e.NdJ("page",function(a){return e.CHM(t),e.oxw().onChangePage(a)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageIndex",t.page)("length",t.totalRow)("disabled",!1)}}function he(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).parentIdControl.reset()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e.qZA()}}function ge(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",68),e.NdJ("onSelectionChange",function(){const i=e.CHM(t).$implicit;return e.oxw(2).getParentId(i)}),e._uU(1),e.qZA()}if(2&o){const t=s.$implicit;e.Q6J("value",t.menuName),e.xp6(1),e.hij(" ",t.menuName," ")}}function _e(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"appMenuModule.nameRequired")," "))}function fe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"appMenuModule.nameRequired")," "))}function Ae(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",44),e.NdJ("submit",function(){return e.CHM(t),e.oxw().addData()}),e.TgZ(1,"h2",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",46),e.TgZ(5,"mat-form-field",47),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",48),e.ALo(10,"translate"),e.YNc(11,he,3,0,"button",49),e.TgZ(12,"mat-autocomplete",50,51),e.YNc(14,ge,2,2,"mat-option",52),e.ALo(15,"async"),e.qZA(),e.qZA(),e.TgZ(16,"mat-form-field",53),e.TgZ(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",54,55),e.ALo(22,"translate"),e.TgZ(23,"mat-hint",56),e._uU(24),e.qZA(),e.YNc(25,_e,3,3,"mat-error",57),e.qZA(),e.TgZ(26,"mat-form-field",53),e.TgZ(27,"mat-label"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"input",58,59),e.ALo(32,"translate"),e.TgZ(33,"mat-hint",56),e._uU(34),e.qZA(),e.YNc(35,fe,3,3,"mat-error",57),e.qZA(),e.TgZ(36,"mat-form-field",53),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"input",60,61),e.ALo(42,"translate"),e.TgZ(43,"mat-hint",56),e._uU(44),e.qZA(),e.qZA(),e.TgZ(45,"mat-form-field",53),e.TgZ(46,"mat-label"),e._uU(47),e.ALo(48,"translate"),e.qZA(),e._UZ(49,"input",62,63),e.ALo(51,"translate"),e.TgZ(52,"mat-hint",56),e._uU(53),e.qZA(),e.qZA(),e.qZA(),e.TgZ(54,"mat-dialog-actions",64),e.TgZ(55,"button",65),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"button",66),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(13),n=e.MAs(21),a=e.MAs(31),i=e.MAs(41),c=e.MAs(50),p=e.oxw();e.Q6J("formGroup",p.menuForm),e.xp6(2),e.Oqu(e.lcZ(3,25,p.title)),e.xp6(5),e.Oqu(e.lcZ(8,27,"appMenuModule.parentIdCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(10,29,"appMenuModule.parentIdCol")),e.Q6J("formControl",p.parentIdControl)("matAutocomplete",t),e.xp6(2),e.Q6J("ngIf",p.parentIdControl.value),e.xp6(3),e.Q6J("ngForOf",e.lcZ(15,31,p.filteredOptions)),e.xp6(4),e.Oqu(e.lcZ(19,33,"appMenuModule.menuNameCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(22,35,"appMenuModule.menuNameCol")),e.xp6(4),e.hij("",n.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",p.getValidForm.menuName.hasError("required")),e.xp6(3),e.Oqu(e.lcZ(29,37,"appMenuModule.iconCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(32,39,"appMenuModule.iconCol")),e.xp6(4),e.hij("",a.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",p.getValidForm.menuName.hasError("required")),e.xp6(3),e.Oqu(e.lcZ(39,41,"appMenuModule.linkCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(42,43,"appMenuModule.linkCol")),e.xp6(4),e.hij("",i.value.length," / 100"),e.xp6(3),e.Oqu(e.lcZ(48,45,"appMenuModule.activeLinkCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(51,47,"appMenuModule.activeLinkCol")),e.xp6(4),e.hij("",c.value.length," / 100"),e.xp6(3),e.Oqu(e.lcZ(57,49,"button.cancelButton")),e.xp6(2),e.Q6J("disabled",p.preventAbuse),e.xp6(1),e.Oqu(e.lcZ(60,51,"button.saveButton"))}}function xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",68),e.NdJ("onSelectionChange",function(){const i=e.CHM(t).$implicit;return e.oxw(2).getMenuUser(i)}),e._uU(1),e.qZA()}if(2&o){const t=s.$implicit;e.Q6J("value",t.userName),e.xp6(1),e.hij(" ",t.userName," ")}}function Ze(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-tree-node",73),e._UZ(1,"button",74),e.TgZ(2,"mat-checkbox",75),e.NdJ("change",function(){const i=e.CHM(t).$implicit;return e.oxw(2).todoLeafItemSelectionToggle(i)}),e._uU(3),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("checked",n.checklistSelection.isSelected(t)),e.xp6(1),e.Oqu(t.name)}}function ve(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-tree-node",76),e.TgZ(1,"button",77),e.TgZ(2,"mat-icon",78),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"mat-checkbox",79),e.NdJ("change",function(){const i=e.CHM(t).$implicit;return e.oxw(2).todoItemSelectionToggle(i)}),e._uU(5),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.uIk("aria-label","Toggle "+t.name),e.xp6(2),e.hij(" ",n.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(1),e.Q6J("checked",n.descendantsAllSelected(t)),e.xp6(1),e.Oqu(t.name)}}function Ce(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",69),e.NdJ("submit",function(){return e.CHM(t),e.oxw().updateUserMenu()}),e.TgZ(1,"h2",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",46),e.TgZ(5,"mat-form-field",47),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",48),e.ALo(10,"translate"),e.TgZ(11,"mat-autocomplete",50,51),e.YNc(13,xe,2,2,"mat-option",52),e.ALo(14,"async"),e.qZA(),e.qZA(),e.TgZ(15,"fieldset"),e.TgZ(16,"legend"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"mat-tree",70),e._uU(20," <"),e.YNc(21,Ze,4,2,"mat-tree-node",71),e.YNc(22,ve,6,4,"mat-tree-node",72),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"mat-dialog-actions",64),e.TgZ(24,"button",65),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"button",66),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(12),n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,13,n.title)),e.xp6(5),e.Oqu(e.lcZ(8,15,"appMenuModule.userCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(10,17,"appMenuModule.userCol")),e.Q6J("formControl",n.userMenuControl)("matAutocomplete",t),e.xp6(4),e.Q6J("ngForOf",e.lcZ(14,19,n.userFiltereds)),e.xp6(4),e.Oqu(e.lcZ(18,21,"appMenuModule.chooseMenuCol")),e.xp6(2),e.Q6J("dataSource",n.treeMenus)("treeControl",n.treeControl),e.xp6(3),e.Q6J("matTreeNodeDefWhen",n.hasChild),e.xp6(3),e.Oqu(e.lcZ(26,23,"button.cancelButton")),e.xp6(2),e.Q6J("disabled",n.preventAbuse),e.xp6(1),e.Oqu(e.lcZ(29,25,"button.saveButton"))}}const U=JSON.parse(localStorage.getItem(q.h.CURRENT_USER));let Me=(()=>{class o{constructor(t,n,a,i,c,p){this.dataService=t,this.translateService=n,this.notificationService=a,this.pagin=i,this.dialog=c,this.formBuilder=p,this.action="",this.title="",this.displayedColumns=["select","position","menuName","createdDate","createdBy","action"],this.dataSource=new d.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.pageSizeOptions=[5,10,25,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.selection=new M.Ov(!0,[]),this.separatorKeysCodes=[T.K5,T.OC],this._transformer=(r,Z)=>({expandable:!!r.childrens&&r.childrens.length>0,name:r.menuName,level:Z,id:r.id}),this.treeControl=new I.C2(r=>r.level,r=>r.expandable),this.treeFlattener=new h.JZ(this._transformer,r=>r.level,r=>r.expandable,r=>r.childrens),this.treeMenus=new h.kc(this.treeControl,this.treeFlattener),this.checklistSelection=new M.Ov(!0),this.parentIdControl=new u.NI,this.userMenuControl=new u.NI,this.getLevel=r=>r.level,this.hasChild=(r,Z)=>Z.expandable,this.menuForm=this.formBuilder.group({id:0,menuName:["",u.kI.compose([u.kI.required,u.kI.maxLength(50)])],parentId:[""],createdDate:"",createdBy:"",updatedDate:"",updatedBy:"",isDeleted:"",icon:["",u.kI.compose([u.kI.maxLength(100)])],link:["",u.kI.compose([u.kI.maxLength(100)])],activeLink:["",u.kI.compose([u.kI.maxLength(100)])]}),this.filteredOptions=this.parentIdControl.valueChanges.pipe((0,b.O)(""),(0,A.U)(r=>r),(0,A.U)(r=>r?this._filter(r):this.menuParents.slice())),this.userFiltereds=this.userMenuControl.valueChanges.pipe((0,b.O)(""),(0,A.U)(r=>r),(0,A.U)(r=>r?this._userFilter(r):this.users.slice()))}ngOnInit(){this.loadAllMenus(),this.loadParentMenus(),this.loadUsers(),this.loadTreeMenus()}_filter(t){var n;const a=null===(n=t.menuName)||void 0===n?void 0:n.toLowerCase();return this.menuParents.filter(i=>{var c;return null===(c=i.menuName)||void 0===c?void 0:c.toLowerCase().includes(a)})}_userFilter(t){var n;const a=null===(n=t.userName)||void 0===n?void 0:n.toLowerCase();return this.users.filter(i=>{var c;return null===(c=i.userName)||void 0===c?void 0:c.toLowerCase().includes(a)})}loadAllMenus(){this.preventAbuse=!0,this.dataService.get("appmenus/getlistpaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(t=>{this.dataSource=new d.by(t.items),this.totalRow=t.totalCount,this.preventAbuse=!1},t=>{this.translateService.get("messageSystem.loadFail").subscribe(n=>m.Q.GET_FAILSE_MSG=n),this.notificationService.printErrorMessage(m.Q.GET_FAILSE_MSG),this.preventAbuse=!1})}loadParentMenus(){this.dataService.get("appmenus/getall").subscribe(t=>{this.menuParents=t},t=>{})}loadUsers(){this.dataService.get("appusers/getall").subscribe(t=>{this.users=t},t=>{})}loadTreeMenus(){this.dataService.get("appmenus/getmenutree").subscribe(t=>{this.treeMenus.data=t},t=>{})}openDialog(t,n,a){if(this.action=t,"create"==t)this.translateService.get("appMenuModule.createMessage").subscribe(c=>this.title=c);else{this.translateService.get("appMenuModule.editMessage").subscribe(r=>this.title=r),this.menuForm.controls.id.setValue(n.id);let c=this.dataSource.filteredData.filter(r=>r.id==n.id)[0];this.menuForm.controls.menuName.setValue(c.menuName),this.menuForm.controls.parentId.setValue(c.parentId),this.menuForm.controls.createdDate.setValue(c.createdDate),this.menuForm.controls.createdBy.setValue(c.createdBy),this.menuForm.controls.updatedDate.setValue(c.updatedDate),this.menuForm.controls.updatedBy.setValue(c.updatedBy),this.menuForm.controls.icon.setValue(c.icon),this.menuForm.controls.link.setValue(c.link),this.menuForm.controls.activeLink.setValue(c.activeLink);let p=this.menuParents.filter(r=>r.id==n.parentId)[0];this.parentIdControl.setValue(null==p?void 0:p.menuName)}this.dialog.open(this.dialogTemplate,{width:"750px"}).afterClosed().subscribe(c=>{this.onReset()})}openAddUserDialog(){this.dialog.open(this.menuUserTemplate,{width:"750px",autoFocus:!1}).afterClosed().subscribe(n=>{this.resetUpdateMenuUser()})}removeData(){let t=[];this.selection.selected.forEach(n=>{t.push(n.id)}),this.translateService.get("messageSystem.confirmDelete").subscribe(n=>m.Q.CONFIRM_DELETE_MSG=n),this.notificationService.printConfirmationDialog(m.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(t)))}deleteItemConfirm(t){this.preventAbuse=!0,this.dataService.delete("appmenus/deletemulti","checkedList",t).subscribe(n=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(a=>m.Q.DELETED_OK_MSG=a),this.notificationService.printSuccessMessage(m.Q.DELETED_OK_MSG),this.preventAbuse=!1,this.selection.clear(),this.loadAllMenus(),this.loadParentMenus()},n=>{this.translateService.get("messageSystem.deletefail").subscribe(a=>m.Q.DELETE_FAILSE_MSG=a),this.notificationService.printErrorMessage(m.Q.DELETE_FAILSE_MSG),this.preventAbuse=!1})}applyFilter(t){this.keyword=t.target.value,this.page=0,this.loadAllMenus(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}addData(){this.menuForm.invalid||(this.preventAbuse=!0,"create"==this.action?this.dataService.post("appmenus/create",{menuName:this.menuForm.controls.menuName.value,parentId:this.menuForm.controls.parentId.value,icon:this.menuForm.controls.icon.value,link:this.menuForm.controls.link.value,activeLink:this.menuForm.controls.activeLink.value,createdBy:U.id}).subscribe(n=>{let a;this.translateService.get("messageSystem.createSuccess").subscribe(i=>a=i),this.notificationService.printSuccessMessage(a),this.preventAbuse=!1,this.loadAllMenus(),this.loadParentMenus(),this.onReset()},n=>{let a;this.translateService.get("messageSystem.createFail").subscribe(i=>a=i),this.notificationService.printErrorMessage(n),this.preventAbuse=!1}):"edit"==this.action&&this.dataService.put("appmenus/update",{menuName:this.menuForm.controls.menuName.value,parentId:this.menuForm.controls.parentId.value,id:this.menuForm.controls.id.value,icon:this.menuForm.controls.icon.value,link:this.menuForm.controls.link.value,activeLink:this.menuForm.controls.activeLink.value,updatedBy:U.id,createdDate:this.menuForm.controls.createdDate.value,createdBy:this.menuForm.controls.createdBy.value}).subscribe(n=>{let a;this.translateService.get("messageSystem.updateSuccess").subscribe(i=>a=i),this.notificationService.printSuccessMessage(a),this.preventAbuse=!1,this.loadAllMenus(),this.loadParentMenus(),this.onReset()},n=>{let a;this.translateService.get("messageSystem.updateFail").subscribe(i=>a=i),this.notificationService.printErrorMessage(n),this.preventAbuse=!1}))}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}onChangePage(t){this.page=t.pageIndex,this.pageSize=t.pageSize,this.loadAllMenus()}descendantsAllSelected(t){const n=this.treeControl.getDescendants(t);return n.length>0&&n.every(i=>this.checklistSelection.isSelected(i))}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const n=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...n):this.checklistSelection.deselect(...n),n.forEach(a=>this.checklistSelection.isSelected(a)),this.checkAllParentsSelection(t)}checkAllParentsSelection(t){let n=this.getParentNode(t);for(;n;)this.checkRootNodeSelection(n),n=this.getParentNode(n)}getParentNode(t){const n=this.getLevel(t);if(n<1)return null;for(let i=this.treeControl.dataNodes.indexOf(t)-1;i>=0;i--){const c=this.treeControl.dataNodes[i];if(this.getLevel(c)<n)return c}return null}checkRootNodeSelection(t){const n=this.checklistSelection.isSelected(t),a=this.treeControl.getDescendants(t),i=a.length>0&&a.every(c=>this.checklistSelection.isSelected(c));n&&!i?this.checklistSelection.deselect(t):!n&&i&&this.checklistSelection.select(t)}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(i=>this.checklistSelection.isSelected(i))&&!this.descendantsAllSelected(t)}todoLeafItemSelectionToggle(t){this.checklistSelection.toggle(t),this.checkAllParentsSelection(t)}get getValidForm(){return this.menuForm.controls}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onReset(){this.dialog.closeAll(),this.menuForm.reset(),this.parentIdControl.reset()}getParentId(t){this.menuForm.controls.parentId.setValue(t.id)}getMenuUser(t){this.dataService.get("appmenus/getmenuuser?id="+t.id).subscribe(n=>{this.menuUsers=n,this.setCheckedMenuNode()},n=>{})}resetSelection(){this.treeControl.dataNodes.forEach(t=>{this.checklistSelection.deselect(t)})}setCheckedMenuNode(){this.resetSelection(),this.menuUsers.forEach(t=>{let n=this.treeControl.dataNodes.filter(a=>a.id==t.id)[0];this.checklistSelection.toggle(n)}),this.menuUsers.forEach(t=>{let n=this.treeControl.dataNodes.filter(a=>a.id==t.id)[0];this.checkAllParentsSelection(n)})}updateUserMenu(){this.preventAbuse=!0;let t={userId:this.getUserId(this.userMenuControl.value),appMenus:this.getMenuSelected()};this.dataService.post("appmenuusers/create",t).subscribe(n=>{let a;this.translateService.get("messageSystem.updateSuccess").subscribe(i=>a=i),this.notificationService.printSuccessMessage(a),this.preventAbuse=!1},n=>{let a;this.translateService.get("messageSystem.updateFail").subscribe(i=>a=i),this.notificationService.printErrorMessage(n),this.preventAbuse=!1})}getUserId(t){let n=this.users.filter(a=>a.userName.toLowerCase()==t.toLocaleLowerCase())[0];return null==n?void 0:n.id}getMenuSelected(){let t=[];return this.checklistSelection.selected.length>0&&this.checklistSelection.selected.forEach(n=>{let a={id:""};a.id=n.id,t.push(a)}),t}resetUpdateMenuUser(){this.userMenuControl.reset(),this.checklistSelection.clear()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(D.D),e.Y36(N.sK),e.Y36(O.g),e.Y36(E.d),e.Y36(_.uw),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-menu"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S.NW,5),e.Gf(G,5),e.Gf(j,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first),e.iGM(a=e.CRH())&&(n.dialogTemplate=a.first),e.iGM(a=e.CRH())&&(n.menuUserTemplate=a.first)}},decls:33,vars:21,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","satrt center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["menuUser",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","menuName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","createdBy"],["matColumnDef","createdDate"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["action","",3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline",1,"example-full-width"],["type","text","aria-label","Menu","matInput","",3,"placeholder","formControl","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["appearance","outline"],["matInput","","formControlName","menuName","required","","maxlength","100",3,"placeholder"],["menuName",""],["align","end"],[4,"ngIf"],["matInput","","formControlName","icon","maxlength","100",3,"placeholder"],["icon",""],["matInput","","formControlName","link","maxlength","100",3,"placeholder"],["link",""],["matInput","","formControlName","activeLink","maxlength","100",3,"placeholder"],["activeLink",""],["align","center",1,"sticky-modal-footer"],["mat-stroked-button","","color","warn","mat-dialog-close",""],["mat-stroked-button","","color","primary","type","submit",3,"disabled"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value","onSelectionChange"],["action","post",3,"submit"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding",""],["type","button","mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["type","button","mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","change"]],template:function(t,n){1&t&&(e._UZ(0,"ng-progress",0,1),e.TgZ(2,"mat-card"),e.TgZ(3,"div"),e.TgZ(4,"mat-card-title",2),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-divider"),e._UZ(8,"br"),e._UZ(9,"br"),e.TgZ(10,"div",3),e.TgZ(11,"div",4),e.YNc(12,z,3,3,"button",5),e.ALo(13,"userRoles"),e.YNc(14,$,3,3,"button",5),e.ALo(15,"userRoles"),e.YNc(16,W,3,4,"button",6),e.ALo(17,"userRoles"),e.qZA(),e._UZ(18,"div",7),e.TgZ(19,"div",7),e.TgZ(20,"mat-form-field",8),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"input",9,10),e.NdJ("keyup",function(i){return n.applyFilter(i)}),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,me,24,7,"div",11),e.ALo(28,"userRoles"),e.qZA(),e.YNc(29,Ae,61,53,"ng-template",null,12,e.W1O),e.YNc(31,Ce,30,27,"ng-template",null,13,e.W1O)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,7,"appMenuModule.title")),e.xp6(7),e.Q6J("ngIf",e.lcZ(13,9,"CreateMenu")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,11,"UpdateUserMenu")),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,13,"DeleteMenu")),e.xp6(6),e.hij(" ",e.lcZ(23,15,"button.searchButton"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(26,17,"button.searchPlaceholder")),e.xp6(3),e.Q6J("ngIf",e.lcZ(28,19,"ViewMenu")))},directives:[L.Yh,k.a8,k.n5,J.d,x.xw,x.yH,x.Wh,g.O5,f.KE,Q.oO,f.hX,w.Nt,B.lW,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,S.NW,d.ge,P.oG,d.ev,R.gM,Y.Hw,d.XQ,d.Gk,u._Y,u.JL,u.sg,_.uh,_.xY,u.Fj,y.ZL,u.JJ,u.oH,y.XC,g.sg,u.u,u.Q7,u.nD,f.bx,_.H8,_.ZT,f.R9,H.ey,f.TO,u.F,h.gi,h.fQ,h.uo,h.eu,h.ah],pipes:[N.X$,C.v,V.d,g.uU,g.Ov],styles:[""]}),o})();var Te=l(8576),Se=l(4646);const be=[{path:"",component:Me}];let Ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.ez,Te.q,C.a,L.Q8.withConfig({spinnerPosition:"right",color:"#red"}),Se.bj,F.Bz.forChild(be)]]}),o})()}}]);