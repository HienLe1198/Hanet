"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[3416],{3416:(rt,p,n)=>{n.r(p),n.d(p,{TotalNumberInOutStatisticModule:()=>lt});var r=n(6019),g=n(8977),x=n(2262),s=n(4176),c=n(9839),t=n(3668),T=n(2300),u=n(9133),h=n(9594),f=n(6765),N=n(563),_=n(6154),Z=n(888),I=n(5694),d=n(5243),b=n(8167),C=n(6400),O=n(138),A=n(6731),v=n(86),S=n(9711);function y(e,i){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.Q6J("value",a.depId),t.xp6(1),t.hij(" ",a.depName," ")}}function M(e,i){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.name," ")}}function q(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(a),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function L(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(a),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function U(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(a),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const a=t.oxw();t.Q6J("disabled",a.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function D(e,i){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function Q(e,i){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const a=i.index,o=t.oxw(2);t.xp6(1),t.Oqu(a+1+o.page*o.pageSize)}}function Y(e,i){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"totalNumberInOutStatisticModule.emNameCol")," "))}function J(e,i){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.emName)}}function F(e,i){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"totalNumberInOutStatisticModule.emCodeCol"),""))}function E(e,i){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.emCode)}}function B(e,i){1&e&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"totalNumberInOutStatisticModule.depNameCol")," "))}function R(e,i){if(1&e&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.depName)}}function w(e,i){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"totalNumberInOutStatisticModule.regNameCol")," "))}function H(e,i){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.regName)}}function z(e,i){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"totalNumberInOutStatisticModule.dateTimeCol")," "))}function j(e,i){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.dateTime,"dd-MM-yyyy"))}}function P(e,i){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"totalNumberInOutStatisticModule.emIdentityNumberCol"),""))}function G(e,i){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.emIdentityNumber)}}function $(e,i){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"totalNumberInOutStatisticModule.tONGSOLANVAOCol"),""))}function X(e,i){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.tongsolanvao)}}function W(e,i){1&e&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"totalNumberInOutStatisticModule.tONGSOLANRA"),""))}function k(e,i){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.tongsolanra)}}function V(e,i){1&e&&t._UZ(0,"tr",42)}function K(e,i){1&e&&t._UZ(0,"tr",43)}function tt(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",20),t.TgZ(2,"table",21),t.ynx(3,22),t.YNc(4,D,3,3,"th",23),t.YNc(5,Q,2,1,"td",24),t.BQk(),t.ynx(6,25),t.YNc(7,Y,3,3,"th",23),t.YNc(8,J,2,1,"td",24),t.BQk(),t.ynx(9,26),t.YNc(10,F,3,3,"th",27),t.YNc(11,E,2,1,"td",28),t.BQk(),t.ynx(12,29),t.YNc(13,B,3,3,"th",23),t.YNc(14,R,2,1,"td",24),t.BQk(),t.ynx(15,30),t.YNc(16,w,3,3,"th",27),t.YNc(17,H,2,1,"td",28),t.BQk(),t.ynx(18,31),t.YNc(19,z,3,3,"th",27),t.YNc(20,j,3,4,"td",28),t.BQk(),t.ynx(21,32),t.YNc(22,P,3,3,"th",27),t.YNc(23,G,2,1,"td",28),t.BQk(),t.ynx(24,33),t.YNc(25,$,3,3,"th",27),t.YNc(26,X,2,1,"td",28),t.BQk(),t.ynx(27,34),t.YNc(28,W,3,3,"th",27),t.YNc(29,k,2,1,"td",28),t.BQk(),t.YNc(30,V,1,0,"tr",35),t.YNc(31,K,1,0,"tr",36),t.qZA(),t.TgZ(32,"mat-paginator",37),t.NdJ("page",function(l){return t.CHM(a),t.oxw().onChangePage(l)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=t.oxw();t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",a.pageSizeOptions)("pageIndex",a.page)("length",a.totalRow)("disabled",!1)}}let et=(()=>{class e{constructor(a,o,l,m,mt,st){this.dataService=a,this.formBuilder=o,this.notificationService=l,this.pagin=m,this.translateService=mt,this.datePipe=st,this.displayedColumns=["position","emName","emCode","regName","depName","dateTime","emIdentityNumber","tongsolanvao","tongsolanra"],this.dataSource=new s.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.totalRow=0,this.totalPage=0,this.disableButton=!0,this.emName="",this.fillterName="",this.preventAbuse=!1,this.emTypeIds=[{id:0,name:"C\u01b0 d\xe2n"},{id:1,name:"Nh\xe2n vi\xean"},{id:2,name:"Kh\xe1ch h\xe0ng"}],this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm"),this.emTypeId=4,this.showList=!1}ngOnInit(){this.getTDepartment(),this.getTEmployee()}getTDepartment(){this.dataService.get("TDepartment/getall").subscribe(a=>{this.tdepartment=a},a=>{})}getTEmployee(){this.dataService.get("TEmployee/GetAllNoParam").subscribe(a=>{this.temployee=a},a=>{})}Refresh(){this.fillterName="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm"),this.emName=null,this.depId=null,this.emTypeId=4,this.disableButton=!0,this.showList=!1}loadData(){null==this.depId&&(this.depId=""),null==this.emName&&(this.emName=""),this.dataService.get("TotalNumberInOutStatistic/GetAllByPaging?dateFrom="+this.dateFrom+"&dateTo="+this.dateTo+"&depId="+this.depId+"&emName="+this.emName+"&emCheck="+this.emTypeId+"&page="+this.page+"&pageSize="+this.pageSize).subscribe(a=>{if(this.data=a.items,0==this.data.length)return this.showList=!1,this.Refresh(),this.translateService.get("messageSystem.staticsNull").subscribe(o=>c.Q.STATISTIC_NULL=o),void this.notificationService.printErrorMessage(c.Q.STATISTIC_NULL);this.data.length>0&&(this.showList=!0,this.disableButton=!1,this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=a.totalCount)},a=>{}),this.loadDataExport()}loadDataExport(){this.dataService.get("TotalNumberInOutStatistic/GetAllToExport?dateFrom="+this.dateFrom+"&dateTo="+this.dateTo+"&depId="+this.depId+"&emName="+this.emName+"&emCheck="+this.emTypeId).subscribe(a=>{this.dataExports=a},a=>{})}exportExcel(){this.loadDataExport(),this.dataService.post("TotalNumberInOutStatistic/ExportXls",{dateFrom:this.dateFrom,dateTo:this.dateTo,data:this.dataExports}).subscribe(o=>{window.location.href=o.result},o=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(l=>c.Q.EXPORT_FAILSE_MSG=l),this.notificationService.printErrorMessage(c.Q.EXPORT_FAILSE_MSG)})}onChangePage(a){this.page=a.pageIndex,this.pageSize=a.pageSize,this.loadData()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(T.D),t.Y36(u.qu),t.Y36(h.g),t.Y36(f.d),t.Y36(N.sK),t.Y36(r.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-total-number-in-out-statistic"]],viewQuery:function(a,o){if(1&a&&(t.Gf(g.NW,5),t.Gf(x.YE,5)),2&a){let l;t.iGM(l=t.CRH())&&(o.paginator=l.first),t.iGM(l=t.CRH())&&(o.sort=l.first)}},decls:52,vars:37,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex","",2,"margin","5px"],["appearance","outline"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matInput","","type","datetime-local","required","",3,"ngModel","ngModelChange"],["fxLayout","","fxLayoutAlign","end center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emName"],["matColumnDef","emCode"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","depName"],["matColumnDef","regName"],["matColumnDef","dateTime"],["matColumnDef","emIdentityNumber"],["matColumnDef","tongsolanvao"],["matColumnDef","tongsolanra"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of totalNumberInOutStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t.TgZ(11,"div",4),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"mat-select",6),t.NdJ("ngModelChange",function(m){return o.depId=m}),t.YNc(17,y,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",4),t.TgZ(19,"mat-form-field",5),t.TgZ(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"input",8),t.NdJ("ngModelChange",function(m){return o.emName=m}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",4),t.TgZ(25,"mat-form-field",5),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",6),t.NdJ("ngModelChange",function(m){return o.emTypeId=m}),t.YNc(30,M,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",4),t.TgZ(32,"mat-form-field",5),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"input",9),t.NdJ("ngModelChange",function(m){return o.dateFrom=m}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",4),t.TgZ(38,"mat-form-field",5),t.TgZ(39,"mat-label"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"input",9),t.NdJ("ngModelChange",function(m){return o.dateTo=m}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",10),t.YNc(44,q,3,3,"button",11),t.ALo(45,"userRoles"),t.YNc(46,L,3,3,"button",12),t.ALo(47,"userRoles"),t.YNc(48,U,3,4,"button",13),t.ALo(49,"userRoles"),t.qZA(),t.YNc(50,tt,33,8,"div",14),t.ALo(51,"userRoles"),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.Oqu(t.lcZ(6,17,"totalNumberInOutStatisticModule.title")),t.xp6(9),t.Oqu(t.lcZ(15,19,"totalNumberInOutStatisticModule.depNameCol")),t.xp6(2),t.Q6J("ngModel",o.depId),t.xp6(1),t.Q6J("ngForOf",o.tdepartment),t.xp6(4),t.Oqu(t.lcZ(22,21,"totalNumberInOutStatisticModule.emNameCol")),t.xp6(2),t.Q6J("ngModel",o.emName),t.xp6(4),t.Oqu(t.lcZ(28,23,"totalNumberInOutStatisticModule.emTypeIdCol")),t.xp6(2),t.Q6J("ngModel",o.emTypeId),t.xp6(1),t.Q6J("ngForOf",o.emTypeIds),t.xp6(4),t.Oqu(t.lcZ(35,25,"totalNumberInOutStatisticModule.dateFromCol")),t.xp6(2),t.Q6J("ngModel",o.dateFrom),t.xp6(4),t.Oqu(t.lcZ(41,27,"totalNumberInOutStatisticModule.dateToCol")),t.xp6(2),t.Q6J("ngModel",o.dateTo),t.xp6(2),t.Q6J("ngIf",t.lcZ(45,29,"ViewTotalNumberInOutStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(47,31,"ViewTotalNumberInOutStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(49,33,"ExportTotalNumberInOutStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(51,35,o.showList&&"ViewTotalNumberInOutStatistic")))},directives:[_.Yh,Z.a8,Z.n5,I.d,d.xw,d.yH,b.KE,b.hX,C.gD,u.JJ,u.On,r.sg,O.Nt,u.Fj,u.Q7,d.Wh,r.O5,A.ey,v.lW,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,g.NW,s.ge,s.ev,s.XQ,s.Gk],pipes:[N.X$,S.v,r.uU],styles:[""]}),e})();var at=n(4382),it=n(4646),ot=n(8576);const nt=[{path:"",component:et}];let lt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[T.D,h.g,f.d,r.uU],imports:[[r.ez,ot.q,S.a,at.Bz.forChild(nt),_.Q8.withConfig({spinnerPosition:"right",color:"#red"}),it.bj]]}),e})()}}]);