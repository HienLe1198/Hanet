"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[4092],{4092:(De,v,n)=>{n.r(v),n.d(v,{PVehicleinfoModule:()=>Ye});var _=n(6019),q=n(5351),m=n(9133),Z=n(8977),S=n(2262),h=n(4176),P=n(1125),x=n(8053),p=n(9839),e=n(3668),C=n(2300),d=n(5304),A=n(9594),T=n(6765),b=n(563),V=n(6154),y=n(888),M=n(5694),f=n(5243),u=n(8167),F=n(5498),L=n(138),U=n(86),E=n(904),O=n(7444),Q=n(9112),k=n(6400),I=n(9851),Y=n(6731),N=n(9711);const D=["dialog"];function J(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialog("create")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.createButton")," "))}function w(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeData()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",0==t.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"button.deleteButton")," ")}}function R(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"th",39),e.TgZ(1,"mat-checkbox",40),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return a?r.masterToggle():null}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function B(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"td",41),e.TgZ(1,"mat-checkbox",42),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const s=e.CHM(t).$implicit,c=e.oxw(2);return a?c.selection.toggle(s):null}),e.qZA(),e.qZA()}if(2&i){const t=l.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("checked",o.selection.isSelected(t))("aria-label",o.checkboxLabel(t))}}function j(i,l){1&i&&(e.TgZ(0,"th",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.positionCol")))}function G(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.index,o=e.oxw(2);e.xp6(1),e.Oqu(t+1+o.page*o.pageSize)}}function H(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.cvtNameCol")))}function $(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.cvtName)}}function z(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.emNameCol")))}function W(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.emName)}}function X(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.plateNumberCol")))}function K(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.plateNumber)}}function ee(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.vehicleTypeCol")))}function te(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.vehicleType)}}function ie(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.vehicleModelCol")))}function oe(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.vehicleModel)}}function le(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.vehicleColorCol")))}function ae(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.vehicleColor)}}function ne(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.cardNoCol")))}function ce(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.caNo)}}function re(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.typeNameCol")))}function se(i,l){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Oqu(t.typename)}}function me(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.vehicleImage")))}function he(i,l){1&i&&e._UZ(0,"img",47)}function pe(i,l){if(1&i&&e._UZ(0,"img",48),2&i){const t=e.oxw().$implicit;e.s9C("src","data:image/jpg;base64,"+t.vehicleImage,e.LSH)}}function de(i,l){if(1&i&&(e.TgZ(0,"td",41),e.YNc(1,he,1,0,"img",45),e.YNc(2,pe,1,1,"img",46),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",""===t.vehicleImage||null===t.vehicleImage),e.xp6(1),e.Q6J("ngIf",""!==t.vehicleImage&&null!==t.vehicleImage)}}function ue(i,l){1&i&&(e.TgZ(0,"th",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"pVehicleModule.statusCol")))}function ge(i,l){if(1&i&&(e.TgZ(0,"td",41),e.TgZ(1,"mat-checkbox",49),e.NdJ("click",function(o){return o.preventDefault()}),e.qZA(),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("disableRipple",!0)("checked",t.status)}}function _e(i,l){1&i&&(e.TgZ(0,"th",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.actionCol")))}function fe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).openDialog("edit",a)}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"button.editButton"))}function ve(i,l){1&i&&(e.TgZ(0,"td",41),e.YNc(1,fe,4,3,"a",51),e.ALo(2,"userRoles"),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"UpdatePVehicleInfo")))}function Ze(i,l){1&i&&e._UZ(0,"tr",53)}function xe(i,l){1&i&&e._UZ(0,"tr",54)}function Ce(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"table",17),e.ynx(3,18),e.YNc(4,R,2,3,"th",19),e.YNc(5,B,2,2,"td",20),e.BQk(),e.ynx(6,21),e.YNc(7,j,3,3,"th",22),e.YNc(8,G,2,1,"td",20),e.BQk(),e.ynx(9,23),e.YNc(10,H,3,3,"th",24),e.YNc(11,$,2,1,"td",20),e.BQk(),e.ynx(12,25),e.YNc(13,z,3,3,"th",24),e.YNc(14,W,2,1,"td",20),e.BQk(),e.ynx(15,26),e.YNc(16,X,3,3,"th",24),e.YNc(17,K,2,1,"td",20),e.BQk(),e.ynx(18,27),e.YNc(19,ee,3,3,"th",24),e.YNc(20,te,2,1,"td",20),e.BQk(),e.ynx(21,28),e.YNc(22,ie,3,3,"th",24),e.YNc(23,oe,2,1,"td",20),e.BQk(),e.ynx(24,29),e.YNc(25,le,3,3,"th",24),e.YNc(26,ae,2,1,"td",20),e.BQk(),e.ynx(27,30),e.YNc(28,ne,3,3,"th",24),e.YNc(29,ce,2,1,"td",20),e.BQk(),e.ynx(30,31),e.YNc(31,re,3,3,"th",24),e.YNc(32,se,2,1,"td",20),e.BQk(),e.ynx(33,32),e.YNc(34,me,3,3,"th",24),e.YNc(35,de,3,2,"td",20),e.BQk(),e.ynx(36,33),e.YNc(37,ue,3,3,"th",24),e.YNc(38,ge,2,2,"td",20),e.BQk(),e.ynx(39,34),e.YNc(40,_e,3,3,"th",35),e.YNc(41,ve,3,3,"td",20),e.BQk(),e.YNc(42,Ze,1,0,"tr",36),e.YNc(43,xe,1,0,"tr",37),e.qZA(),e.qZA(),e.TgZ(44,"mat-paginator",38),e.NdJ("page",function(a){return e.CHM(t),e.oxw().onChangePage(a)}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(40),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageIndex",t.page)("length",t.totalRow)("disabled",!1)}}function Ae(i,l){if(1&i&&(e.TgZ(0,"mat-option",89),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.cvtId),e.xp6(1),e.hij(" ",t.cvtName," ")}}function Te(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"pVehicleModule.cvtNameRequired")," "))}function be(i,l){if(1&i&&(e.TgZ(0,"mat-option",89),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.typeid),e.xp6(1),e.hij(" ",t.typename," ")}}function Ve(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"pVehicleModule.typeNameRequired")," "))}function ye(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).emPloyeeControl.reset()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e.qZA()}}function Ie(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-option",91),e.NdJ("onSelectionChange",function(a){const s=e.CHM(t).$implicit;return e.oxw(2).onchangeEmployee(a,s)}),e._uU(1),e.qZA()}if(2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.emName," ")}}function Ne(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"pVehicleModule.emNameRequired")," "))}function qe(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"pVehicleModule.emNameDifferent")," "))}function Se(i,l){if(1&i&&(e.TgZ(0,"mat-option",89),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.caId),e.xp6(1),e.hij(" ",t.caNo," ")}}function Pe(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"pVehicleModule.cardNoRequired")," "))}function Me(i,l){1&i&&(e.TgZ(0,"div"),e._UZ(1,"img",92),e.qZA())}function Fe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",93),e.TgZ(1,"div",94),e._UZ(2,"img",95),e.TgZ(3,"a",96),e.NdJ("click",function(){e.CHM(t),e.oxw();const a=e.MAs(88),r=e.oxw();return a.value="",r.clearImage()}),e.TgZ(4,"mat-icon"),e._uU(5,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.s9C("src","data:image/jpg;base64,"+t.getValidForm.vehicleImage.value,e.LSH)}}function Le(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"form",55),e.NdJ("submit",function(){return e.CHM(t),e.oxw().addData()}),e.TgZ(1,"h2",56),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",57),e.TgZ(5,"div",58),e.TgZ(6,"mat-form-field",59),e.TgZ(7,"mat-label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"mat-select",60),e.YNc(11,Ae,2,2,"mat-option",61),e.qZA(),e.YNc(12,Te,3,3,"mat-error",62),e.qZA(),e.TgZ(13,"mat-form-field",63),e.TgZ(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-select",64),e.YNc(18,be,2,2,"mat-option",61),e.qZA(),e.YNc(19,Ve,3,3,"mat-error",62),e.qZA(),e.qZA(),e.TgZ(20,"div",58),e.TgZ(21,"mat-form-field",59),e.TgZ(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",65),e.ALo(26,"translate"),e.YNc(27,ye,3,0,"button",66),e.TgZ(28,"mat-autocomplete",67,68),e.YNc(30,Ie,2,2,"mat-option",69),e.ALo(31,"async"),e.qZA(),e.YNc(32,Ne,3,3,"mat-error",62),e.YNc(33,qe,3,3,"mat-error",62),e.qZA(),e.TgZ(34,"mat-form-field",70),e.TgZ(35,"mat-label"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"mat-select",71),e.YNc(39,Se,2,2,"mat-option",61),e.qZA(),e.YNc(40,Pe,3,3,"mat-error",62),e.qZA(),e.qZA(),e.TgZ(41,"div",58),e.TgZ(42,"mat-form-field",59),e.TgZ(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._UZ(46,"input",72,73),e.ALo(48,"translate"),e.TgZ(49,"mat-hint",74),e._uU(50),e.qZA(),e.qZA(),e.TgZ(51,"mat-form-field",63),e.TgZ(52,"mat-label"),e._uU(53),e.ALo(54,"translate"),e.qZA(),e._UZ(55,"input",75,76),e.ALo(57,"translate"),e.TgZ(58,"mat-hint",74),e._uU(59),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",58),e.TgZ(61,"mat-form-field",59),e.TgZ(62,"mat-label"),e._uU(63),e.ALo(64,"translate"),e.qZA(),e._UZ(65,"input",77,78),e.ALo(67,"translate"),e.TgZ(68,"mat-hint",74),e._uU(69),e.qZA(),e.qZA(),e.TgZ(70,"mat-form-field",63),e.TgZ(71,"mat-label"),e._uU(72),e.ALo(73,"translate"),e.qZA(),e._UZ(74,"input",79,80),e.ALo(76,"translate"),e.TgZ(77,"mat-hint",74),e._uU(78),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"div",81),e.TgZ(80,"fieldset"),e.TgZ(81,"legend"),e._uU(82),e.ALo(83,"translate"),e.qZA(),e.TgZ(84,"button",82),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"input",83,84),e.NdJ("change",function(a){return e.CHM(t),e.oxw().imagePreview(a)}),e.qZA(),e.YNc(89,Me,2,0,"div",62),e.YNc(90,Fe,6,1,"div",85),e.qZA(),e.qZA(),e.qZA(),e.TgZ(91,"mat-checkbox",86),e._uU(92),e.ALo(93,"translate"),e.qZA(),e.TgZ(94,"mat-dialog-actions",81),e.TgZ(95,"button",87),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"button",88),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(29),o=e.MAs(47),a=e.MAs(56),r=e.MAs(66),s=e.MAs(75),c=e.oxw();e.Q6J("formGroup",c.vehicleForm),e.xp6(2),e.Oqu(e.lcZ(3,40,c.title)),e.xp6(6),e.Oqu(e.lcZ(9,42,"pVehicleModule.cvtNameCol")),e.xp6(3),e.Q6J("ngForOf",c.cardVehicleType),e.xp6(1),e.Q6J("ngIf",c.getValidForm.cvtId.hasError("required")),e.xp6(3),e.Oqu(e.lcZ(16,44,"pVehicleModule.typeNameCol")),e.xp6(3),e.Q6J("ngForOf",c.ticketType),e.xp6(1),e.Q6J("ngIf",c.getValidForm.typeid.hasError("required")),e.xp6(4),e.Oqu(e.lcZ(24,46,"pVehicleModule.emNameCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(26,48,"pVehicleModule.emNameCol")),e.Q6J("formControl",c.emPloyeeControl)("matAutocomplete",t),e.xp6(2),e.Q6J("ngIf",c.emPloyeeControl.value),e.xp6(1),e.Q6J("displayWith",c.displayEmployee),e.xp6(2),e.Q6J("ngForOf",e.lcZ(31,50,c.employeeOptions)),e.xp6(2),e.Q6J("ngIf",c.emPloyeeControl.hasError("required")),e.xp6(1),e.Q6J("ngIf",!c.emPloyeeControl.hasError("required")&&c.emPloyeeControl.hasError("invalidAutocompleteObject")),e.xp6(3),e.Oqu(e.lcZ(37,52,"pVehicleModule.cardNoCol")),e.xp6(3),e.Q6J("ngForOf",c.cardNo),e.xp6(1),e.Q6J("ngIf",c.getValidForm.caId.hasError("required")),e.xp6(4),e.Oqu(e.lcZ(45,54,"pVehicleModule.plateNumberCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(48,56,"pVehicleModule.plateNumberCol")),e.xp6(4),e.hij("",o.value.length," / 100"),e.xp6(3),e.Oqu(e.lcZ(54,58,"pVehicleModule.vehicleTypeCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(57,60,"pVehicleModule.vehicleTypeCol")),e.xp6(4),e.hij("",a.value.length," / 100"),e.xp6(4),e.Oqu(e.lcZ(64,62,"pVehicleModule.vehicleModelCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(67,64,"pVehicleModule.vehicleModelCol")),e.xp6(4),e.hij("",r.value.length," / 100"),e.xp6(3),e.Oqu(e.lcZ(73,66,"pVehicleModule.vehicleColorCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(76,68,"pVehicleModule.vehicleColorCol")),e.xp6(4),e.hij("",s.value.length," / 100"),e.xp6(4),e.Oqu(e.lcZ(83,70,"pVehicleModule.vehicleImage")),e.xp6(3),e.Oqu(e.lcZ(86,72,"button.uploadButton")),e.xp6(4),e.Q6J("ngIf",""===c.getValidForm.vehicleImage.value||null===c.getValidForm.vehicleImage.value),e.xp6(1),e.Q6J("ngIf",""!==c.getValidForm.vehicleImage.value&&null!==c.getValidForm.vehicleImage.value),e.xp6(2),e.hij(" ",e.lcZ(93,74,"pVehicleModule.statusCol"),""),e.xp6(4),e.Oqu(e.lcZ(97,76,"button.cancelButton")),e.xp6(2),e.Q6J("disabled",c.preventAbuse),e.xp6(1),e.Oqu(e.lcZ(100,78,"button.saveButton"))}}let Ue=(()=>{class i{constructor(t,o,a,r,s,c){this.dataService=t,this.dialog=o,this.notificationService=a,this.pagin=r,this.translateService=s,this.formBuilder=c,this.displayedColumns=["select","position","emName","cvtName","plateNumber","vehicleType","vehicleModel","vehicleColor","cardNo","typeName","vehicleImage","status","action"],this.dataSource=new h.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.emid=0,this.selection=new q.Ov(!0,[]),this.action="",this.title="",this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.emPloyeeControl=new m.NI("",{validators:[this.autocompleteObjectValidator(),m.kI.required]}),this.vehicleForm=this.formBuilder.group({viId:"",cvtId:["",m.kI.compose([m.kI.required])],caId:["",m.kI.compose([m.kI.required])],typeid:["",m.kI.compose([m.kI.required])],emId:[""],plateNumber:"",vehicleType:"",vehicleModel:"",vehicleColor:"",vehicleImage:"",status:""})}ngOnInit(){this.getAllVehicle(),this.getAllCardVehicleType(),this.getAllTicketType(),this.getAllEmployee()}openDialog(t,o,a){if(this.action=t,"create"==t)this.translateService.get("pVehicleModule.createMessage").subscribe(s=>this.title=s),this.vehicleForm.controls.status.setValue(!0);else{this.translateService.get("pVehicleModule.editMessage").subscribe(g=>this.title=g),this.vehicleForm.controls.viId.setValue(o.viId);let s=this.dataSource.filteredData.filter(g=>g.viId==o.viId)[0];this.vehicleForm.controls.cvtId.setValue(s.cvtId),this.vehicleForm.controls.typeid.setValue(s.typeid),this.vehicleForm.controls.emId.setValue(s.emId),this.vehicleForm.controls.plateNumber.setValue(s.plateNumber),this.vehicleForm.controls.vehicleType.setValue(s.vehicleType),this.vehicleForm.controls.vehicleModel.setValue(s.vehicleModel),this.vehicleForm.controls.vehicleColor.setValue(s.vehicleColor),this.vehicleForm.controls.vehicleImage.setValue(s.vehicleImage),this.vehicleForm.controls.caId.setValue(s.caId),this.vehicleForm.controls.status.setValue(s.status),this.getAllCardNoByEmId(o.emId);let c=this.emPloyee.filter(g=>g.emId==o.emId)[0];this.emPloyeeControl.setValue(c)}const r=this.dialog.open(this.dialogTemplate,{width:"650px"});r.disableClose=!0,r.afterClosed().subscribe(s=>{this.onReset()})}_filterEmployee(t){const o=null==t?void 0:t.toLowerCase();return this.emPloyee.filter(a=>null==a?void 0:a.emName.toLowerCase().includes(o))}onchangeEmployee(t,o){t.source.selected&&(this.vehicleForm.controls.emId.setValue(o.emId),this.getAllCardNoByEmId(o.emId))}_filterCardNo(t){const o=null==t?void 0:t.toLowerCase();return this.cardNo.filter(a=>null==a?void 0:a.caNo.toLowerCase().includes(o))}displayCardNo(t){return t&&t.caNo?t.caNo:""}displayEmployee(t){return t&&t.emName?t.emName:""}onchangeCardNo(t,o){t.source.selected&&this.vehicleForm.controls.caId.setValue(o.caId)}autocompleteObjectValidator(){return t=>"string"==typeof t.value?{invalidAutocompleteObject:{value:t.value}}:null}getAllEmployee(){this.preventAbuse=!0,this.dataService.get("TEmployee/getAllNoParam").subscribe(t=>{this.emPloyee=t,this.preventAbuse=!1,this.employeeOptions=this.emPloyeeControl.valueChanges.pipe((0,P.O)(""),(0,x.U)(o=>null==o||"string"==typeof o?o:o.emName),(0,x.U)(o=>o?this._filterEmployee(o):this.emPloyee.slice()))},t=>{this.translateService.get("messageSystem.loadFail").subscribe(o=>p.Q.GET_FAILSE_MSG=o),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG),this.preventAbuse=!1})}getAllVehicle(){this.preventAbuse=!0,this.dataService.get("PVehicleInfo/getlistpaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(t=>{this.dataSource=new h.by(t.items),this.dataSource.sort=this.sort,this.totalRow=t.totalCount},t=>{this.translateService.get("messageSystem.loadFail").subscribe(o=>p.Q.GET_FAILSE_MSG=o),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG)}),this.preventAbuse=!1}getAllCardVehicleType(){this.dataService.get("PCardVehicleType/getall").subscribe(t=>{this.cardVehicleType=t},t=>{})}getAllTicketType(){this.dataService.get("PTicketType/getall").subscribe(t=>{this.ticketType=t},t=>{})}getAllCardNoByEmId(t){this.preventAbuse=!0,this.dataService.get("TCardNo/GetCardParkingValidByEmId?emId="+t).subscribe(o=>{this.cardNo=o,this.preventAbuse=!1},o=>{this.translateService.get("messageSystem.loadFail").subscribe(a=>p.Q.GET_FAILSE_MSG=a),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG),this.preventAbuse=!1})}onReset(){this.dialog.closeAll(),this.vehicleForm.reset(),this.emPloyeeControl.reset()}applyFilter(t){this.keyword=t.target.value,this.page=0,this.getAllVehicle(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}get getValidForm(){return this.vehicleForm.controls}addData(){this.emPloyeeControl.invalid||this.vehicleForm.invalid||(this.preventAbuse=!0,"create"==this.action?this.dataService.post("PVehicleInfo/create",{cvtId:this.vehicleForm.controls.cvtId.value,typeid:this.vehicleForm.controls.typeid.value,emId:this.vehicleForm.controls.emId.value,plateNumber:this.vehicleForm.controls.plateNumber.value,vehicleType:this.vehicleForm.controls.vehicleType.value,vehicleModel:this.vehicleForm.controls.vehicleModel.value,vehicleColor:this.vehicleForm.controls.vehicleColor.value,vehicleImage:this.vehicleForm.controls.vehicleImage.value,caId:this.vehicleForm.controls.caId.value,status:this.vehicleForm.controls.status.value}).subscribe(o=>{let a;this.translateService.get("messageSystem.createSuccess").subscribe(r=>a=r),this.notificationService.printSuccessMessage(a),this.getAllVehicle(),this.dialog.closeAll(),this.onReset()},o=>{let a;this.translateService.get("pVehicleModule.cardNoDiferent").subscribe(r=>a=r),this.notificationService.printErrorMessage(a)}):"edit"==this.action&&this.dataService.put("PVehicleInfo/update",{viId:this.vehicleForm.controls.viId.value,typeid:this.vehicleForm.controls.typeid.value,cvtId:this.vehicleForm.controls.cvtId.value,emId:this.vehicleForm.controls.emId.value,plateNumber:this.vehicleForm.controls.plateNumber.value,vehicleType:this.vehicleForm.controls.vehicleType.value,vehicleModel:this.vehicleForm.controls.vehicleModel.value,vehicleColor:this.vehicleForm.controls.vehicleColor.value,vehicleImage:this.vehicleForm.controls.vehicleImage.value,caId:this.vehicleForm.controls.caId.value,status:this.vehicleForm.controls.status.value}).subscribe(o=>{let a;this.translateService.get("messageSystem.updateSuccess").subscribe(r=>a=r),this.notificationService.printSuccessMessage(a),this.getAllVehicle(),this.dialog.closeAll(),this.onReset()},o=>{let a;this.translateService.get("pVehicleModule.cardNoDiferent").subscribe(r=>a=r),this.notificationService.printErrorMessage(a)}),this.onReset(),this.preventAbuse=!1)}removeData(){let t=[];this.selection.selected.forEach(o=>{t.push(o.viId)}),this.translateService.get("messageSystem.confirmDelete").subscribe(o=>p.Q.CONFIRM_DELETE_MSG=o),this.notificationService.printConfirmationDialog(p.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(t)))}deleteItemConfirm(t){this.preventAbuse=!0,this.dataService.delete("PVehicleInfo/deletemulti","checkedList",t).subscribe(o=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(a=>p.Q.DELETED_OK_MSG=a),this.notificationService.printSuccessMessage(p.Q.DELETED_OK_MSG),this.selection.clear(),this.getAllVehicle(),this.getAllTicketType(),this.getAllCardVehicleType()},o=>{this.translateService.get("messageSystem.deletefail").subscribe(a=>p.Q.DELETE_FAILSE_MSG=a),this.notificationService.printErrorMessage(p.Q.DELETE_FAILSE_MSG)}),this.preventAbuse=!1}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onChangePage(t){this.page=t.pageIndex,this.pageSize=t.pageSize,this.getAllVehicle()}clearImage(){this.vehicleForm.controls.vehicleImage.setValue("")}imagePreview(t){const o=t.target.files[0],a=new FileReader;a.onload=()=>{let s=a.result.split("base64,")[1];this.vehicleForm.controls.vehicleImage.setValue(s)},a.readAsDataURL(o)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.D),e.Y36(d.uw),e.Y36(A.g),e.Y36(T.d),e.Y36(b.sK),e.Y36(m.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-p-vehicleinfo"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Z.NW,5),e.Gf(S.YE,5),e.Gf(D,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first),e.iGM(a=e.CRH())&&(o.dialogTemplate=a.first)}},decls:29,vars:18,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","satrt center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","cvtName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","emName"],["matColumnDef","plateNumber"],["matColumnDef","vehicleType"],["matColumnDef","vehicleModel"],["matColumnDef","vehicleColor"],["matColumnDef","cardNo"],["matColumnDef","typeName"],["matColumnDef","vehicleImage"],["matColumnDef","status"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],["src","../../../assets/images/default-image.png","alt","","style","border-radius: 10px; object-fit: cover; border: 1px solid #efb1b1!important; margin-top: 5px;","height","50","width","70",4,"ngIf"],["alt","","style"," border-radius: 10px; object-fit: cover; border: 1px solid #efb1b1!important; margin-top: 5px;","height","50","width","70",3,"src",4,"ngIf"],["src","../../../assets/images/default-image.png","alt","","height","50","width","70",2,"border-radius","10px","object-fit","cover","border","1px solid #efb1b1!important","margin-top","5px"],["alt","","height","50","width","70",2,"border-radius","10px","object-fit","cover","border","1px solid #efb1b1!important","margin-top","5px",3,"src"],[2,"margin-left","30px",3,"disableRipple","checked","click"],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],[3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column","fxLayoutGap","center center"],["appearance","outline",2,"margin","5px"],["formControlName","cvtId","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","outline"],["formControlName","typeid","required",""],["type","text","aria-label","","matInput","",3,"placeholder","formControl","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"displayWith"],["autoEmployee","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["appearance","outline",2,"margin-right","5px"],["formControlName","caId","required",""],["matInput","","formControlName","plateNumber","maxlength","100",3,"placeholder"],["plateNumber",""],["align","end"],["matInput","","formControlName","vehicleType","maxlength","100",3,"placeholder"],["vehicleType",""],["matInput","","formControlName","vehicleModel","maxlength","100",3,"placeholder"],["vehicleModel",""],["matInput","","formControlName","vehicleColor","maxlength","100",3,"placeholder"],["vehicleColor",""],["align","center"],["type","button","mat-stroked-button","","onclick","document.getElementById('getFile').click()"],["type","file","id","getFile",2,"display","none",3,"change"],["fileInput",""],["class","image-div",4,"ngIf"],["formControlName","status",2,"margin-left","10px","margin-bottom","6px"],["mat-stroked-button","","color","warn","mat-dialog-close","",3,"click"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"],[3,"value"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value","onSelectionChange"],["src","../../../assets/images/default-image.png",1,"image-preview"],[1,"image-div"],[1,"image-preview"],[1,"image-preview",3,"src"],["href","javascript:void(0)",1,"remove-image",3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"ng-progress",0,1),e.TgZ(2,"mat-card"),e.TgZ(3,"div"),e.TgZ(4,"mat-card-title",2),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-divider"),e._UZ(8,"br"),e._UZ(9,"br"),e.TgZ(10,"div",3),e.TgZ(11,"div",4),e.YNc(12,J,3,3,"button",5),e.ALo(13,"userRoles"),e.YNc(14,w,3,4,"button",6),e.ALo(15,"userRoles"),e.qZA(),e._UZ(16,"div",7),e.TgZ(17,"div",7),e.TgZ(18,"mat-form-field",8),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",9,10),e.NdJ("keyup",function(r){return o.applyFilter(r)}),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(25,Ce,45,8,"div",11),e.ALo(26,"userRoles"),e.qZA(),e.YNc(27,Le,101,80,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,6,"pVehicleModule.title")),e.xp6(7),e.Q6J("ngIf",e.lcZ(13,8,"CreatePVehicleInfo")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,10,"DeletePVehicleInfo")),e.xp6(6),e.hij(" ",e.lcZ(21,12,"button.searchButton"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(24,14,"button.searchPlaceholder")),e.xp6(3),e.Q6J("ngIf",e.lcZ(26,16,"ViewPVehicleInfo")))},directives:[V.Yh,y.a8,y.n5,M.d,f.xw,f.yH,f.Wh,_.O5,u.KE,F.oO,u.hX,L.Nt,U.lW,h.BZ,h.w1,h.fO,h.Dz,h.as,h.nj,Z.NW,h.ge,E.oG,h.ev,O.gM,Q.Hw,h.XQ,h.Gk,m._Y,m.JL,m.sg,d.uh,d.xY,f.SQ,k.gD,m.JJ,m.u,m.Q7,_.sg,m.Fj,I.ZL,m.oH,I.XC,m.nD,u.bx,d.H8,d.ZT,Y.ey,u.TO,u.R9],pipes:[b.X$,N.v,_.Ov],styles:[""]}),i})();var Ee=n(4382),Oe=n(8576),Qe=n(4646);const ke=[{path:"",component:Ue}];let Ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[C.D,A.g,T.d],imports:[[_.ez,Oe.q,N.a,Ee.Bz.forChild(ke),V.Q8.withConfig({spinnerPosition:"right",color:"#red"}),Qe.bj]]}),i})()}}]);