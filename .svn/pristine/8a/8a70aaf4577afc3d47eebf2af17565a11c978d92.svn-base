"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[241],{241:(me,_,o)=>{o.r(_),o.d(_,{TRegencyModule:()=>ge});var T=o(6019),L=o(5351),c=o(9133),y=o(8977),D=o(2262),l=o(4176),N=o(1125),x=o(8053),d=o(9839),e=o(3668),v=o(2300),p=o(5304),Z=o(9594),C=o(6765),R=o(563),S=o(6154),b=o(888),M=o(5694),f=o(5243),h=o(8167),F=o(5498),I=o(138),E=o(86),k=o(904),q=o(7444),O=o(9112),A=o(9711);const Q=["dialog"];function U(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialog("create")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.createButton")," "))}function w(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeData()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",0==t.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"button.deleteButton")," ")}}function J(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"th",32),e.TgZ(1,"mat-checkbox",33),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return a?r.masterToggle():null}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function P(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",34),e.TgZ(1,"mat-checkbox",35),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const m=e.CHM(t).$implicit,u=e.oxw(2);return a?u.selection.toggle(m):null}),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("checked",i.selection.isSelected(t))("aria-label",i.checkboxLabel(t))}}function Y(n,s){1&n&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.positionCol")))}function B(n,s){if(1&n&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&n){const t=s.index,i=e.oxw(2);e.xp6(1),e.Oqu(t+1+i.page*i.pageSize)}}function H(n,s){1&n&&(e.TgZ(0,"th",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"tRegencyModule.regencyNameCol")))}function G(n,s){if(1&n&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Oqu(t.regName)}}function z(n,s){1&n&&(e.TgZ(0,"th",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"tRegencyModule.regDescriptionCol")))}function V(n,s){if(1&n&&(e.TgZ(0,"td",34),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Oqu(t.regDescription)}}function j(n,s){1&n&&(e.TgZ(0,"th",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"tRegencyModule.regStatusCol")))}function $(n,s){if(1&n&&(e.TgZ(0,"td",34),e.TgZ(1,"mat-checkbox",38),e.NdJ("click",function(i){return i.preventDefault()}),e.qZA(),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("disableRipple",!0)("checked",t.regStatus)}}function W(n,s){1&n&&(e.TgZ(0,"th",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.actionCol")))}function K(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).openDialog("edit",a)}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"button.editButton"))}function X(n,s){1&n&&(e.TgZ(0,"td",34),e.YNc(1,K,4,3,"a",40),e.ALo(2,"userRoles"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"UpdateTRegency")))}function ee(n,s){1&n&&e._UZ(0,"tr",42)}function te(n,s){1&n&&e._UZ(0,"tr",43)}function ne(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"table",17),e.ynx(3,18),e.YNc(4,J,2,3,"th",19),e.YNc(5,P,2,2,"td",20),e.BQk(),e.ynx(6,21),e.YNc(7,Y,3,3,"th",22),e.YNc(8,B,2,1,"td",20),e.BQk(),e.ynx(9,23),e.YNc(10,H,3,3,"th",24),e.YNc(11,G,2,1,"td",20),e.BQk(),e.ynx(12,25),e.YNc(13,z,3,3,"th",24),e.YNc(14,V,2,1,"td",20),e.BQk(),e.ynx(15,26),e.YNc(16,j,3,3,"th",24),e.YNc(17,$,2,2,"td",20),e.BQk(),e.ynx(18,27),e.YNc(19,W,3,3,"th",28),e.YNc(20,X,3,3,"td",20),e.BQk(),e.YNc(21,ee,1,0,"tr",29),e.YNc(22,te,1,0,"tr",30),e.qZA(),e.qZA(),e.TgZ(23,"mat-paginator",31),e.NdJ("page",function(a){return e.CHM(t),e.oxw().onChangePage(a)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageIndex",t.page)("length",t.totalRow)("disabled",!1)}}function ie(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"tRegencyModule.regnameRequired")," "))}function ae(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"form",44),e.NdJ("submit",function(){return e.CHM(t),e.oxw().addData()}),e.TgZ(1,"h2",45),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",46),e.TgZ(5,"mat-form-field",47),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",48,49),e.ALo(11,"translate"),e.TgZ(12,"mat-hint",50),e._uU(13),e.qZA(),e.YNc(14,ie,3,3,"mat-error",51),e.qZA(),e.TgZ(15,"mat-form-field",47),e.TgZ(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",52,49),e.ALo(21,"translate"),e.TgZ(22,"mat-hint",50),e._uU(23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"mat-checkbox",53),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"mat-dialog-actions",54),e.TgZ(28,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",56),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.MAs(10),i=e.oxw();e.Q6J("formGroup",i.regencyForm),e.xp6(2),e.Oqu(e.lcZ(3,13,i.title)),e.xp6(5),e.Oqu(e.lcZ(8,15,"tRegencyModule.regencyNameCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(11,17,"tRegencyModule.regencyNameCol")),e.xp6(4),e.hij("",t.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",i.getValidForm.regName.hasError("required")),e.xp6(3),e.Oqu(e.lcZ(18,19,"tRegencyModule.regDescriptionCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(21,21,"tRegencyModule.regDescriptionCol")),e.xp6(4),e.hij("",t.value.length," / 200"),e.xp6(2),e.Oqu(e.lcZ(26,23,"tRegencyModule.regStatusCol")),e.xp6(4),e.Oqu(e.lcZ(30,25,"button.cancelButton")),e.xp6(2),e.Q6J("disabled",i.preventAbuse),e.xp6(1),e.Oqu(e.lcZ(33,27,"button.saveButton"))}}let oe=(()=>{class n{constructor(t,i,a,r,m,u){this.dataService=t,this.dialog=i,this.notificationService=a,this.pagin=r,this.translateService=m,this.formBuilder=u,this.displayedColumns=["select","position","regencyName","regDescription","regStatus","action"],this.dataSource=new l.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.selection=new L.Ov(!0,[]),this.action="",this.title="",this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.RegencyParentControl=new c.NI,this.regencyForm=this.formBuilder.group({regId:"",regName:["",c.kI.compose([c.kI.required,c.kI.maxLength(100)])],regDescription:[""],regStatus:""}),this.filteredOptions=this.RegencyParentControl.valueChanges.pipe((0,N.O)(""),(0,x.U)(g=>g),(0,x.U)(g=>g?this._filter(g):this.regParents.slice()))}ngOnInit(){this.getTRegencieListPaging(),this.getRegencies()}_filter(t){const i=null==t?void 0:t.toLowerCase();return this.regParents.filter(a=>null==a?void 0:a.regDescription.toLowerCase().includes(i))}openDialog(t,i,a){if(this.action=t,"create"==t)this.translateService.get("tRegencyModule.createMessage").subscribe(m=>this.title=m),this.regencyForm.controls.regStatus.setValue(!0);else{this.translateService.get("tRegencyModule.editMessage").subscribe(g=>this.title=g),this.regencyForm.controls.regId.setValue(i.regId);let m=this.dataSource.filteredData.filter(g=>g.regId==i.regId)[0];this.regencyForm.controls.regName.setValue(m.regName),this.regencyForm.controls.regDescription.setValue(m.regDescription),this.regencyForm.controls.regStatus.setValue(m.regStatus);let u=this.regParents.filter(g=>g.regId==i.regParentId)[0];this.parentName=null==u?void 0:u.depDescription,this.RegencyParentControl.setValue(this.parentName)}const r=this.dialog.open(this.dialogTemplate,{width:"650px"});r.disableClose=!0,r.afterClosed().subscribe(m=>{this.onReset()})}onReset(){this.dialog.closeAll(),this.regencyForm.reset()}getRegencies(){this.dataService.get("TRegency/getall").subscribe(t=>{this.regParents=t},t=>{})}getTRegencieListPaging(){this.preventAbuse=!0,this.dataService.get("TRegency/getlistpaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(t=>{this.dataSource=new l.by(t.items),this.dataSource.sort=this.sort,this.totalRow=t.totalCount},t=>{this.translateService.get("messageSystem.loadFail").subscribe(i=>d.Q.GET_FAILSE_MSG=i),this.notificationService.printErrorMessage(d.Q.GET_FAILSE_MSG)}),this.preventAbuse=!1}applyFilter(t){this.keyword=t.target.value,this.page=0,this.getTRegencieListPaging(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}get getValidForm(){return this.regencyForm.controls}getParentId(t){this.regencyForm.controls.regParentId.setValue(t.regId)}addData(){this.regencyForm.invalid||(this.preventAbuse=!0,"create"==this.action?this.dataService.post("TRegency/create",{regName:this.regencyForm.controls.regName.value,regDescription:this.regencyForm.controls.regDescription.value,regStatus:this.regencyForm.controls.regStatus.value}).subscribe(i=>{let a;this.translateService.get("messageSystem.createSuccess").subscribe(r=>a=r),this.notificationService.printSuccessMessage(a),this.getTRegencieListPaging(),this.getRegencies(),this.dialog.closeAll(),this.onReset()},i=>{let a;this.translateService.get("messageSystem.createFail").subscribe(r=>a=r),this.notificationService.printErrorMessage(i)}):"edit"==this.action&&this.dataService.put("TRegency/update",{regName:this.regencyForm.controls.regName.value,regId:this.regencyForm.controls.regId.value,regDescription:this.regencyForm.controls.regDescription.value,regStatus:this.regencyForm.controls.regStatus.value}).subscribe(i=>{let a;this.translateService.get("messageSystem.updateSuccess").subscribe(r=>a=r),this.notificationService.printSuccessMessage(a),this.getTRegencieListPaging(),this.getRegencies(),this.dialog.closeAll(),this.onReset()},i=>{let a;this.translateService.get("messageSystem.updateFail").subscribe(r=>a=r),this.notificationService.printErrorMessage(i)}),this.onReset(),this.preventAbuse=!1)}removeData(){let t=[];this.selection.selected.forEach(i=>{t.push(i.regId)}),this.translateService.get("messageSystem.confirmDelete").subscribe(i=>d.Q.CONFIRM_DELETE_MSG=i),this.notificationService.printConfirmationDialog(d.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(t)))}deleteItemConfirm(t){this.preventAbuse=!0,this.dataService.delete("TRegency/deletemulti","checkedList",t).subscribe(i=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(a=>d.Q.DELETED_OK_MSG=a),i[0]>0&&this.notificationService.printSuccessMessage(d.Q.DELETED_OK_MSG+i[0]),i[1]>0&&this.notificationService.printErrorMessage(d.Q.DELETE_FAILSE_MSG+i[1]),this.selection.clear(),this.getTRegencieListPaging(),this.getRegencies()},i=>{this.translateService.get("messageSystem.deletefail").subscribe(a=>d.Q.DELETE_FAILSE_MSG=a),this.notificationService.printErrorMessage(d.Q.DELETE_FAILSE_MSG)}),this.preventAbuse=!1}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onChangePage(t){this.page=t.pageIndex,this.pageSize=t.pageSize,this.getTRegencieListPaging()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.D),e.Y36(p.uw),e.Y36(Z.g),e.Y36(C.d),e.Y36(R.sK),e.Y36(c.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-t-regency"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y.NW,5),e.Gf(D.YE,5),e.Gf(Q,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.paginator=a.first),e.iGM(a=e.CRH())&&(i.sort=a.first),e.iGM(a=e.CRH())&&(i.dialogTemplate=a.first)}},decls:29,vars:18,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","start center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","regencyName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","regDescription"],["matColumnDef","regStatus"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],[2,"margin-left","30px",3,"disableRipple","checked","click"],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["action","",3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline"],["matInput","","formControlName","regName","maxlength","100","required","",3,"placeholder"],["name",""],["align","end"],[4,"ngIf"],["matInput","","formControlName","regDescription","maxlength","100",3,"placeholder"],["formControlName","regStatus",2,"margin-bottom","6px"],["align","center"],["mat-stroked-button","","color","warn","mat-dialog-close","",3,"click"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"]],template:function(t,i){1&t&&(e._UZ(0,"ng-progress",0,1),e.TgZ(2,"mat-card"),e.TgZ(3,"div"),e.TgZ(4,"mat-card-title",2),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-divider"),e._UZ(8,"br"),e._UZ(9,"br"),e.TgZ(10,"div",3),e.TgZ(11,"div",4),e.YNc(12,U,3,3,"button",5),e.ALo(13,"userRoles"),e.YNc(14,w,3,4,"button",6),e.ALo(15,"userRoles"),e.qZA(),e._UZ(16,"div",7),e.TgZ(17,"div",7),e.TgZ(18,"mat-form-field",8),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",9,10),e.NdJ("keyup",function(r){return i.applyFilter(r)}),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(25,ne,24,8,"div",11),e.ALo(26,"userRoles"),e.qZA(),e.YNc(27,ae,34,29,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,6,"tRegencyModule.title")),e.xp6(7),e.Q6J("ngIf",e.lcZ(13,8,"CreateTRegency")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,10,"DeleteTRegency")),e.xp6(6),e.hij(" ",e.lcZ(21,12,"button.searchButton"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(24,14,"button.searchPlaceholder")),e.xp6(3),e.Q6J("ngIf",e.lcZ(26,16,"ViewTRegency")))},directives:[S.Yh,b.a8,b.n5,M.d,f.xw,f.yH,f.Wh,T.O5,h.KE,F.oO,h.hX,I.Nt,E.lW,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,y.NW,l.ge,k.oG,l.ev,q.gM,O.Hw,l.XQ,l.Gk,c._Y,c.JL,c.sg,p.uh,p.xY,c.Fj,c.JJ,c.u,c.nD,c.Q7,h.bx,p.H8,p.ZT,h.TO],pipes:[R.X$,A.v],styles:[""]}),n})();var se=o(4382),re=o(8576),ce=o(4646);const le=[{path:"",component:oe}];let ge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[v.D,Z.g,C.d],imports:[[T.ez,re.q,A.a,se.Bz.forChild(le),S.Q8.withConfig({spinnerPosition:"right",color:"#red"}),ce.bj]]}),n})()}}]);