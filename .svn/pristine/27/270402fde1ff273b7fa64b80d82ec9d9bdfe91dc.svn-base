"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[2827],{2827:(dt,g,n)=>{n.r(g),n.d(g,{CarDeductedStatisticModule:()=>ct});var r=n(6019),m=n(8977),y=n(2262),d=n(4176),l=n(9839),t=n(3668),f=n(2300),C=n(9594),p=n(6765),_=n(563),Z=n(6154),T=n(888),v=n(5694),h=n(5243),S=n(8167),D=n(6400),u=n(9133),A=n(138),N=n(6731),b=n(86),x=n(9711);function O(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.Q6J("value",i.cvtId),t.xp6(1),t.Oqu(i.cvtName)}}function M(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.Q6J("value",i.emId),t.xp6(1),t.Oqu(i.emName)}}function q(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(i),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function U(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(i),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function L(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(i),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("disabled",i.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function Q(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function Y(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.index,o=t.oxw(2);t.xp6(1),t.Oqu(i+1+o.page*o.pageSize)}}function J(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.emNameCol")))}function I(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.emName)}}function E(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.vehicleTypeCol")))}function w(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.cvtName)}}function F(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.ticketTypeCol")))}function B(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.typename)}}function R(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"carDeductedStatisticModule.cardNoCol")))}function z(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.caNo)}}function P(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"carDeductedStatisticModule.cardNumberCol")))}function k(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.caNumber)}}function H(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.ioTimeCol")))}function $(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.ioTime)}}function V(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"carDeductedStatisticModule.plateNumberCol")))}function G(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.plateNumber)}}function j(e,a){1&e&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.priceCol")))}function X(e,a){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.price)}}function W(e,a){1&e&&t._UZ(0,"tr",38)}function K(e,a){1&e&&t._UZ(0,"tr",39)}function tt(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",20),t.TgZ(2,"table",21),t.ynx(3,22),t.YNc(4,Q,3,3,"th",23),t.YNc(5,Y,2,1,"td",24),t.BQk(),t.ynx(6,25),t.YNc(7,J,3,3,"th",23),t.YNc(8,I,2,1,"td",24),t.BQk(),t.ynx(9,26),t.YNc(10,E,3,3,"th",23),t.YNc(11,w,2,1,"td",24),t.BQk(),t.ynx(12,27),t.YNc(13,F,3,3,"th",23),t.YNc(14,B,2,1,"td",24),t.BQk(),t.ynx(15,28),t.YNc(16,R,3,3,"th",23),t.YNc(17,z,2,1,"td",24),t.BQk(),t.ynx(18,29),t.YNc(19,P,3,3,"th",23),t.YNc(20,k,2,1,"td",24),t.BQk(),t.ynx(21,30),t.YNc(22,H,3,3,"th",23),t.YNc(23,$,2,1,"td",24),t.BQk(),t.ynx(24,31),t.YNc(25,V,3,3,"th",23),t.YNc(26,G,2,1,"td",24),t.BQk(),t.ynx(27,32),t.YNc(28,j,3,3,"th",23),t.YNc(29,X,2,1,"td",24),t.BQk(),t.YNc(30,W,1,0,"tr",33),t.YNc(31,K,1,0,"tr",34),t.qZA(),t.TgZ(32,"mat-paginator",35),t.NdJ("page",function(c){return t.CHM(i),t.oxw().onChangePage(c)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const i=t.oxw();t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("pageIndex",i.page)("length",i.totalRow)("disabled",!1)}}let et=(()=>{class e{constructor(i,o,c,s,st){this.dataService=i,this.notificationService=o,this.pagin=c,this.translateService=s,this.datePipe=st,this.displayedColumns=["position","emName","vehicleType","ticketType","cardNo","cardNumber","time","plateNumber","price"],this.dataSource=new d.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.disableButton=!0,this.keyword="",this.totalRow=0,this.totalPage=0,this.employee=[],this.carType=[],this.showList=!1,this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){this.loadEmployee(),this.getCardVehicleType()}Refresh(){this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.keyword="",this.showList=!1,this.employee=[],this.carType=[],this.disableButton=!0}loadData(){(null==this.employee||null==this.employee)&&(this.employee=[]),(null==this.carType||null==this.carType)&&(this.carType=[]);var i=JSON.stringify(this.employee),o=JSON.stringify(this.carType);this.dataService.get("CarDeductedStatistic/GetAllByPaging?fromDate="+this.dateFrom+"&toDate="+this.dateTo+"&em_id="+i+"&cvt_id="+o+"&page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(c=>{this.data=c.items,0==this.data.length&&(this.Refresh(),this.translateService.get("messageSystem.staticsNull").subscribe(s=>l.Q.STATISTIC_NULL=s),this.notificationService.printErrorMessage(l.Q.STATISTIC_NULL)),this.data.length>0&&(this.showList=!0,this.disableButton=!1,this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=c.totalCount)},c=>{}),this.loadDataExport()}loadEmployee(){this.dataService.get("TEmployee/getAllNoParam").subscribe(i=>{this.employees=i},i=>{})}getCardVehicleType(){this.dataService.get("PCardVehicleType/getall").subscribe(i=>{this.carTypes=i},i=>{})}loadDataExport(){(null==this.employee||null==this.employee)&&(this.employee=[]),(null==this.carType||null==this.carType)&&(this.carType=[]);var i=JSON.stringify(this.employee),o=JSON.stringify(this.carType);this.dataService.get("CarDeductedStatistic/GetAll?fromDate="+this.dateFrom+"&toDate="+this.dateTo+"&em_id="+i+"&cvt_id="+o+"&keyword="+this.keyword).subscribe(c=>{this.dataExports=c},c=>{})}exportExcel(){this.dataService.post("CarDeductedStatistic/ExportXls",{dateFrom:this.dateFrom,dateTo:this.dateTo,data:this.dataExports}).subscribe(o=>{window.location.href=o.result},o=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(c=>l.Q.EXPORT_FAILSE_MSG=c),this.notificationService.printErrorMessage(l.Q.EXPORT_FAILSE_MSG)})}onChangePage(i){this.page=i.pageIndex,this.pageSize=i.pageSize,this.loadData()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.D),t.Y36(C.g),t.Y36(p.d),t.Y36(_.sK),t.Y36(r.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-car-deducted-statistic"]],viewQuery:function(i,o){if(1&i&&(t.Gf(m.NW,5),t.Gf(y.YE,5)),2&i){let c;t.iGM(c=t.CRH())&&(o.paginator=c.first),t.iGM(c=t.CRH())&&(o.sort=c.first)}},decls:48,vars:33,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex",""],["fxFlex","",2,"margin","5px"],["appearance","outline"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","required","",3,"ngModel","ngModelChange"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emName"],["matColumnDef","vehicleType"],["matColumnDef","ticketType"],["matColumnDef","cardNo"],["matColumnDef","cardNumber"],["matColumnDef","time"],["matColumnDef","plateNumber"],["matColumnDef","price"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of cardInOutStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"mat-form-field",6),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"mat-select",7),t.NdJ("ngModelChange",function(s){return o.carType=s}),t.YNc(18,O,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",5),t.TgZ(20,"mat-form-field",6),t.TgZ(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"mat-select",7),t.NdJ("ngModelChange",function(s){return o.employee=s}),t.YNc(25,M,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"mat-form-field",6),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"input",9),t.NdJ("ngModelChange",function(s){return o.dateFrom=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",5),t.TgZ(33,"mat-form-field",6),t.TgZ(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"input",9),t.NdJ("ngModelChange",function(s){return o.dateTo=s}),t.qZA(),t.qZA(),t.qZA(),t._UZ(38,"div",4),t.qZA(),t.TgZ(39,"div",10),t.YNc(40,q,3,3,"button",11),t.ALo(41,"userRoles"),t.YNc(42,U,3,3,"button",12),t.ALo(43,"userRoles"),t.YNc(44,L,3,4,"button",13),t.ALo(45,"userRoles"),t.qZA(),t.qZA(),t.YNc(46,tt,33,8,"div",14),t.ALo(47,"userRoles"),t.qZA()),2&i&&(t.xp6(5),t.Oqu(t.lcZ(6,15,"carDeductedStatisticModule.title")),t.xp6(10),t.Oqu(t.lcZ(16,17,"pVehicleModule.cvtNameCol")),t.xp6(2),t.Q6J("ngModel",o.carType),t.xp6(1),t.Q6J("ngForOf",o.carTypes),t.xp6(4),t.Oqu(t.lcZ(23,19,"carDeductedStatisticModule.employees")),t.xp6(2),t.Q6J("ngModel",o.employee),t.xp6(1),t.Q6J("ngForOf",o.employees),t.xp6(4),t.Oqu(t.lcZ(30,21,"cardInOutStatisticModule.fromDate")),t.xp6(2),t.Q6J("ngModel",o.dateFrom),t.xp6(4),t.Oqu(t.lcZ(36,23,"cardInOutStatisticModule.toDate")),t.xp6(2),t.Q6J("ngModel",o.dateTo),t.xp6(3),t.Q6J("ngIf",t.lcZ(41,25,"ViewVehicleDiscountStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(43,27,"ViewVehicleDiscountStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(45,29,"ExportVehicleDiscountStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(47,31,o.showList&&"ExportVehicleDiscountStatistic")))},directives:[Z.Yh,T.a8,T.n5,v.d,h.xw,h.yH,S.KE,S.hX,D.gD,u.JJ,u.On,r.sg,A.Nt,u.Fj,u.Q7,h.Wh,r.O5,N.ey,b.lW,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,m.NW,d.ge,d.ev,d.XQ,d.Gk],pipes:[_.X$,x.v],styles:[""]}),e})();var it=n(4382),at=n(8576),ot=n(4646);const nt=[{path:"",component:et}];let ct=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[f.D,C.g,p.d,r.uU,{provide:m.ye,useClass:p.d}],imports:[[r.ez,at.q,x.a,it.Bz.forChild(nt),Z.Q8.withConfig({spinnerPosition:"right",color:"#red"}),ot.bj]]}),e})()}}]);