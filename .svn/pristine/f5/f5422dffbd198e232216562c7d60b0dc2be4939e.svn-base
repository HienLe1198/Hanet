"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[5725],{5725:(Je,A,n)=>{n.r(A),n.d(A,{ALeaveModule:()=>Ne});var h=n(6019),I=n(5351),r=n(9133),L=n(8977),k=n(2262),p=n(4176),C=n(1125),_=n(8053),m=n(9839),e=n(3668),x=n(2300),g=n(5304),T=n(9594),Z=n(6765),y=n(563),b=n(6154),S=n(888),q=n(5694),v=n(5243),M=n(86),f=n(8167),N=n(5498),Q=n(138),U=n(904),D=n(7444),J=n(9112),F=n(9851),O=n(6400),Y=n(6731),E=n(9711);const w=["dialog"];function R(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialog("create")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.createButton")," "))}function j(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeData()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("disabled",0==t.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"button.deleteButton")," ")}}function G(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"th",43),e.TgZ(1,"mat-checkbox",44),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(2);return i?s.masterToggle():null}),e.qZA(),e.qZA()}if(2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function B(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"td",45),e.TgZ(1,"mat-checkbox",46),e.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const u=e.CHM(t).$implicit,c=e.oxw(2);return i?c.selection.toggle(u):null}),e.qZA(),e.qZA()}if(2&a){const t=l.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("checked",o.selection.isSelected(t))("aria-label",o.checkboxLabel(t))}}function H(a,l){1&a&&(e.TgZ(0,"th",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.positionCol"),""))}function V(a,l){if(1&a&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&a){const t=l.index,o=e.oxw(2);e.xp6(1),e.hij(" ",t+1+o.page*o.pageSize,"")}}function P(a,l){1&a&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.EmIdCol"),""))}function $(a,l){if(1&a&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Oqu(t.emName)}}function z(a,l){1&a&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.LetIdCol"),""))}function W(a,l){if(1&a&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Oqu(t.letName)}}function X(a,l){1&a&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.FromCheckCol"),""))}function K(a,l){if(1&a&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Oqu(t.fromCheck)}}function ee(a,l){1&a&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.LeaFromCol"),""))}function te(a,l){if(1&a&&(e.TgZ(0,"td",48),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.leaFrom,"dd-MM-yyyy"),"")}}function ae(a,l){1&a&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.ToCheckCol"),""))}function oe(a,l){if(1&a&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Oqu(t.toCheck)}}function ie(a,l){1&a&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.LeaToCol"),""))}function le(a,l){if(1&a&&(e.TgZ(0,"td",48),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.leaTo,"dd-MM-yyyy"),"")}}function ne(a,l){1&a&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.DayStatusCol"),""))}function re(a,l){if(1&a&&(e.TgZ(0,"td",48),e.TgZ(1,"mat-checkbox",50),e.NdJ("click",function(o){return o.preventDefault()}),e.qZA(),e.qZA()),2&a){const t=l.$implicit;e.xp6(1),e.Q6J("disableRipple",!0)("checked",t.leaStatus)}}function se(a,l){1&a&&(e.TgZ(0,"th",51),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.actionCol")))}function ce(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"a",53),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).openDialog("edit",i)}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA()}2&a&&e.s9C("matTooltip",e.lcZ(1,1,"button.editButton"))}function me(a,l){1&a&&(e.TgZ(0,"td",45),e.YNc(1,ce,4,3,"a",52),e.ALo(2,"userRoles"),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"UpdateALeave")))}function pe(a,l){1&a&&e._UZ(0,"tr",54)}function ue(a,l){1&a&&e._UZ(0,"tr",55)}function de(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"table",18),e.ynx(3,19),e.YNc(4,G,2,3,"th",20),e.YNc(5,B,2,2,"td",21),e.BQk(),e.ynx(6,22),e.YNc(7,H,3,3,"th",23),e.YNc(8,V,2,1,"td",24),e.BQk(),e.ynx(9,25),e.YNc(10,P,3,3,"th",26),e.YNc(11,$,2,1,"td",24),e.BQk(),e.ynx(12,27),e.YNc(13,z,3,3,"th",28),e.YNc(14,W,2,1,"td",29),e.BQk(),e.ynx(15,30),e.YNc(16,X,3,3,"th",31),e.YNc(17,K,2,1,"td",32),e.BQk(),e.ynx(18,33),e.YNc(19,ee,3,3,"th",34),e.YNc(20,te,3,4,"td",32),e.BQk(),e.ynx(21,35),e.YNc(22,ae,3,3,"th",31),e.YNc(23,oe,2,1,"td",32),e.BQk(),e.ynx(24,36),e.YNc(25,ie,3,3,"th",34),e.YNc(26,le,3,4,"td",32),e.BQk(),e.ynx(27,37),e.YNc(28,ne,3,3,"th",34),e.YNc(29,re,2,2,"td",32),e.BQk(),e.ynx(30,38),e.YNc(31,se,3,3,"th",39),e.YNc(32,me,3,3,"td",21),e.BQk(),e.YNc(33,pe,1,0,"tr",40),e.YNc(34,ue,1,0,"tr",41),e.qZA(),e.qZA(),e.TgZ(35,"mat-paginator",42),e.NdJ("page",function(i){return e.CHM(t),e.oxw().onChangePage(i)}),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageIndex",t.page)("length",t.totalRow)("disabled",!1)}}function he(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).tEmployeeControl.reset()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e.qZA()}}function ge(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"mat-option",79),e.NdJ("onSelectionChange",function(i){const u=e.CHM(t).$implicit;return e.oxw(2).onchangeTEmployee(i,u)}),e._uU(1),e.qZA()}if(2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.emName," ")}}function _e(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.EmIdRequired")," "))}function ve(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.emChooseRequired")," "))}function fe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).aLeaveTypeControl.reset()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e.qZA()}}function Ae(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"mat-option",79),e.NdJ("onSelectionChange",function(i){const u=e.CHM(t).$implicit;return e.oxw(2).onchangeALeaveType(i,u)}),e._uU(1),e.qZA()}if(2&a){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.letName," ")}}function Le(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.LetIdRequired")," "))}function Ce(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.leatChooseRequired")," "))}function xe(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.ToDateRequired")," "))}function Te(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.ToDateRequired")," "))}function Ze(a,l){if(1&a&&(e.TgZ(0,"mat-option",80),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ye(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.CheckRequired")," "))}function be(a,l){if(1&a&&(e.TgZ(0,"mat-option",80),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Se(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"aLeaveModule.CheckRequired")," "))}function Fe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"form",56),e.NdJ("submit",function(){return e.CHM(t),e.oxw().addData()}),e.TgZ(1,"h2",57),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",58),e.TgZ(5,"mat-form-field",59),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",60),e.ALo(10,"translate"),e.YNc(11,he,3,0,"button",61),e.TgZ(12,"mat-autocomplete",62,63),e.YNc(14,ge,2,2,"mat-option",64),e.ALo(15,"async"),e.qZA(),e.YNc(16,_e,3,3,"mat-error",65),e.YNc(17,ve,3,3,"mat-error",65),e.qZA(),e.TgZ(18,"mat-form-field",59),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"input",60),e.ALo(23,"translate"),e.YNc(24,fe,3,0,"button",61),e.TgZ(25,"mat-autocomplete",62,66),e.YNc(27,Ae,2,2,"mat-option",64),e.ALo(28,"async"),e.qZA(),e.YNc(29,Le,3,3,"mat-error",65),e.YNc(30,Ce,3,3,"mat-error",65),e.qZA(),e.TgZ(31,"div",67),e.TgZ(32,"div"),e.TgZ(33,"mat-form-field",68),e.TgZ(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"input",69),e.ALo(38,"translate"),e.YNc(39,xe,3,3,"mat-error",65),e.qZA(),e.TgZ(40,"mat-form-field",68),e.TgZ(41,"mat-label"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"input",70),e.ALo(45,"translate"),e.YNc(46,Te,3,3,"mat-error",65),e.qZA(),e.qZA(),e.TgZ(47,"div"),e.TgZ(48,"mat-form-field",68),e.TgZ(49,"mat-label"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-select",71),e.YNc(53,Ze,2,2,"mat-option",72),e.qZA(),e.YNc(54,ye,3,3,"mat-error",65),e.qZA(),e.TgZ(55,"mat-form-field",68),e.TgZ(56,"mat-label"),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"mat-select",73),e.YNc(60,be,2,2,"mat-option",72),e.qZA(),e.YNc(61,Se,3,3,"mat-error",65),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"mat-checkbox",74),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"mat-dialog-actions",75),e.TgZ(66,"button",76),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"button",77),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.MAs(13),o=e.MAs(26),i=e.oxw();e.Q6J("formGroup",i.LeaveForm),e.xp6(2),e.Oqu(e.lcZ(3,37,i.title)),e.xp6(5),e.Oqu(e.lcZ(8,39,"aLeaveModule.EmIdCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(10,41,"aLeaveModule.EmIdCol")),e.Q6J("formControl",i.tEmployeeControl)("matAutocomplete",t),e.xp6(2),e.Q6J("ngIf",i.tEmployeeControl.value),e.xp6(1),e.Q6J("displayWith",i.displayFnTEmployee),e.xp6(2),e.Q6J("ngForOf",e.lcZ(15,43,i.employeeOptions)),e.xp6(2),e.Q6J("ngIf",i.tEmployeeControl.hasError("required")),e.xp6(1),e.Q6J("ngIf",!i.tEmployeeControl.hasError("required")&&i.tEmployeeControl.hasError("invalidAutocompleteObject")),e.xp6(3),e.Oqu(e.lcZ(21,45,"aLeaveModule.LetIdCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(23,47,"aLeaveModule.LetIdCol")),e.Q6J("formControl",i.aLeaveTypeControl)("matAutocomplete",o),e.xp6(2),e.Q6J("ngIf",i.aLeaveTypeControl.value),e.xp6(1),e.Q6J("displayWith",i.displayFnALeaveType),e.xp6(2),e.Q6J("ngForOf",e.lcZ(28,49,i.aleaveOptions)),e.xp6(2),e.Q6J("ngIf",i.aLeaveTypeControl.hasError("required")),e.xp6(1),e.Q6J("ngIf",!i.aLeaveTypeControl.hasError("required")&&i.aLeaveTypeControl.hasError("invalidAutocompleteObject")),e.xp6(5),e.Oqu(e.lcZ(36,51,"aLeaveModule.LeaFromCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(38,53,"aLeaveModule.LeaFromCol")),e.xp6(2),e.Q6J("ngIf",i.getValidForm.leaFrom.hasError("required")),e.xp6(3),e.Oqu(e.lcZ(43,55,"aLeaveModule.LeaToCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(45,57,"aLeaveModule.LeaToCol")),e.xp6(2),e.Q6J("ngIf",i.getValidForm.leaTo.hasError("required")),e.xp6(4),e.Oqu(e.lcZ(51,59,"aLeaveModule.FromCheckCol")),e.xp6(3),e.Q6J("ngForOf",i.check),e.xp6(1),e.Q6J("ngIf",i.getValidForm.fromCheck.hasError("required")),e.xp6(3),e.Oqu(e.lcZ(58,61,"aLeaveModule.ToCheckCol")),e.xp6(3),e.Q6J("ngForOf",i.check),e.xp6(1),e.Q6J("ngIf",i.getValidForm.toCheck.hasError("required")),e.xp6(1),e.Q6J("disabled",!0),e.xp6(1),e.hij(" ",e.lcZ(64,63,"aLeaveModule.DayStatusCol"),""),e.xp6(4),e.Oqu(e.lcZ(68,65,"button.cancelButton")),e.xp6(2),e.Q6J("disabled",i.preventAbuse),e.xp6(1),e.Oqu(e.lcZ(71,67,"button.saveButton"))}}let Ee=(()=>{class a{constructor(t,o,i,s,u,c){this.dataService=t,this.dialog=o,this.notificationService=i,this.pagin=s,this.translateService=u,this.formBuilder=c,this.displayedColumns=["select","position","emId","letId","fromCheck","leaFrom","toCheck","leaTo","leaStatus","action"],this.check=[{id:1,name:"Ca s\xe1ng"},{id:2,name:"Ca Chi\u1ec1u"}],this.dataSource=new p.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.selection=new I.Ov(!0,[]),this.action="",this.title="",this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.aLeaveTypeControl=new r.NI("",{validators:[this.autocompleteObjectValidator(),r.kI.required]}),this.tEmployeeControl=new r.NI("",{validators:[this.autocompleteObjectValidator(),r.kI.required]}),this.LeaveParentControl=new r.NI(""),this.LeaveForm=this.formBuilder.group({leaId:"",letId:"",emId:"",leaFrom:["",r.kI.compose([r.kI.required])],leaTo:["",r.kI.compose([r.kI.required])],fromCheck:["",r.kI.compose([r.kI.required])],toCheck:["",r.kI.compose([r.kI.required])],leaStatus:""})}autocompleteObjectValidator(){return t=>"string"==typeof t.value?{invalidAutocompleteObject:{value:t.value}}:null}onchangeALeaveType(t,o){t.source.selected&&this.LeaveForm.controls.letId.setValue(o.letId)}onchangeTEmployee(t,o){t.source.selected&&this.LeaveForm.controls.emId.setValue(o.emId)}ngOnInit(){this.getALeaveListPaging(),this.getTEmployee(),this.getALeaveType()}_filterALeaveTypes(t){const o=null==t?void 0:t.toLowerCase();return this.aLeaveTypes.filter(i=>null==i?void 0:i.letName.toLowerCase().includes(o))}_filterTEmployee(t){const o=null==t?void 0:t.toLowerCase();return this.tEmployees.filter(i=>null==i?void 0:i.emName.toLowerCase().includes(o))}getTEmployee(){this.preventAbuse=!0,this.dataService.get("TEmployee/getAllNoParam").subscribe(t=>{this.tEmployees=t,this.preventAbuse=!1,this.employeeOptions=this.tEmployeeControl.valueChanges.pipe((0,C.O)(""),(0,_.U)(o=>null==o||"string"==typeof o?o:o.emName),(0,_.U)(o=>o?this._filterTEmployee(o):this.tEmployees.slice()))},t=>{this.translateService.get("messageSystem.loadFail").subscribe(o=>m.Q.GET_FAILSE_MSG=o),this.notificationService.printErrorMessage(m.Q.GET_FAILSE_MSG),this.preventAbuse=!1})}getALeaveType(){this.preventAbuse=!0,this.dataService.get("ALeaveType/GetAll").subscribe(t=>{this.aLeaveTypes=t,this.preventAbuse=!1,this.aleaveOptions=this.aLeaveTypeControl.valueChanges.pipe((0,C.O)(""),(0,_.U)(o=>null==o||"string"==typeof o?o:o.letName),(0,_.U)(o=>o?this._filterALeaveTypes(o):this.aLeaveTypes.slice()))},t=>{this.translateService.get("messageSystem.loadFail").subscribe(o=>m.Q.GET_FAILSE_MSG=o),this.notificationService.printErrorMessage(m.Q.GET_FAILSE_MSG),this.preventAbuse=!1})}openDialog(t,o,i){this.action=t;let s=new h.uU("en-US");if("create"==t)this.translateService.get("aLeaveModule.createMessage").subscribe(c=>this.title=c),this.LeaveForm.controls.leaStatus.setValue(!1);else{this.translateService.get("aLeaveModule.editMessage").subscribe(d=>this.title=d),this.LeaveForm.controls.leaId.setValue(o.leaId);let c=this.dataSource.filteredData.filter(d=>d.leaId==o.leaId)[0];this.LeaveForm.controls.letId.setValue(c.letId),this.LeaveForm.controls.emId.setValue(c.emId),this.LeaveForm.controls.leaFrom.setValue(s.transform(c.leaFrom,"yyyy-MM-dd")),this.LeaveForm.controls.fromCheck.setValue(c.fromCheck),this.LeaveForm.controls.leaTo.setValue(s.transform(c.leaTo,"yyyy-MM-dd")),this.LeaveForm.controls.toCheck.setValue(c.toCheck),this.LeaveForm.controls.leaStatus.setValue(c.leaStatus);let Qe=this.aLeaveTypes.filter(d=>d.letId==o.letId)[0];this.aLeaveTypeControl.setValue(Qe);let Ue=this.tEmployees.filter(d=>d.emId==o.emId)[0];this.tEmployeeControl.setValue(Ue),this.preventAbuse=!1}const u=this.dialog.open(this.dialogTemplate,{width:"650px"});u.disableClose=!0,u.afterClosed().subscribe(c=>{this.onReset()})}displayFnALeaveType(t){return t&&t.letName?t.letName:""}displayFnTEmployee(t){return t&&t.emName?t.emName:""}getALeaveListPaging(){this.preventAbuse=!0,this.dataService.get("ALeave/getlistpaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(t=>{this.dataSource=new p.by(t.items),this.dataSource.sort=this.sort,this.totalRow=t.totalCount},t=>{this.translateService.get("messageSystem.loadFail").subscribe(o=>m.Q.GET_FAILSE_MSG=o),this.notificationService.printErrorMessage(m.Q.GET_FAILSE_MSG)}),this.preventAbuse=!1}applyFilter(t){this.keyword=t.target.value,this.page=0,this.getALeaveListPaging(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}get control(){return this.LeaveForm.controls}get getValidForm(){return this.LeaveForm.controls}addData(){if(!this.tEmployeeControl.invalid&&!this.LeaveParentControl.invalid&&!this.LeaveForm.invalid){if(this.preventAbuse=!0,"create"==this.action){let t={letId:this.LeaveForm.controls.letId.value,emId:this.LeaveForm.controls.emId.value,leaFrom:this.LeaveForm.controls.leaFrom.value,fromCheck:this.LeaveForm.controls.fromCheck.value,leaTo:this.LeaveForm.controls.leaTo.value,toCheck:this.LeaveForm.controls.toCheck.value,leaStatus:this.LeaveForm.controls.leaStatus.value};if(t.leaFrom>t.leaTo)return this.notificationService.printErrorMessage("Ng\xe0y b\u1eaft \u0111\u1ea7u kh\xf4ng \u0111\u01b0\u1ee3c l\u1edbn h\u01a1n ng\xe0y k\u1ebft th\xfac"),this.preventAbuse=!1,void this.control.leaFrom.reset();if(new Date(t.leaFrom)<new Date)return this.notificationService.printErrorMessage("Ng\xe0y b\u1eaft \u0111\u1ea7u ngh\u1ec9 ph\u1ea3i l\u1edbn h\u01a1n ng\xe0y hi\u1ec7n t\u1ea1i"),this.preventAbuse=!1,void this.control.leaFrom.reset();console.log(t),this.dataService.post("ALeave/create",t).subscribe(o=>{let i;this.translateService.get("messageSystem.createSuccess").subscribe(s=>i=s),this.notificationService.printSuccessMessage(i),this.getALeaveListPaging(),this.getTEmployee(),this.getALeaveType(),this.dialog.closeAll(),this.onReset()},o=>{let i;this.translateService.get("messageSystem.createFail").subscribe(s=>i=s),this.notificationService.printErrorMessage(i)})}else if("edit"==this.action){let t={leaId:this.LeaveForm.controls.leaId.value,letId:this.LeaveForm.controls.letId.value,emId:this.LeaveForm.controls.emId.value,leaFrom:this.LeaveForm.controls.leaFrom.value,fromCheck:this.LeaveForm.controls.fromCheck.value,leaTo:this.LeaveForm.controls.leaTo.value,toCheck:this.LeaveForm.controls.toCheck.value,leaStatus:this.LeaveForm.controls.leaStatus.value};if(t.leaFrom>t.leaTo)return this.notificationService.printErrorMessage("Ng\xe0y b\u1eaft \u0111\u1ea7u kh\xf4ng \u0111\u01b0\u1ee3c l\u1edbn h\u01a1n ng\xe0y k\u1ebft th\xfac"),this.preventAbuse=!1,void this.control.leaFrom.reset();this.dataService.put("ALeave/update",t).subscribe(o=>{let i;this.translateService.get("messageSystem.updateSuccess").subscribe(s=>i=s),this.notificationService.printSuccessMessage(i),this.getALeaveListPaging(),this.getTEmployee(),this.getALeaveType(),this.dialog.closeAll(),this.onReset()},o=>{let i;this.translateService.get("messageSystem.updateFail").subscribe(s=>i=s),this.notificationService.printErrorMessage(i)})}this.onReset(),this.preventAbuse=!1}}onReset(){this.dialog.closeAll(),this.aLeaveTypeControl.reset(),this.LeaveParentControl.reset(),this.tEmployeeControl.reset(),this.LeaveForm.reset()}removeData(){let t=[];this.selection.selected.forEach(o=>{t.push(o.leaId)}),this.translateService.get("messageSystem.confirmDelete").subscribe(o=>m.Q.CONFIRM_DELETE_MSG=o),this.notificationService.printConfirmationDialog(m.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(t)))}deleteItemConfirm(t){this.preventAbuse=!0,this.dataService.delete("ALeave/deletemulti","checkedList",t).subscribe(o=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(i=>m.Q.DELETED_OK_MSG=i),this.notificationService.printSuccessMessage(m.Q.DELETED_OK_MSG),this.selection.clear(),this.getALeaveListPaging(),this.getTEmployee(),this.getALeaveType()},o=>{this.translateService.get("messageSystem.deletefail").subscribe(i=>m.Q.DELETE_FAILSE_MSG=i),this.notificationService.printErrorMessage(m.Q.DELETE_FAILSE_MSG)}),this.preventAbuse=!1}acceptItem(){let t=[];this.selection.selected.forEach(o=>{t.push(o.leaId)}),this.notificationService.printConfirmationDialog("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n duy\u1ec7t ngh\u1ec9 ph\xe9p n\xe0y kh\xf4ng?",()=>this.acceptItemConfirm(JSON.stringify(t)))}acceptItemConfirm(t){this.preventAbuse=!0,this.dataService.put("ALeave/acceptmulti?checkedList="+t).subscribe(o=>{this.notificationService.printSuccessMessage("Duy\u1ec7t th\xe0nh c\xf4ng!"),this.selection.clear(),this.getALeaveListPaging(),this.getTEmployee(),this.getALeaveType()},o=>{this.notificationService.printErrorMessage("Duy\u1ec7t kh\xf4ng th\xe0nh c\xf4ng!")}),this.preventAbuse=!1}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onChangePage(t){this.page=t.pageIndex,this.pageSize=t.pageSize,this.getALeaveListPaging()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(x.D),e.Y36(g.uw),e.Y36(T.g),e.Y36(Z.d),e.Y36(y.sK),e.Y36(r.qu))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-a-leave"]],viewQuery:function(t,o){if(1&t&&(e.Gf(L.NW,5),e.Gf(k.YE,5),e.Gf(w,5)),2&t){let i;e.iGM(i=e.CRH())&&(o.paginator=i.first),e.iGM(i=e.CRH())&&(o.sort=i.first),e.iGM(i=e.CRH())&&(o.dialogTemplate=i.first)}},decls:32,vars:22,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","start center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["color","accent","mat-raised-button","",3,"disabled","click"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","","style"," text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style"," text-align: center;",4,"matCellDef"],["matColumnDef","emId"],["mat-header-cell","","mat-sort-header","","style"," text-align: center;",4,"matHeaderCellDef"],["matColumnDef","letId"],["mat-header-cell","","style","text-align:center;","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","text-align:center;",4,"matCellDef"],["matColumnDef","fromCheck"],["mat-header-cell","","mat-sort-header","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","leaFrom"],["mat-header-cell","","style","text-align: center;","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","toCheck"],["matColumnDef","leaTo"],["matColumnDef","leaStatus"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-cell","","mat-sort-header","",2,"text-align","center"],[3,"disableRipple","checked","click"],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["action","",3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline"],["invalidAutocompleteString","","type","text","aria-label","","matInput","",3,"placeholder","formControl","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"displayWith"],["autoEmployee","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],["autoALeave","matAutocomplete"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column","fxLayoutGap","center center"],["appearance","outline",2,"margin-right","5px"],["type","date","matInput","","formControlName","leaFrom","required","",3,"placeholder"],["type","date","matInput","","formControlName","leaTo","required","",3,"placeholder"],["formControlName","fromCheck","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","toCheck","required",""],["formControlName","leaStatus",2,"margin-left","10px","margin-bottom","6px",3,"disabled"],["align","center"],["mat-stroked-button","","color","warn","mat-dialog-close","",3,"click"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value","onSelectionChange"],[3,"value"]],template:function(t,o){1&t&&(e._UZ(0,"ng-progress",0,1),e.TgZ(2,"mat-card"),e.TgZ(3,"div"),e.TgZ(4,"mat-card-title",2),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-divider"),e._UZ(8,"br"),e._UZ(9,"br"),e.TgZ(10,"div",3),e.TgZ(11,"div",4),e.YNc(12,R,3,3,"button",5),e.ALo(13,"userRoles"),e.YNc(14,j,3,4,"button",6),e.ALo(15,"userRoles"),e.TgZ(16,"button",7),e.NdJ("click",function(){return o.acceptItem()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e._UZ(19,"div",8),e.TgZ(20,"div",8),e.TgZ(21,"mat-form-field",9),e.TgZ(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"input",10,11),e.NdJ("keyup",function(s){return o.applyFilter(s)}),e.ALo(27,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(28,de,36,8,"div",12),e.ALo(29,"userRoles"),e.qZA(),e.YNc(30,Fe,72,69,"ng-template",null,13,e.W1O)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,8,"aLeaveModule.title")),e.xp6(7),e.Q6J("ngIf",e.lcZ(13,10,"CreateALeave")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,12,"DeleteALeave")),e.xp6(2),e.Q6J("disabled",0==o.selection.selected.length),e.xp6(1),e.Oqu(e.lcZ(18,14,"Duy\u1ec7t")),e.xp6(6),e.hij(" ",e.lcZ(24,16,"button.searchButton"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(27,18,"button.searchPlaceholder")),e.xp6(3),e.Q6J("ngIf",e.lcZ(29,20,"ViewALeave")))},directives:[b.Yh,S.a8,S.n5,q.d,v.xw,v.yH,v.Wh,h.O5,M.lW,f.KE,N.oO,f.hX,Q.Nt,p.BZ,p.w1,p.fO,p.Dz,p.as,p.nj,L.NW,p.ge,U.oG,p.ev,D.gM,J.Hw,p.XQ,p.Gk,r._Y,r.JL,r.sg,g.uh,g.xY,r.Fj,F.ZL,r.JJ,r.oH,F.XC,h.sg,v.SQ,r.u,r.Q7,O.gD,g.H8,g.ZT,f.R9,Y.ey,f.TO],pipes:[y.X$,E.v,h.uU,h.Ov],styles:[""]}),a})();var Ie=n(8576),ke=n(4382),qe=n(4646);const Me=[{path:"",component:Ee}];let Ne=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[x.D,T.g,Z.d],imports:[[h.ez,Ie.q,E.a,ke.Bz.forChild(Me),b.Q8.withConfig({spinnerPosition:"right",color:"#red"}),qe.bj]]}),a})()}}]);