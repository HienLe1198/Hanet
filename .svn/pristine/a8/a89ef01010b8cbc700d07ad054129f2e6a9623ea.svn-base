"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[834],{834:(dt,g,o)=>{o.r(g),o.d(g,{CardInOutByTtStatisticModule:()=>lt});var r=o(6019),x=o(4382),d=o(8977),O=o(2262),c=o(4176),u=o(9839),t=o(3668),h=o(2300),f=o(9594),p=o(6765),C=o(563),_=o(6154),y=o(888),v=o(5694),T=o(5243),Z=o(8167),I=o(6400),m=o(9133),A=o(138),B=o(6731),N=o(86),S=o(9711);function b(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.Q6J("value",i.cvtId),t.xp6(1),t.hij(" ",i.cvtName," ")}}function M(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.Q6J("value",i.typeid),t.xp6(1),t.hij(" ",i.typename," ")}}function q(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(i),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function D(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(i),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function U(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(i),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("disabled",i.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function L(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function Y(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.index,n=t.oxw(2);t.xp6(1),t.Oqu(i+1+n.page*n.pageSize)}}function Q(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.emNameCol")))}function J(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.emName)}}function w(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.cardNO-NumberCol")))}function F(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.caNo)}}function E(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.vehicleTypeCol")))}function R(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.cvtName)}}function P(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.ticketTypeCol")))}function z(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.typename)}}function H(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.registerNumberCol")))}function k(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.registerPlate)}}function V(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.plateNumberCol")))}function $(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.plateNumber)}}function j(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.ioStatusCol")))}function G(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.ioStatus)}}function X(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.ioTimeCol")))}function W(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.ioTime)}}function K(e,a){1&e&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.priceCol")))}function tt(e,a){if(1&e&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.price)}}function et(e,a){1&e&&t._UZ(0,"tr",39)}function it(e,a){1&e&&t._UZ(0,"tr",40)}function at(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",19),t.TgZ(1,"div",20),t.TgZ(2,"table",21),t.ynx(3,22),t.YNc(4,L,3,3,"th",23),t.YNc(5,Y,2,1,"td",24),t.BQk(),t.ynx(6,25),t.YNc(7,Q,3,3,"th",23),t.YNc(8,J,2,1,"td",24),t.BQk(),t.ynx(9,26),t.YNc(10,w,3,3,"th",23),t.YNc(11,F,2,1,"td",24),t.BQk(),t.ynx(12,27),t.YNc(13,E,3,3,"th",23),t.YNc(14,R,2,1,"td",24),t.BQk(),t.ynx(15,28),t.YNc(16,P,3,3,"th",23),t.YNc(17,z,2,1,"td",24),t.BQk(),t.ynx(18,29),t.YNc(19,H,3,3,"th",23),t.YNc(20,k,2,1,"td",24),t.BQk(),t.ynx(21,30),t.YNc(22,V,3,3,"th",23),t.YNc(23,$,2,1,"td",24),t.BQk(),t.ynx(24,31),t.YNc(25,j,3,3,"th",23),t.YNc(26,G,2,1,"td",24),t.BQk(),t.ynx(27,32),t.YNc(28,X,3,3,"th",23),t.YNc(29,W,2,1,"td",24),t.BQk(),t.ynx(30,33),t.YNc(31,K,3,3,"th",23),t.YNc(32,tt,2,1,"td",24),t.BQk(),t.YNc(33,et,1,0,"tr",34),t.YNc(34,it,1,0,"tr",35),t.qZA(),t.TgZ(35,"mat-paginator",36),t.NdJ("page",function(s){return t.CHM(i),t.oxw().onChangePage(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const i=t.oxw();t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("pageIndex",i.page)("length",i.totalRow)("disabled",!1)}}let nt=(()=>{class e{constructor(i,n,s,l,rt){this.dataService=i,this.notificationService=n,this.pagin=s,this.translateService=l,this.datePipe=rt,this.customPaginatorIntl=new d.ye,this.displayedColumns=["position","emName","cardNO-Number","vehicleType","ticketType","registerNumber","plateNumber","ioStatus","ioTime","price"],this.dataSource=new c.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.disableButton=!0,this.keyword="",this.totalRow=0,this.totalPage=0,this.showList=!1,this.typeid=null,this.cvtId=null,this.fillterName="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){this.getTicketType(),this.getCardVehicleType()}getTicketType(){this.dataService.get("PTicketType/getall").subscribe(i=>{this.ticketType=i},i=>{})}getCardVehicleType(){this.dataService.get("PCardVehicleType/getall").subscribe(i=>{this.cardVehicleType=i},i=>{})}loadData(){null==this.typeid&&(this.typeid=0),null==this.cvtId&&(this.cvtId=0),this.dataService.get("InOutByTTStatistic/getAllPaging?fromDate="+this.dateFrom+"&toDate="+this.dateTo+"&CVTID="+this.cvtId+"&TYPEID="+this.typeid+"&page="+this.page+"&pageSize="+this.pageSize).subscribe(i=>{this.data=i.items,0==this.data.length&&(this.showList=!1,this.Refresh(),this.translateService.get("messageSystem.staticsNull").subscribe(n=>u.Q.STATISTIC_NULL=n),this.notificationService.printErrorMessage(u.Q.STATISTIC_NULL)),this.data.length>0&&(this.disableButton=!1,this.showList=!0,this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=i.totalCount)},i=>{i.console.error()}),this.loadDataExport()}Refresh(){this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.fillterName="",this.typeid=null,this.cvtId=null,this.showList=!1,this.disableButton=!0}onChangePage(i){this.page=i.pageIndex,this.pageSize=i.pageSize,this.loadData()}loadDataExport(){this.dataService.get("InOutByTTStatistic/GetAll?fromDate="+this.dateFrom+"&toDate="+this.dateTo+"&CVTID="+this.cvtId+"&TYPEID="+this.typeid+"&keyword="+this.fillterName).subscribe(i=>{this.dataExports=i},i=>{})}exportExcel(){this.loadDataExport(),this.dataService.post("InOutByTTStatistic/ExportXls",{dateFrom:this.dateFrom,dateTo:this.dateTo,data:this.dataExports}).subscribe(n=>{window.location.href=n.result},n=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(s=>u.Q.EXPORT_FAILSE_MSG=s),this.notificationService.printErrorMessage(u.Q.EXPORT_FAILSE_MSG)})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(h.D),t.Y36(f.g),t.Y36(p.d),t.Y36(C.sK),t.Y36(r.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-card-in-out-by-tt-statistic"]],viewQuery:function(i,n){if(1&i&&(t.Gf(d.NW,5),t.Gf(O.YE,5)),2&i){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first),t.iGM(s=t.CRH())&&(n.sort=s.first)}},decls:48,vars:33,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex",""],["fxFlex","",2,"margin","5px"],["appearance","outline"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","required","",3,"ngModel","ngModelChange"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emName"],["matColumnDef","cardNO-Number"],["matColumnDef","vehicleType"],["matColumnDef","ticketType"],["matColumnDef","registerNumber"],["matColumnDef","plateNumber"],["matColumnDef","ioStatus"],["matColumnDef","ioTime"],["matColumnDef","price"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of cardInOutStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"mat-form-field",6),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"mat-select",7),t.NdJ("ngModelChange",function(l){return n.cvtId=l}),t.YNc(18,b,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",5),t.TgZ(20,"mat-form-field",6),t.TgZ(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"mat-select",7),t.NdJ("ngModelChange",function(l){return n.typeid=l}),t.YNc(25,M,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"mat-form-field",6),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"input",9),t.NdJ("ngModelChange",function(l){return n.dateFrom=l}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",5),t.TgZ(33,"mat-form-field",6),t.TgZ(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"input",9),t.NdJ("ngModelChange",function(l){return n.dateTo=l}),t.qZA(),t.qZA(),t.qZA(),t._UZ(38,"div",4),t.qZA(),t.TgZ(39,"div",10),t.YNc(40,q,3,3,"button",11),t.ALo(41,"userRoles"),t.YNc(42,D,3,3,"button",12),t.ALo(43,"userRoles"),t.YNc(44,U,3,4,"button",13),t.ALo(45,"userRoles"),t.qZA(),t.qZA(),t.YNc(46,at,36,8,"div",14),t.ALo(47,"userRoles"),t.qZA()),2&i&&(t.xp6(5),t.Oqu(t.lcZ(6,15,"cardInOutStatisticModule.title")),t.xp6(10),t.Oqu(t.lcZ(16,17,"pVehicleModule.cvtNameCol")),t.xp6(2),t.Q6J("ngModel",n.cvtId),t.xp6(1),t.Q6J("ngForOf",n.cardVehicleType),t.xp6(4),t.Oqu(t.lcZ(23,19,"pTicketPriceDayModule.typeNameCol")),t.xp6(2),t.Q6J("ngModel",n.typeid),t.xp6(1),t.Q6J("ngForOf",n.ticketType),t.xp6(4),t.Oqu(t.lcZ(30,21,"cardInOutStatisticModule.fromDate")),t.xp6(2),t.Q6J("ngModel",n.dateFrom),t.xp6(4),t.Oqu(t.lcZ(36,23,"cardInOutStatisticModule.toDate")),t.xp6(2),t.Q6J("ngModel",n.dateTo),t.xp6(3),t.Q6J("ngIf",t.lcZ(41,25,"ViewCarInOutByTTVHCTSatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(43,27,"ViewCarInOutByTTVHCTSatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(45,29,"ExportCarInOutByTTVHCTSatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(47,31,n.showList&&"ViewCarInOutByTTVHCTSatistic")))},directives:[_.Yh,y.a8,y.n5,v.d,T.xw,T.yH,Z.KE,Z.hX,I.gD,m.JJ,m.On,r.sg,A.Nt,m.Fj,m.Q7,T.Wh,r.O5,B.ey,N.lW,c.BZ,c.w1,c.fO,c.Dz,c.as,c.nj,d.NW,c.ge,c.ev,c.XQ,c.Gk],pipes:[C.X$,S.v],styles:[""]}),e})();var ot=o(8576),st=o(4646);const ct=[{path:"",component:nt}];let lt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[h.D,f.g,r.uU,p.d,{provide:d.ye,useClass:p.d}],imports:[[r.ez,ot.q,S.a,x.Bz.forChild(ct),_.Q8.withConfig({spinnerPosition:"right",color:"#red"}),st.bj]]}),e})()}}]);