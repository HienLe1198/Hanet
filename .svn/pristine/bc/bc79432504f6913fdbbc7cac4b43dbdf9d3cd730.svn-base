"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[8540],{8540:(mt,u,a)=>{a.r(u),a.d(u,{IoInfoByDepartmentStatisticModule:()=>it});var l=a(6019),f=a(8977),x=a(2262),m=a(4176),c=a(9839),t=a(3668),I=a(2300),p=a(9133),g=a(9594),h=a(6765),_=a(563),y=a(6154),Z=a(888),D=a(5694),d=a(5243),T=a(8167),v=a(138),C=a(6400),A=a(6731),B=a(86),S=a(9711);function N(e,n){if(1&e&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.depId),t.xp6(1),t.hij(" ",o.depName," ")}}function b(e,n){if(1&e&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.emId),t.xp6(1),t.hij(" ",o.emName," ")}}function M(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(o),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function q(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(o),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function O(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){return t.CHM(o),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("disabled",o.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function L(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function U(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.index,i=t.oxw(2);t.xp6(1),t.Oqu(o+1+i.page*i.pageSize)}}function Q(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.emNameCol")))}function Y(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.emName)}}function E(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.departmentCol")))}function J(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.depName)}}function F(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"IoInfoByDepartmentStatisticModule.emIdentityNumber")))}function w(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.emIdentityNumber)}}function R(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"IoInfoByDepartmentStatisticModule.emId")))}function H(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.emId)}}function z(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"IoInfoByDepartmentStatisticModule.ioTime")))}function P(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.ioTime)}}function $(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"IoInfoByDepartmentStatisticModule.timeIn")))}function j(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.timeIn)}}function G(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"IoInfoByDepartmentStatisticModule.timeOut")))}function X(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.timeOut)}}function W(e,n){1&e&&t._UZ(0,"tr",36)}function V(e,n){1&e&&t._UZ(0,"tr",37)}function k(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"div",19),t.TgZ(2,"table",20),t.ynx(3,21),t.YNc(4,L,3,3,"th",22),t.YNc(5,U,2,1,"td",23),t.BQk(),t.ynx(6,24),t.YNc(7,Q,3,3,"th",22),t.YNc(8,Y,2,1,"td",23),t.BQk(),t.ynx(9,25),t.YNc(10,E,3,3,"th",22),t.YNc(11,J,2,1,"td",23),t.BQk(),t.ynx(12,26),t.YNc(13,F,3,3,"th",22),t.YNc(14,w,2,1,"td",23),t.BQk(),t.ynx(15,27),t.YNc(16,R,3,3,"th",22),t.YNc(17,H,2,1,"td",23),t.BQk(),t.ynx(18,28),t.YNc(19,z,3,3,"th",22),t.YNc(20,P,2,1,"td",23),t.BQk(),t.ynx(21,29),t.YNc(22,$,3,3,"th",22),t.YNc(23,j,2,1,"td",23),t.BQk(),t.ynx(24,30),t.YNc(25,G,3,3,"th",22),t.YNc(26,X,2,1,"td",23),t.BQk(),t.YNc(27,W,1,0,"tr",31),t.YNc(28,V,1,0,"tr",32),t.qZA(),t.TgZ(29,"mat-paginator",33),t.NdJ("page",function(s){return t.CHM(o),t.oxw().onChangePage(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",o.pageSizeOptions)("pageIndex",o.page)("length",o.totalRow)("disabled",!1)}}let K=(()=>{class e{constructor(o,i,s,r,at,st){this.dataService=o,this.formBuilder=i,this.notificationService=s,this.pagin=r,this.translateService=at,this.datePipe=st,this.displayedColumns=["position","ioTime","emId","emIdentityNumber","emName","timeIn","timeOut","depName"],this.dataSource=new m.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.totalRow=0,this.totalPage=0,this.disableButton=!0,this.fillterName="",this.emId=0,this.preventAbuse=!1,this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm:ss"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm:ss"),this.showList=!1}ngOnInit(){this.getTDepartment(),this.getTEmployess()}Refresh(){this.fillterName="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm:ss"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm:ss"),this.regId=null,this.depId=null,this.emId=0,this.disableButton=!0,this.showList=!1}getTDepartment(){this.dataService.get("TDepartment/getall").subscribe(o=>{this.tdepartment=o},o=>{})}getTEmployess(){this.dataService.get("TEmployee/getAllEmployee").subscribe(o=>{this.temployess=o},o=>{})}loadData(){null==this.emId&&(this.emId=0),null==this.depId&&(this.depId=0),this.dataService.get("IoInfoByDepartmentStatistic/GetAllToExport?dateFrom="+this.dateFrom+"&dateTo="+this.dateTo+"&dep_id="+this.depId+"&em_id="+this.emId+"&page="+this.page+"&pageSize="+this.pageSize).subscribe(o=>{if(this.data=o,0==this.data.length)return this.showList=!1,this.Refresh(),this.translateService.get("messageSystem.staticsNull").subscribe(i=>c.Q.STATISTIC_NULL=i),void this.notificationService.printErrorMessage(c.Q.STATISTIC_NULL);this.data.length>0&&(this.showList=!0,this.disableButton=!1,this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=o.totalCount)},o=>{}),this.loadDataExport()}loadDataExport(){this.dataService.get("IoInfoByDepartmentStatistic/GetAllToExport?dateFrom="+this.dateFrom+"&dateTo="+this.dateTo+"&dep_id="+this.depId+"&em_id="+this.emId).subscribe(o=>{this.dataExports=o},o=>{})}exportExcel(){this.loadDataExport(),this.dataService.post("IoInfoByDepartmentStatistic/ExportXls",{dateFrom:this.dateFrom,dateTo:this.dateTo,data:this.dataExports}).subscribe(i=>{window.location.href=i.result},i=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(s=>c.Q.EXPORT_FAILSE_MSG=s),this.notificationService.printErrorMessage(c.Q.EXPORT_FAILSE_MSG)})}onChangePage(o){this.page=o.pageIndex,this.pageSize=o.pageSize,this.loadData()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(I.D),t.Y36(p.qu),t.Y36(g.g),t.Y36(h.d),t.Y36(_.sK),t.Y36(l.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-io-info-by-department-statistic"]],viewQuery:function(o,i){if(1&o&&(t.Gf(f.NW,5),t.Gf(x.YE,5)),2&o){let s;t.iGM(s=t.CRH())&&(i.paginator=s.first),t.iGM(s=t.CRH())&&(i.sort=s.first)}},decls:46,vars:33,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex","",2,"margin","5px"],["appearance","outline"],["matInput","","type","datetime-local","required","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emName"],["matColumnDef","depName"],["matColumnDef","emIdentityNumber"],["matColumnDef","emId"],["matColumnDef","ioTime"],["matColumnDef","timeIn"],["matColumnDef","timeOut"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of IoInfoByDepartmentStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t.TgZ(11,"div",4),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",6),t.NdJ("ngModelChange",function(r){return i.dateFrom=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",4),t.TgZ(18,"mat-form-field",5),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",6),t.NdJ("ngModelChange",function(r){return i.dateTo=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.TgZ(24,"mat-form-field",5),t.TgZ(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"mat-select",7),t.NdJ("ngModelChange",function(r){return i.depId=r}),t.YNc(29,N,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",4),t.TgZ(31,"mat-form-field",5),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-select",7),t.NdJ("ngModelChange",function(r){return i.emId=r}),t.YNc(36,b,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",9),t.YNc(38,M,3,3,"button",10),t.ALo(39,"userRoles"),t.YNc(40,q,3,3,"button",11),t.ALo(41,"userRoles"),t.YNc(42,O,3,4,"button",12),t.ALo(43,"userRoles"),t.qZA(),t.YNc(44,k,30,8,"div",13),t.ALo(45,"userRoles"),t.qZA(),t.qZA()),2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,15,"IoInfoByDepartmentStatisticModule.title")),t.xp6(9),t.Oqu(t.lcZ(15,17,"IoInfoByDepartmentStatisticModule.tiaFromCol")),t.xp6(2),t.Q6J("ngModel",i.dateFrom),t.xp6(4),t.Oqu(t.lcZ(21,19,"IoInfoByDepartmentStatisticModule.tiaToCol")),t.xp6(2),t.Q6J("ngModel",i.dateTo),t.xp6(4),t.Oqu(t.lcZ(27,21,"IoInfoByDepartmentStatisticModule.depNameCol")),t.xp6(2),t.Q6J("ngModel",i.depId),t.xp6(1),t.Q6J("ngForOf",i.tdepartment),t.xp6(4),t.Oqu(t.lcZ(34,23,"IoInfoByDepartmentStatisticModule.emNameCol")),t.xp6(2),t.Q6J("ngModel",i.emId),t.xp6(1),t.Q6J("ngForOf",i.temployess),t.xp6(2),t.Q6J("ngIf",t.lcZ(39,25,"ViewIoInfoByDepartmentStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(41,27,"ViewIoInfoByDepartmentStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(43,29,"ExportIoInfoByDepartmentStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(45,31,i.showList&&"ViewIoInfoByDepartmentStatistic")))},directives:[y.Yh,Z.a8,Z.n5,D.d,d.xw,d.yH,T.KE,T.hX,v.Nt,p.Fj,p.Q7,p.JJ,p.On,C.gD,l.sg,d.Wh,l.O5,A.ey,B.lW,m.BZ,m.w1,m.fO,m.Dz,m.as,m.nj,f.NW,m.ge,m.ev,m.XQ,m.Gk],pipes:[_.X$,S.v],styles:[""]}),e})();var tt=a(8576),et=a(4382),ot=a(4646);const nt=[{path:"",component:K}];let it=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[I.D,g.g,h.d,l.uU],imports:[[l.ez,tt.q,S.a,et.Bz.forChild(nt),y.Q8.withConfig({spinnerPosition:"right",color:"#red"}),ot.bj]]}),e})()}}]);