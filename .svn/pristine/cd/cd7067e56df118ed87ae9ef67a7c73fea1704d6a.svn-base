"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[2412],{2412:(ht,h,n)=>{n.r(h),n.d(h,{TimeAddStatisticModule:()=>gt});var s=n(6019),b=n(4382),c=n(9133),f=n(8977),M=n(2262),d=n(4176),U=n(1125),T=n(8053),r=n(9839),t=n(3668),A=n(2300),_=n(9594),Z=n(6765),x=n(563),S=n(6154),C=n(888),L=n(5694),p=n(5243),u=n(8167),I=n(6400),F=n(138),v=n(9851),q=n(6731),E=n(86),O=n(9112),y=n(9711);function Q(e,a){if(1&e&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.Q6J("value",i.depId),t.xp6(1),t.hij(" ",i.depName," ")}}function Y(e,a){if(1&e&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.Q6J("value",i.regId),t.xp6(1),t.hij(" ",i.regName," ")}}function D(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(i),t.oxw().tEmployeeControl.reset()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function J(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("onSelectionChange",function(l){const g=t.CHM(i).$implicit;return t.oxw().onchangeTEmployee(l,g)}),t._uU(1),t.qZA()}if(2&e){const i=a.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i.emName," ")}}function B(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(i),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function R(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(i),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function w(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(i),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const i=t.oxw();t.Q6J("disabled",i.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function z(e,a){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function H(e,a){if(1&e&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&e){const i=a.index,o=t.oxw(2);t.xp6(1),t.Oqu(i+1+o.page*o.pageSize)}}function j(e,a){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"timeAddStatisticModule.emNameCol")))}function G(e,a){if(1&e&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.emName)}}function $(e,a){1&e&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"timeAddStatisticModule.emGenderCol"),""))}function P(e,a){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu("M"==i.emGender?"Nam":"N\u1eef")}}function W(e,a){1&e&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"timeAddStatisticModule.emBirthdateCol")," "))}function X(e,a){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,i.emBirthdate,"dd-MM-yyyy"),"")}}function V(e,a){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"timeAddStatisticModule.depNameCol")))}function k(e,a){if(1&e&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.depName)}}function K(e,a){1&e&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"timeAddStatisticModule.regNameCol")))}function tt(e,a){if(1&e&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.regName)}}function et(e,a){1&e&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"timeAddStatisticModule.proNameCol"),""))}function it(e,a){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(i.proName)}}function ot(e,a){1&e&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"timeAddStatisticModule.tiaFromCol"),""))}function at(e,a){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,i.tiaFrom,"dd-MM-yyyy"))}}function nt(e,a){1&e&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"timeAddStatisticModule.tiaToCol"),""))}function lt(e,a){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,i.tiaTo,"dd-MM-yyyy"))}}function dt(e,a){1&e&&t._UZ(0,"tr",49)}function mt(e,a){1&e&&t._UZ(0,"tr",50)}function st(e,a){if(1&e){const i=t.EpF();t.TgZ(0,"div",26),t.TgZ(1,"div",27),t.TgZ(2,"table",28),t.ynx(3,29),t.YNc(4,z,3,3,"th",30),t.YNc(5,H,2,1,"td",31),t.BQk(),t.ynx(6,32),t.YNc(7,j,3,3,"th",30),t.YNc(8,G,2,1,"td",31),t.BQk(),t.ynx(9,33),t.YNc(10,$,3,3,"th",34),t.YNc(11,P,2,1,"td",35),t.BQk(),t.ynx(12,36),t.YNc(13,W,3,3,"th",34),t.YNc(14,X,3,4,"td",35),t.BQk(),t.ynx(15,37),t.YNc(16,V,3,3,"th",30),t.YNc(17,k,2,1,"td",31),t.BQk(),t.ynx(18,38),t.YNc(19,K,3,3,"th",30),t.YNc(20,tt,2,1,"td",31),t.BQk(),t.ynx(21,39),t.YNc(22,et,3,3,"th",34),t.YNc(23,it,2,1,"td",35),t.BQk(),t.ynx(24,40),t.YNc(25,ot,3,3,"th",34),t.YNc(26,at,3,4,"td",35),t.BQk(),t.ynx(27,41),t.YNc(28,nt,3,3,"th",34),t.YNc(29,lt,3,4,"td",35),t.BQk(),t.YNc(30,dt,1,0,"tr",42),t.YNc(31,mt,1,0,"tr",43),t.qZA(),t.TgZ(32,"mat-paginator",44),t.NdJ("page",function(l){return t.CHM(i),t.oxw().onChangePage(l)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const i=t.oxw();t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",i.pageSizeOptions)("pageIndex",i.page)("length",i.totalRow)("disabled",!1)}}let ct=(()=>{class e{constructor(i,o,l,m,g,N){this.dataService=i,this.formBuilder=o,this.notificationService=l,this.pagin=m,this.translateService=g,this.datePipe=N,this.displayedColumns=["position","emName","emGender","emBirthdate","depName","regName","proName","tiaFrom","tiaTo"],this.dataSource=new d.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.totalRow=0,this.totalPage=0,this.disableButton=!0,this.fillterName="",this.emName="",this.preventAbuse=!1,this.tEmployeeControl=new c.NI(""),this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.showList=!1,this.Form=this.formBuilder.group({emName:""})}ngOnInit(){this.getTDepartment(),this.getTRegency(),this.getTEmployee()}getTRegency(){this.dataService.get("TRegency/getall").subscribe(i=>{this.tregency=i},i=>{})}getTDepartment(){this.dataService.get("TDepartment/getall").subscribe(i=>{this.tdepartment=i},i=>{})}getTEmployee(){this.dataService.get("TEmployee/GetAllNoParam").subscribe(i=>{this.temployee=i,this.preventAbuse=!1,this.employeeOptions=this.tEmployeeControl.valueChanges.pipe((0,U.O)(""),(0,T.U)(o=>null==o||"string"==typeof o?o:o.emName),(0,T.U)(o=>o?this._filterTEmployee(o):this.temployee.slice()))},i=>{})}displayFnTEmployee(i){return i&&i.emName?i.emName:""}onchangeTEmployee(i,o){i.source.selected&&this.Form.controls.emName.setValue(o.emName)}_filterTEmployee(i){const o=null==i?void 0:i.toLowerCase();return this.temployee.filter(l=>null==l?void 0:l.emName.toLowerCase().includes(o))}Refresh(){this.fillterName="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.regId=null,this.depId=null,this.emName=null,this.disableButton=!0,this.showList=!1}loadData(){null==this.depId&&(this.depId=""),null==this.regId&&(this.regId=""),this.dataService.get("TimeAddStatistic/GetAll?dateFrom="+this.dateFrom+"&depId="+this.depId+"&regId="+this.regId+"&emName="+this.Form.controls.emName.value+"&page="+this.page+"&pageSize="+this.pageSize).subscribe(o=>{if(this.data=o.items,0==this.data.length)return this.showList=!1,this.translateService.get("messageSystem.staticsNull").subscribe(l=>r.Q.STATISTIC_NULL=l),void this.notificationService.printErrorMessage(r.Q.STATISTIC_NULL);this.data.length>0&&(this.showList=!0,this.disableButton=!1,this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=o.totalCount)},o=>{}),this.loadDataExport()}loadDataExport(){this.dataService.get("TimeAddStatistic/GetAllToExport?dateFrom="+this.dateFrom+"&depId="+this.depId+"&regId="+this.regId+"&emName="+this.Form.controls.emName.value).subscribe(o=>{this.dataExports=o},o=>{})}exportExcel(){this.loadDataExport(),this.dataService.post("TimeAddStatistic/ExportXls",{dateFrom:this.dateFrom,data:this.dataExports}).subscribe(o=>{window.location.href=o.result},o=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(l=>r.Q.EXPORT_FAILSE_MSG=l),this.notificationService.printErrorMessage(r.Q.EXPORT_FAILSE_MSG)})}onChangePage(i){this.page=i.pageIndex,this.pageSize=i.pageSize,this.loadData()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A.D),t.Y36(c.qu),t.Y36(_.g),t.Y36(Z.d),t.Y36(x.sK),t.Y36(s.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-time-add-statistic"]],viewQuery:function(i,o){if(1&i&&(t.Gf(f.NW,5),t.Gf(M.YE,5)),2&i){let l;t.iGM(l=t.CRH())&&(o.paginator=l.first),t.iGM(l=t.CRH())&&(o.sort=l.first)}},decls:57,vars:42,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex",""],["fxFlex","",2,"margin","5px"],["appearance","outline"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["invalidAutocompleteString","","type","text","aria-label","","matInput","",3,"placeholder","formControl","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"displayWith"],["autoEmployee","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["matInput","","type","date","required","",3,"ngModel","ngModelChange"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],[3,"value"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value","onSelectionChange"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emName"],["matColumnDef","emGender"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","emBirthdate"],["matColumnDef","depName"],["matColumnDef","regName"],["matColumnDef","proName"],["matColumnDef","tiaFrom"],["matColumnDef","tiaTo"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of timeAddStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-row",""],["mat-row",""]],template:function(i,o){if(1&i&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"mat-form-field",6),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"mat-select",7),t.NdJ("ngModelChange",function(m){return o.depId=m}),t.YNc(18,Q,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",5),t.TgZ(20,"mat-form-field",6),t.TgZ(21,"mat-label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"mat-select",7),t.NdJ("ngModelChange",function(m){return o.regId=m}),t.YNc(25,Y,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t._UZ(26,"div",4),t.qZA(),t.TgZ(27,"div",3),t._UZ(28,"div",4),t.TgZ(29,"div",5),t.TgZ(30,"mat-form-field",6),t.TgZ(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"input",9),t.ALo(35,"translate"),t.YNc(36,D,3,0,"button",10),t.TgZ(37,"mat-autocomplete",11,12),t.YNc(39,J,2,2,"mat-option",13),t.ALo(40,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",5),t.TgZ(42,"mat-form-field",6),t.TgZ(43,"mat-label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"input",14),t.NdJ("ngModelChange",function(m){return o.dateFrom=m}),t.qZA(),t.qZA(),t.qZA(),t._UZ(47,"div",4),t.qZA(),t.TgZ(48,"div",15),t.YNc(49,B,3,3,"button",16),t.ALo(50,"userRoles"),t.YNc(51,R,3,3,"button",17),t.ALo(52,"userRoles"),t.YNc(53,w,3,4,"button",18),t.ALo(54,"userRoles"),t.qZA(),t.YNc(55,st,33,8,"div",19),t.ALo(56,"userRoles"),t.qZA(),t.qZA()),2&i){const l=t.MAs(38);t.xp6(5),t.Oqu(t.lcZ(6,20,"timeAddStatisticModule.title")),t.xp6(10),t.Oqu(t.lcZ(16,22,"timeAddStatisticModule.depNameCol")),t.xp6(2),t.Q6J("ngModel",o.depId),t.xp6(1),t.Q6J("ngForOf",o.tdepartment),t.xp6(4),t.Oqu(t.lcZ(23,24,"timeAddStatisticModule.regNameCol")),t.xp6(2),t.Q6J("ngModel",o.regId),t.xp6(1),t.Q6J("ngForOf",o.tregency),t.xp6(7),t.Oqu(t.lcZ(33,26,"timeAddStatisticModule.emNameCol")),t.xp6(2),t.s9C("placeholder",t.lcZ(35,28,"timeAddStatisticModule.emNameCol")),t.Q6J("formControl",o.tEmployeeControl)("matAutocomplete",l),t.xp6(2),t.Q6J("ngIf",o.tEmployeeControl.value),t.xp6(1),t.Q6J("displayWith",o.displayFnTEmployee),t.xp6(2),t.Q6J("ngForOf",t.lcZ(40,30,o.employeeOptions)),t.xp6(5),t.Oqu(t.lcZ(45,32,"timeAddStatisticModule.tiaFromCol")),t.xp6(2),t.Q6J("ngModel",o.dateFrom),t.xp6(3),t.Q6J("ngIf",t.lcZ(50,34,"ViewTimeAddStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(52,36,"ViewTimeAddStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(54,38,"ExportTimeAddStatistic")),t.xp6(2),t.Q6J("ngIf",t.lcZ(56,40,o.showList&&"ViewTimeAddStatistic"))}},directives:[S.Yh,C.a8,C.n5,L.d,p.xw,p.yH,u.KE,u.hX,I.gD,c.JJ,c.On,s.sg,F.Nt,c.Fj,v.ZL,c.oH,s.O5,v.XC,c.Q7,p.Wh,q.ey,E.lW,u.R9,O.Hw,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,f.NW,d.ge,d.ev,d.XQ,d.Gk],pipes:[x.X$,s.Ov,y.v,s.uU],styles:[""]}),e})();var rt=n(4646),pt=n(8576);const ut=[{path:"",component:ct}];let gt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[A.D,_.g,Z.d,s.uU],imports:[[s.ez,pt.q,y.a,b.Bz.forChild(ut),S.Q8.withConfig({spinnerPosition:"right",color:"#red"}),rt.bj]]}),e})()}}]);