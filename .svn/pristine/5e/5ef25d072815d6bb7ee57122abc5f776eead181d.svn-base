"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[7948],{7948:(lt,A,r)=>{r.r(A),r.d(A,{AProjectModule:()=>ct});var _=r(6019),P=r(5351),c=r(9133),x=r(8977),L=r(2262),l=r(4176),y=r(1125),N=r(8053),p=r(9839),t=r(3668),v=r(2300),u=r(5304),Z=r(9594),S=r(6765),b=r(563),j=r(6154),C=r(888),E=r(5694),h=r(5243),g=r(8167),M=r(5498),F=r(138),I=r(86),D=r(904),k=r(7444),Q=r(9112),T=r(9711);const O=["dialog"];function R(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialog("create")}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.createButton")," "))}function J(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",0==e.selection.selected.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.deleteButton")," ")}}function w(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"th",31),t.TgZ(1,"mat-checkbox",32),t.NdJ("change",function(i){t.CHM(e);const s=t.oxw(2);return i?s.masterToggle():null}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function q(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",33),t.TgZ(1,"mat-checkbox",34),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const m=t.CHM(e).$implicit,d=t.oxw(2);return i?d.selection.toggle(m):null}),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("checked",a.selection.isSelected(e))("aria-label",a.checkboxLabel(e))}}function U(o,n){1&o&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function Y(o,n){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&o){const e=n.index,a=t.oxw(2);t.xp6(1),t.Oqu(e+1+a.page*a.pageSize)}}function B(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"aProjectModule.projectNameCol")))}function G(o,n){if(1&o&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.proName)}}function H(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"aProjectModule.proStatusCol")))}function z(o,n){if(1&o&&(t.TgZ(0,"td",33),t.TgZ(1,"mat-checkbox",37),t.NdJ("click",function(a){return a.preventDefault()}),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("disableRipple",!0)("checked",e.proStatus)}}function V(o,n){1&o&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.actionCol")))}function $(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(2).openDialog("edit",i)}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"button.editButton"))}function W(o,n){1&o&&(t.TgZ(0,"td",33),t.YNc(1,$,4,3,"a",39),t.ALo(2,"userRoles"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,"UpdateAProject")))}function K(o,n){1&o&&t._UZ(0,"tr",41)}function X(o,n){1&o&&t._UZ(0,"tr",42)}function tt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"div",16),t.TgZ(2,"table",17),t.ynx(3,18),t.YNc(4,w,2,3,"th",19),t.YNc(5,q,2,2,"td",20),t.BQk(),t.ynx(6,21),t.YNc(7,U,3,3,"th",22),t.YNc(8,Y,2,1,"td",20),t.BQk(),t.ynx(9,23),t.YNc(10,B,3,3,"th",24),t.YNc(11,G,2,1,"td",20),t.BQk(),t.ynx(12,25),t.YNc(13,H,3,3,"th",24),t.YNc(14,z,2,2,"td",20),t.BQk(),t.ynx(15,26),t.YNc(16,V,3,3,"th",27),t.YNc(17,W,3,3,"td",20),t.BQk(),t.YNc(18,K,1,0,"tr",28),t.YNc(19,X,1,0,"tr",29),t.qZA(),t.qZA(),t.TgZ(20,"mat-paginator",30),t.NdJ("page",function(i){return t.CHM(e),t.oxw().onChangePage(i)}),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.page)("length",e.totalRow)("disabled",!1)}}function et(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"aProjectModule.proName.Required")," "))}function ot(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",43),t.NdJ("submit",function(){return t.CHM(e),t.oxw().addData()}),t.TgZ(1,"h2",44),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-dialog-content",45),t.TgZ(5,"mat-form-field",46),t.TgZ(6,"mat-label"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"input",47,48),t.ALo(11,"translate"),t.TgZ(12,"mat-hint",49),t._uU(13),t.qZA(),t.YNc(14,et,3,3,"mat-error",50),t.qZA(),t.qZA(),t.TgZ(15,"mat-checkbox",51),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-dialog-actions",52),t.TgZ(19,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().onReset()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"button",54),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.MAs(10),a=t.oxw();t.Q6J("formGroup",a.projectForm),t.xp6(2),t.Oqu(t.lcZ(3,10,a.title)),t.xp6(5),t.Oqu(t.lcZ(8,12,"aProjectModule.projectNameCol")),t.xp6(2),t.s9C("placeholder",t.lcZ(11,14,"aProjectModule.projectNameCol")),t.xp6(4),t.hij("",e.value.length," / 200"),t.xp6(1),t.Q6J("ngIf",a.getValidForm.proName.hasError("required")),t.xp6(2),t.Oqu(t.lcZ(17,16,"aProjectModule.proStatusCol")),t.xp6(4),t.Oqu(t.lcZ(21,18,"button.cancelButton")),t.xp6(2),t.Q6J("disabled",a.preventAbuse),t.xp6(1),t.Oqu(t.lcZ(24,20,"button.saveButton"))}}let at=(()=>{class o{constructor(e,a,i,s,m,d){this.dataService=e,this.dialog=a,this.notificationService=i,this.pagin=s,this.translateService=m,this.formBuilder=d,this.displayedColumns=["select","position","projectName","proStatus","action"],this.dataSource=new l.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.selection=new P.Ov(!0,[]),this.action="",this.title="",this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.ProjectParentControl=new c.NI,this.projectForm=this.formBuilder.group({proId:"",proName:["",c.kI.compose([c.kI.required,c.kI.maxLength(200)])],proStatus:""}),this.filteredOptions=this.ProjectParentControl.valueChanges.pipe((0,y.O)(""),(0,N.U)(f=>f))}ngOnInit(){this.getAprojectListPaging()}openDialog(e,a,i){if(this.action=e,"create"==e)this.translateService.get("aProjectModule.createMessage").subscribe(m=>this.title=m),this.projectForm.controls.proStatus.setValue(!0);else{this.translateService.get("aProjectModule.editMessage").subscribe(d=>this.title=d),this.projectForm.controls.proId.setValue(a.proId);let m=this.dataSource.filteredData.filter(d=>d.proId==a.proId)[0];this.projectForm.controls.proName.setValue(m.proName),this.projectForm.controls.proStatus.setValue(m.proStatus)}const s=this.dialog.open(this.dialogTemplate,{width:"650px"});s.disableClose=!0,s.afterClosed().subscribe(m=>{this.onReset()})}onReset(){this.dialog.closeAll(),this.projectForm.reset()}getAprojectListPaging(){this.preventAbuse=!0,this.dataService.get("AProject/getlistpaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(e=>{this.dataSource=new l.by(e.items),this.dataSource.sort=this.sort,this.totalRow=e.totalCount,this.preventAbuse=!1},e=>{this.preventAbuse=!1,this.translateService.get("messageSystem.loadFail").subscribe(a=>p.Q.GET_FAILSE_MSG=a),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG)})}applyFilter(e){this.keyword=e.target.value,this.page=0,this.getAprojectListPaging(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}get getValidForm(){return this.projectForm.controls}getParentId(e){this.projectForm.controls.proParentId.setValue(e.proId)}addData(){this.projectForm.invalid||(this.preventAbuse=!0,"create"==this.action?this.dataService.post("AProject/create",{proName:this.projectForm.controls.proName.value,proStatus:this.projectForm.controls.proStatus.value}).subscribe(a=>{let i;this.translateService.get("messageSystem.createSuccess").subscribe(s=>i=s),this.notificationService.printSuccessMessage(i),this.getAprojectListPaging(),this.dialog.closeAll(),this.onReset()},a=>{let i;this.preventAbuse=!1,this.translateService.get("messageSystem.createFail").subscribe(s=>i=s),this.notificationService.printErrorMessage(a)}):"edit"==this.action&&this.dataService.put("AProject/update",{proName:this.projectForm.controls.proName.value,proId:this.projectForm.controls.proId.value,proStatus:this.projectForm.controls.proStatus.value}).subscribe(a=>{let i;this.translateService.get("messageSystem.updateSuccess").subscribe(s=>i=s),this.notificationService.printSuccessMessage(i),this.getAprojectListPaging(),this.dialog.closeAll(),this.onReset()},a=>{let i;this.preventAbuse=!1,this.translateService.get("messageSystem.updateFail").subscribe(s=>i=s),this.notificationService.printErrorMessage(a)}),this.onReset())}removeData(){let e=[];this.selection.selected.forEach(a=>{e.push(a.proId)}),this.translateService.get("messageSystem.confirmDelete").subscribe(a=>p.Q.CONFIRM_DELETE_MSG=a),this.notificationService.printConfirmationDialog(p.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(e)))}deleteItemConfirm(e){this.preventAbuse=!0,this.dataService.delete("AProject/deletemulti","checkedList",e).subscribe(a=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(i=>p.Q.DELETED_OK_MSG=i),this.translateService.get("messageSystem.deleteFail").subscribe(i=>p.Q.DELETE_FAILSE_MSG=i),a[0]>0&&this.notificationService.printSuccessMessage(p.Q.DELETED_OK_MSG+a[0]),a[1]>0&&this.notificationService.printErrorMessage(p.Q.DELETE_FAILSE_MSG+a[1]),this.selection.clear(),this.getAprojectListPaging()},a=>{this.translateService.get("messageSystem.deletefail").subscribe(i=>p.Q.DELETE_FAILSE_MSG=i),this.notificationService.printErrorMessage(p.Q.DELETE_FAILSE_MSG)}),this.preventAbuse=!1}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onChangePage(e){this.page=e.pageIndex,this.pageSize=e.pageSize,this.getAprojectListPaging()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.D),t.Y36(u.uw),t.Y36(Z.g),t.Y36(S.d),t.Y36(b.sK),t.Y36(c.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-a-project"]],viewQuery:function(e,a){if(1&e&&(t.Gf(x.NW,5),t.Gf(L.YE,5),t.Gf(O,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first),t.iGM(i=t.CRH())&&(a.dialogTemplate=i.first)}},decls:29,vars:18,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","start center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","projectName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","proStatus"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],[2,"margin-left","30px",3,"disableRipple","checked","click"],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["action","",3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline"],["matInput","","formControlName","proName","maxlength","200","required","",3,"placeholder"],["name",""],["align","end"],[4,"ngIf"],["formControlName","proStatus",2,"margin-bottom","6px"],["align","center"],["mat-stroked-button","","color","warn","mat-dialog-close","",3,"click"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"]],template:function(e,a){1&e&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"div"),t.TgZ(4,"mat-card-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-divider"),t._UZ(8,"br"),t._UZ(9,"br"),t.TgZ(10,"div",3),t.TgZ(11,"div",4),t.YNc(12,R,3,3,"button",5),t.ALo(13,"userRoles"),t.YNc(14,J,3,4,"button",6),t.ALo(15,"userRoles"),t.qZA(),t._UZ(16,"div",7),t.TgZ(17,"div",7),t.TgZ(18,"mat-form-field",8),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",9,10),t.NdJ("keyup",function(s){return a.applyFilter(s)}),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(25,tt,21,8,"div",11),t.ALo(26,"userRoles"),t.qZA(),t.YNc(27,ot,25,22,"ng-template",null,12,t.W1O)),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,6,"aProjectModule.title")),t.xp6(7),t.Q6J("ngIf",t.lcZ(13,8,"CreateAProject")),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,10,"DeleteAProject")),t.xp6(6),t.hij(" ",t.lcZ(21,12,"button.searchButton"),""),t.xp6(2),t.s9C("placeholder",t.lcZ(24,14,"button.searchPlaceholder")),t.xp6(3),t.Q6J("ngIf",t.lcZ(26,16,"ViewAProject")))},directives:[j.Yh,C.a8,C.n5,E.d,h.xw,h.yH,h.Wh,_.O5,g.KE,M.oO,g.hX,F.Nt,I.lW,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,x.NW,l.ge,D.oG,l.ev,k.gM,Q.Hw,l.XQ,l.Gk,c._Y,c.JL,c.sg,u.uh,u.xY,c.Fj,c.JJ,c.u,c.nD,c.Q7,g.bx,u.H8,u.ZT,g.TO],pipes:[b.X$,T.v],styles:[""]}),o})();var it=r(4382),rt=r(8576),nt=r(4646);const st=[{path:"",component:at}];let ct=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[v.D,Z.g,S.d],imports:[[_.ez,rt.q,T.a,it.Bz.forChild(st),j.Q8.withConfig({spinnerPosition:"right",color:"#red"}),nt.bj]]}),o})()}}]);