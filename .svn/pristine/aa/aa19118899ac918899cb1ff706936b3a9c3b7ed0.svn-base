"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[5023],{5023:(Ze,v,n)=>{n.r(v),n.d(v,{TGroupaccessModule:()=>Ce});var f=n(6019);class M{constructor(i,t,s){this.id=i,this.name=t,this.childrens=s}}var E=n(4544),g=n(1423),S=n(5351),u=n(9133),b=n(8977),F=n(2262),d=n(4176),C=n(1125),T=n(8053),p=n(9839),e=n(3668),Z=n(2300),h=n(5304),G=n(9594),N=n(6765),L=n(563),k=n(6154),y=n(888),q=n(5694),A=n(5243),_=n(8167),Q=n(5498),J=n(138),w=n(86),O=n(904),U=n(7444),R=n(9112),D=n(9851),Y=n(6731),I=n(9711);const P=["dialog"],H=["dialogTGAD"];function j(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialog("create")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"button.createButton")," "))}function B(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeData()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",0==t.selection.selected.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"button.deleteButton")," ")}}function z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().openDialogTGAD()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"tGroupAcessDetailModule.title")," "))}function $(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"th",34),e.TgZ(1,"mat-checkbox",35),e.NdJ("change",function(a){e.CHM(t);const c=e.oxw(2);return a?c.masterToggle():null}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function V(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"td",36),e.TgZ(1,"mat-checkbox",37),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const r=e.CHM(t).$implicit,m=e.oxw(2);return a?m.selection.toggle(r):null}),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("checked",s.selection.isSelected(t))("aria-label",s.checkboxLabel(t))}}function W(o,i){1&o&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.positionCol")))}function X(o,i){if(1&o&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&o){const t=i.index,s=e.oxw(2);e.xp6(1),e.Oqu(t+1+s.page*s.pageSize)}}function K(o,i){1&o&&(e.TgZ(0,"th",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"tGroupAccessModule.groupaccessNameCol"),""))}function ee(o,i){if(1&o&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Oqu(t.gaName)}}function te(o,i){1&o&&(e.TgZ(0,"th",39),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij("",e.lcZ(2,1,"tGroupAccessModule.gaStatusCol")," "))}function se(o,i){if(1&o&&(e.TgZ(0,"td",36),e.TgZ(1,"mat-checkbox",40),e.NdJ("click",function(s){return s.preventDefault()}),e.qZA(),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("disableRipple",!0)("checked",t.gaStatus)}}function oe(o,i){1&o&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"button.actionCol")))}function ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(2).openDialog("edit",a)}),e.ALo(1,"translate"),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA()}2&o&&e.s9C("matTooltip",e.lcZ(1,1,"button.editButton"))}function ce(o,i){1&o&&(e.TgZ(0,"td",36),e.YNc(1,ae,4,3,"a",42),e.ALo(2,"userRoles"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,"UpdateTGroupAccess")))}function ie(o,i){1&o&&e._UZ(0,"tr",44)}function ne(o,i){1&o&&e._UZ(0,"tr",45)}function re(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"div",19),e.TgZ(2,"table",20),e.ynx(3,21),e.YNc(4,$,2,3,"th",22),e.YNc(5,V,2,2,"td",23),e.BQk(),e.ynx(6,24),e.YNc(7,W,3,3,"th",25),e.YNc(8,X,2,1,"td",23),e.BQk(),e.ynx(9,26),e.YNc(10,K,3,3,"th",27),e.YNc(11,ee,2,1,"td",23),e.BQk(),e.ynx(12,28),e.YNc(13,te,3,3,"th",27),e.YNc(14,se,2,2,"td",23),e.BQk(),e.ynx(15,29),e.YNc(16,oe,3,3,"th",30),e.YNc(17,ce,3,3,"td",23),e.BQk(),e.YNc(18,ie,1,0,"tr",31),e.YNc(19,ne,1,0,"tr",32),e.qZA(),e.qZA(),e.TgZ(20,"mat-paginator",33),e.NdJ("page",function(a){return e.CHM(t),e.oxw().onChangePage(a)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",t.pageSizeOptions)("pageIndex",t.page)("length",t.totalRow)("disabled",!1)}}function le(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"tGroupAccessModule.gaNameRequired")," "))}function ue(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",46),e.NdJ("submit",function(){return e.CHM(t),e.oxw().addData()}),e.TgZ(1,"h2",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",48),e.TgZ(5,"mat-form-field",49),e.TgZ(6,"mat-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",50,51),e.ALo(11,"translate"),e.TgZ(12,"mat-hint",52),e._uU(13),e.qZA(),e.YNc(14,le,3,3,"mat-error",53),e.qZA(),e.qZA(),e.TgZ(15,"mat-checkbox",54),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"mat-dialog-actions",55),e.TgZ(19,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",57),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(10),s=e.oxw();e.Q6J("formGroup",s.groupAccessForm),e.xp6(2),e.Oqu(e.lcZ(3,10,s.title)),e.xp6(5),e.Oqu(e.lcZ(8,12,"tGroupAccessModule.groupaccessNameCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(11,14,"tGroupAccessModule.groupaccessNameCol")),e.xp6(4),e.hij("",t.value.length," / 50"),e.xp6(1),e.Q6J("ngIf",s.getValidForm.gaName.hasError("required")),e.xp6(2),e.Oqu(e.lcZ(17,16,"tGroupAccessModule.gaStatusCol")),e.xp6(4),e.Oqu(e.lcZ(21,18,"button.cancelButton")),e.xp6(2),e.Q6J("disabled",s.preventAbuse),e.xp6(1),e.Oqu(e.lcZ(24,20,"button.saveButton"))}}function pe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",71),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return a.tGroupAccessControl.reset(),a.resetTreeChecked()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e.qZA()}}function de(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",72),e.NdJ("onSelectionChange",function(a){const r=e.CHM(t).$implicit;return e.oxw(2).onchangeTGroupAccess(a,r)}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.gaName," ")}}function me(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"tGroupAcessDetailModule.tGroupAccessRequired")," "))}function ge(o,i){1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"tGroupAcessDetailModule.tGroupAccessChooseRequired")," "))}function he(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-tree-node",73),e._UZ(1,"button",74),e.TgZ(2,"mat-checkbox",75),e.NdJ("change",function(){const c=e.CHM(t).$implicit;return e.oxw(2).todoLeafItemSelectionToggle(c)}),e._uU(3),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,s=e.oxw(2);e.xp6(2),e.Q6J("checked",s.checklistSelection.isSelected(t)),e.xp6(1),e.hij("",t.name," ")}}function _e(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-tree-node",76),e.TgZ(1,"button",77),e.TgZ(2,"mat-icon",78),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"mat-checkbox",79),e.NdJ("change",function(){const c=e.CHM(t).$implicit;return e.oxw(2).todoItemSelectionToggle(c)}),e._uU(5),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,s=e.oxw(2);e.xp6(1),e.uIk("aria-label","toggle "+t.filename),e.xp6(2),e.hij(" ",s.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(1),e.Q6J("checked",s.descendantsAllSelected(t))("indeterminate",s.descendantsPartiallySelected(t)),e.xp6(1),e.hij(" ",t.name,"")}}function fe(o,i){if(1&o&&(e.TgZ(0,"button",57),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("disabled",t.preventAbuse2),e.xp6(1),e.Oqu(e.lcZ(2,2,"button.saveButton"))}}function Te(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"form",58),e.NdJ("submit",function(){return e.CHM(t),e.oxw().saveTGAD()}),e.TgZ(1,"h2",47),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-dialog-content",48),e.TgZ(5,"div",59),e.TgZ(6,"div",60),e.TgZ(7,"mat-form-field",61),e.TgZ(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",62),e.ALo(12,"translate"),e.YNc(13,pe,3,0,"button",63),e.TgZ(14,"mat-autocomplete",64,65),e.YNc(16,de,2,2,"mat-option",66),e.ALo(17,"async"),e.qZA(),e.YNc(18,me,3,3,"mat-error",53),e.YNc(19,ge,3,3,"mat-error",53),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"mat-tree",67),e.YNc(21,he,4,2,"mat-tree-node",68),e.YNc(22,_e,6,5,"mat-tree-node",69),e.qZA(),e.qZA(),e.TgZ(23,"mat-dialog-actions",55),e.TgZ(24,"button",56),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCloseDialogTGADt()}),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.YNc(27,fe,3,4,"button",70),e.ALo(28,"userRoles"),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(15),s=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,15,"tGroupAcessDetailModule.title")),e.xp6(7),e.Oqu(e.lcZ(10,17,"tGroupAcessDetailModule.tGroupAccessNameCol")),e.xp6(2),e.s9C("placeholder",e.lcZ(12,19,"tGroupAcessDetailModule.tGroupAccessNameCol")),e.Q6J("formControl",s.tGroupAccessControl)("matAutocomplete",t),e.xp6(2),e.Q6J("ngIf",s.tGroupAccessControl.value),e.xp6(1),e.Q6J("displayWith",s.displayFnTdevType),e.xp6(2),e.Q6J("ngForOf",e.lcZ(17,21,s.optionsTGroupAccess)),e.xp6(2),e.Q6J("ngIf",s.tGroupAccessControl.hasError("required")),e.xp6(1),e.Q6J("ngIf",!s.tGroupAccessControl.hasError("required")&&s.tGroupAccessControl.hasError("invalidAutocompleteObject")),e.xp6(1),e.Q6J("dataSource",s.dataTreeSource)("treeControl",s.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",s.hasChild),e.xp6(3),e.Oqu(e.lcZ(26,23,"button.cancelButton")),e.xp6(2),e.Q6J("ngIf",e.lcZ(28,25,"SetTGrouAccessDetail"))}}let Ae=(()=>{class o{constructor(t,s,a,c,r,m){this.dataService=t,this.dialog=s,this.notificationService=a,this.pagin=c,this.translateService=r,this.formBuilder=m,this.displayedColumns=["select","position","gaName","gaStatus","action"],this.dataSource=new d.by,this.preventAbuse=!1,this.page=0,this.keyword="",this.totalRow=0,this.totalPage=0,this.selection=new S.Ov(!0,[]),this.action="",this.title="",this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.isAllChecked=!1,this.GroupAccessParentControl=new u.NI,this.tGroupAccessControl=new u.NI("",{validators:[this.autocompleteObjectValidator(),u.kI.required]}),this.preventAbuse2=!1,this.gaId=0,this._transformer=(l,x)=>({expandable:!!l.childrens&&l.childrens.length>0,name:l.name,level:x,id:l.id}),this.treeControl=new E.C2(l=>l.level,l=>l.expandable),this.treeFlattener=new g.JZ(this._transformer,l=>l.level,l=>l.expandable,l=>l.childrens),this.dataTreeSource=new g.kc(this.treeControl,this.treeFlattener),this.checklistSelection=new S.Ov(!0),this.hasChild=(l,x)=>x.expandable,this.getLevel=l=>l.level,this.groupAccessForm=this.formBuilder.group({gaId:"",gaName:["",u.kI.compose([u.kI.required,u.kI.maxLength(50)])],gaStatus:""}),this.filteredOptions=this.GroupAccessParentControl.valueChanges.pipe((0,C.O)(""),(0,T.U)(l=>l))}ngOnInit(){this.loadTGroupAccessListPaging(),this.loadTreeAZoneTDevice()}openDialog(t,s,a){if(this.action=t,"create"==t)this.translateService.get("tGroupAccessModule.createMessage").subscribe(r=>this.title=r),this.groupAccessForm.controls.gaStatus.setValue(!0);else{this.translateService.get("tGroupAccessModule.editMessage").subscribe(m=>this.title=m),this.groupAccessForm.controls.gaId.setValue(s.gaId);let r=this.dataSource.filteredData.filter(m=>m.gaId==s.gaId)[0];this.groupAccessForm.controls.gaName.setValue(r.gaName),this.groupAccessForm.controls.gaStatus.setValue(r.gaStatus)}const c=this.dialog.open(this.dialogTemplate,{width:"650px"});c.disableClose=!0,c.afterClosed().subscribe(r=>{this.onReset()})}onReset(){this.dialog.closeAll(),this.groupAccessForm.reset()}loadTGroupAccessListPaging(){this.preventAbuse=!0,this.dataService.get("TGroupAccess/getlistpaging?page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(t=>{this.dataSource=new d.by(t.items),this.dataSource.sort=this.sort,this.totalRow=t.totalCount,this.preventAbuse=!1},t=>{this.preventAbuse=!1,this.translateService.get("messageSystem.loadFail").subscribe(s=>p.Q.GET_FAILSE_MSG=s),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG)})}applyFilter(t){this.keyword=t.target.value,this.page=0,this.loadTGroupAccessListPaging(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}get getValidForm(){return this.groupAccessForm.controls}addData(){this.groupAccessForm.invalid||(this.preventAbuse=!0,"create"==this.action?this.dataService.post("TGroupAccess/create",{gaName:this.groupAccessForm.controls.gaName.value,gaStatus:this.groupAccessForm.controls.gaStatus.value}).subscribe(s=>{let a;this.translateService.get("messageSystem.createSuccess").subscribe(c=>a=c),this.notificationService.printSuccessMessage(a),this.loadTGroupAccessListPaging(),this.dialog.closeAll(),this.onReset()},s=>{let a;this.preventAbuse=!1,this.translateService.get("messageSystem.createFail").subscribe(c=>a=c),this.notificationService.printErrorMessage(s)}):"edit"==this.action&&this.dataService.put("TGroupAccess/update",{gaName:this.groupAccessForm.controls.gaName.value,gaId:this.groupAccessForm.controls.gaId.value,gaStatus:this.groupAccessForm.controls.gaStatus.value}).subscribe(s=>{let a;this.translateService.get("messageSystem.updateSuccess").subscribe(c=>a=c),this.notificationService.printSuccessMessage(a),this.loadTGroupAccessListPaging(),this.dialog.closeAll(),this.onReset()},s=>{let a;this.preventAbuse=!1,this.translateService.get("messageSystem.updateFail").subscribe(c=>a=c),this.notificationService.printErrorMessage(s)}),this.onReset())}removeData(){let t=[];this.selection.selected.forEach(s=>{t.push(s.gaId)}),this.translateService.get("messageSystem.confirmDelete").subscribe(s=>p.Q.CONFIRM_DELETE_MSG=s),this.notificationService.printConfirmationDialog(p.Q.CONFIRM_DELETE_MSG,()=>this.deleteItemConfirm(JSON.stringify(t)))}deleteItemConfirm(t){this.preventAbuse=!0,this.dataService.delete("TGroupAccess/deletemulti","checkedList",t).subscribe(s=>{this.translateService.get("messageSystem.deleteSuccess").subscribe(a=>p.Q.DELETED_OK_MSG=a),this.notificationService.printSuccessMessage(p.Q.DELETED_OK_MSG),this.selection.clear(),this.loadTGroupAccessListPaging()},s=>{this.preventAbuse=!1,this.translateService.get("messageSystem.deletefail").subscribe(a=>p.Q.DELETE_FAILSE_MSG=a),this.notificationService.printErrorMessage(p.Q.DELETE_FAILSE_MSG)})}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel=this.pagin.setLable,this.paginator._intl.firstPageLabel=this.pagin.firstButton,this.paginator._intl.nextPageLabel=this.pagin.nextButton,this.paginator._intl.lastPageLabel=this.pagin.lastButton,this.paginator._intl.previousPageLabel=this.pagin.preButton}onChangePage(t){this.page=t.pageIndex,this.pageSize=t.pageSize,this.loadTGroupAccessListPaging()}openDialogTGAD(){this.loadAllTGroupAccess()}onCloseDialogTGADt(){this.dialog.closeAll(),this.tGroupAccessControl.reset()}resetTreeChecked(){this.treeControl.dataNodes.forEach(t=>{this.checklistSelection.deselect(t)})}loadAllTGroupAccess(){this.preventAbuse2=!0,this.dataService.get("tgroupaccess/getall").subscribe(t=>{this.preventAbuse2=!1,this.tGroupAccess=t,this.optionsTGroupAccess=this.tGroupAccessControl.valueChanges.pipe((0,C.O)(""),(0,T.U)(a=>null==a||"string"==typeof a?a:a.gaName),(0,T.U)(a=>a?this._filterTGroupAccess(a):this.tGroupAccess.slice()));const s=this.dialog.open(this.dialogTemplateTGAD,{width:"650px",autoFocus:!1});s.disableClose=!0,this.treeControl.expandAll(),this.resetTreeChecked(),s.afterClosed().subscribe(a=>{this.onCloseDialogTGADt()})},t=>{this.translateService.get("messageSystem.loadFail").subscribe(s=>p.Q.GET_FAILSE_MSG=s),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG),this.preventAbuse2=!1})}autocompleteObjectValidator(){return t=>"string"==typeof t.value?{invalidAutocompleteObject:{value:t.value}}:null}_filterTGroupAccess(t){const s=null==t?void 0:t.toLowerCase();return this.tGroupAccess.filter(a=>null==a?void 0:a.gaName.toLowerCase().includes(s))}displayFnTdevType(t){return t&&t.gaName?t.gaName:""}onchangeTGroupAccess(t,s){this.resetTreeChecked(),t.source.selected&&(this.gaId=s.gaId,this.preventAbuse2=!0,this.dataService.get("TGroupAccessDetail/getbygaid/"+this.gaId).subscribe(a=>{let c=a;this.treeControl.dataNodes.filter(r=>2==r.level).forEach(r=>{c.indexOf(r.id)>=0&&(this.checklistSelection.select(r),this.checkAllParentsSelection(r))}),this.preventAbuse2=!1},a=>{this.translateService.get("messageSystem.loadFail").subscribe(c=>p.Q.GET_FAILSE_MSG=c),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG),this.preventAbuse2=!1}))}saveTGAD(){if(this.tGroupAccessControl.invalid)return;let t=[];this.treeControl.dataNodes.filter(a=>2==a.level).forEach(a=>{this.checklistSelection.selected.filter(c=>2==c.level).indexOf(a)>=0?t.push({devId:a.id,selected:!0}):t.push({devId:a.id,selected:!1})});let s={gaId:this.gaId,deviceItemMappings:t};this.preventAbuse2=!0,this.dataService.put("TGroupAccessDetail/settgrouaccessdetail",s).subscribe(a=>{let c;this.translateService.get("messageSystem.updateSuccess").subscribe(r=>c=r),this.notificationService.printSuccessMessage(c),this.preventAbuse2=!1},a=>{let c;this.preventAbuse2=!1,this.translateService.get("messageSystem.updateFail").subscribe(r=>c=r),this.notificationService.printErrorMessage(c)})}loadTreeAZoneTDevice(){this.preventAbuse2=!0,this.dataService.get("TGroupAccessDetail/gettreeazonetdevice").subscribe(t=>{this.preventAbuse2=!1;let s="";this.translateService.get("tGroupAcessDetailModule.parentTreeTitle").subscribe(c=>s=c);let a=[new M(0,s,t)];this.dataTreeSource.data=a},t=>{this.translateService.get("messageSystem.loadFail").subscribe(s=>p.Q.GET_FAILSE_MSG=s),this.notificationService.printErrorMessage(p.Q.GET_FAILSE_MSG),this.preventAbuse2=!1})}descendantsAllSelected(t){return this.treeControl.getDescendants(t).every(a=>this.checklistSelection.isSelected(a))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(c=>this.checklistSelection.isSelected(c))&&!this.descendantsAllSelected(t)}todoItemSelectionToggle(t){this.checklistSelection.toggle(t);const s=this.treeControl.getDescendants(t);this.checklistSelection.isSelected(t)?this.checklistSelection.select(...s):this.checklistSelection.deselect(...s)}todoLeafItemSelectionToggle(t){this.checklistSelection.toggle(t),this.checkAllParentsSelection(t)}checkAllParentsSelection(t){let s=this.getParentNode(t);for(;s;)this.checkRootNodeSelection(s),s=this.getParentNode(s)}getParentNode(t){const s=this.getLevel(t);if(s<1)return null;for(let c=this.treeControl.dataNodes.indexOf(t)-1;c>=0;c--){const r=this.treeControl.dataNodes[c];if(this.getLevel(r)<s)return r}return null}checkRootNodeSelection(t){const s=this.checklistSelection.isSelected(t),a=this.treeControl.getDescendants(t),c=a.length>0&&a.every(r=>this.checklistSelection.isSelected(r));s&&!c?this.checklistSelection.deselect(t):!s&&c&&this.checklistSelection.select(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.D),e.Y36(h.uw),e.Y36(G.g),e.Y36(N.d),e.Y36(L.sK),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-t-groupaccess"]],viewQuery:function(t,s){if(1&t&&(e.Gf(b.NW,5),e.Gf(F.YE,5),e.Gf(P,5),e.Gf(H,5)),2&t){let a;e.iGM(a=e.CRH())&&(s.paginator=a.first),e.iGM(a=e.CRH())&&(s.sort=a.first),e.iGM(a=e.CRH())&&(s.dialogTemplate=a.first),e.iGM(a=e.CRH())&&(s.dialogTemplateTGAD=a.first)}},decls:33,vars:21,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","row","fxLayout.xs","column"],["fxFlex","","fxLayoutAlign","start center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["color","warn","mat-raised-button","",3,"disabled","click",4,"ngIf"],["mat-raised-button","",3,"click",4,"ngIf"],["fxFlex",""],["appearance","standard","ngClass.md","width100"],["matInput","",3,"placeholder","keyup"],["inputSearch",""],["class","mat-elevation-z8 table-container",4,"ngIf"],["dialog",""],["dialogTGAD",""],["mat-raised-button","","color","primary",3,"click"],["color","warn","mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox-col",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","gaName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","gaStatus"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","","class","action-col",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of appRoles elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell","",1,"checkbox-col"],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell",""],["mat-header-cell","","mat-sort-header",""],[2,"margin-left","30px",3,"disableRipple","checked","click"],["mat-header-cell","",1,"action-col"],["href","javascript:void(0)","color","primary",3,"matTooltip","click",4,"ngIf"],["href","javascript:void(0)","color","primary",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],["action","",3,"formGroup","submit"],["mat-dialog-title",""],[1,"mat-typography"],["appearance","outline"],["matInput","","formControlName","gaName","maxlength","50","required","",3,"placeholder"],["name",""],["align","end"],[4,"ngIf"],["formControlName","gaStatus",2,"margin-bottom","6px"],["align","center"],["mat-stroked-button","","color","warn","mat-dialog-close","",3,"click"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"],[3,"submit"],["fxLayout","row"],["fxFlex.gt-xs","50","fxFlex.lt-xs","100"],["appearance","outline",1,"example-full-width"],["type","text","aria-label","","matInput","",3,"placeholder","formControl","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"displayWith"],["autoDevLaneCheck","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["mat-stroked-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value","onSelectionChange"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"]],template:function(t,s){1&t&&(e._UZ(0,"ng-progress",0,1),e.TgZ(2,"mat-card"),e.TgZ(3,"div"),e.TgZ(4,"mat-card-title",2),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-divider"),e._UZ(8,"br"),e._UZ(9,"br"),e.TgZ(10,"div",3),e.TgZ(11,"div",4),e.YNc(12,j,3,3,"button",5),e.ALo(13,"userRoles"),e.YNc(14,B,3,4,"button",6),e.ALo(15,"userRoles"),e.YNc(16,z,3,3,"button",7),e.ALo(17,"userRoles"),e.qZA(),e._UZ(18,"div",8),e.TgZ(19,"div",8),e.TgZ(20,"mat-form-field",9),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"input",10,11),e.NdJ("keyup",function(c){return s.applyFilter(c)}),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,re,21,8,"div",12),e.ALo(28,"userRoles"),e.qZA(),e.YNc(29,ue,25,22,"ng-template",null,13,e.W1O),e.YNc(31,Te,29,27,"ng-template",null,14,e.W1O)),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,7,"tGroupAccessModule.title")),e.xp6(7),e.Q6J("ngIf",e.lcZ(13,9,"CreateTGroupAccess")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,11,"DeleteTGroupAccess")),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,13,"ViewTGroupAccessDetail")),e.xp6(6),e.hij(" ",e.lcZ(23,15,"button.searchButton"),""),e.xp6(2),e.s9C("placeholder",e.lcZ(26,17,"button.searchPlaceholder")),e.xp6(3),e.Q6J("ngIf",e.lcZ(28,19,"ViewTGroupAccess")))},directives:[k.Yh,y.a8,y.n5,q.d,A.xw,A.yH,A.Wh,f.O5,_.KE,Q.oO,_.hX,J.Nt,w.lW,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,b.NW,d.ge,O.oG,d.ev,U.gM,R.Hw,d.XQ,d.Gk,u._Y,u.JL,u.sg,h.uh,h.xY,u.Fj,u.JJ,u.u,u.nD,u.Q7,_.bx,h.H8,h.ZT,_.TO,u.F,D.ZL,u.oH,D.XC,f.sg,g.gi,g.fQ,_.R9,Y.ey,g.uo,g.eu,g.ah],pipes:[L.X$,I.v,f.Ov],styles:[""]}),o})();var xe=n(8576),ve=n(4646),Se=n(4382);const be=[{path:"",component:Ae}];let Ce=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Z.D,G.g,N.d],imports:[[f.ez,xe.q,I.a,Se.Bz.forChild(be),k.Q8.withConfig({spinnerPosition:"right",color:"#red"}),ve.bj]]}),o})()}}]);