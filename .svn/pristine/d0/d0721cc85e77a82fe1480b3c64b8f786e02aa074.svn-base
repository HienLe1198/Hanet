"use strict";(self.webpackChunkAIOAcessControl_WebApp=self.webpackChunkAIOAcessControl_WebApp||[]).push([[7848],{7848:(rt,f,l)=>{l.r(f),l.d(f,{DetailSaleCardMonthlyModule:()=>it});var s=l(6019),p=l(8977),M=l(2262),d=l(4176),c=l(9839),t=l(3668),C=l(2300),_=l(9594),u=l(6765),g=l(563),y=l(6154),x=l(888),T=l(5694),h=l(5243),Z=l(8167),D=l(138),m=l(9133),v=l(86),S=l(9711);function A(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(a),t.oxw().loadData()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.statisticButton")," "))}function N(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(a),t.oxw().Refresh()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.refeshButton")," "))}function b(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(a),t.oxw().exportExcel()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const a=t.oxw();t.Q6J("disabled",a.disableButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"button.exportButton")," ")}}function q(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"button.positionCol")))}function O(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.index,n=t.oxw(2);t.xp6(1),t.Oqu(a+1+n.page*n.pageSize)}}function U(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.emNameCol")))}function L(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.emName)}}function Y(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"graceCardRegistrationModule.depNameCol")))}function Q(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.depName)}}function w(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cardInOutStatisticModule.vehicleTypeCol")))}function E(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.cvtName)}}function I(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"graceCardRegistrationModule.plateNumberCol")))}function R(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.plateNumber)}}function B(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"detailCarInStatisticModule.cardNoCol")))}function F(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.caNo)}}function J(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"debtStatisticModule.cardNumberCol")))}function z(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.caNumber)}}function P(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"graceCardRegistrationModule.datePayCol")))}function k(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.datePay,"dd-MM-yyyy hh:mm:ss"))}}function H(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"detailSaleCardMonthlyModule.dateApplyCol")))}function $(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.fromDate)}}function G(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"detailSaleCardMonthlyModule.dateEndCol")))}function j(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.toDate)}}function X(e,o){1&e&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"detailSaleCardMonthlyModule.emNameCreatedCol")))}function W(e,o){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.emNameCreated)}}function V(e,o){1&e&&t._UZ(0,"tr",37)}function K(e,o){1&e&&t._UZ(0,"tr",38)}function tt(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.TgZ(2,"table",18),t.ynx(3,19),t.YNc(4,q,3,3,"th",20),t.YNc(5,O,2,1,"td",21),t.BQk(),t.ynx(6,22),t.YNc(7,U,3,3,"th",20),t.YNc(8,L,2,1,"td",21),t.BQk(),t.ynx(9,23),t.YNc(10,Y,3,3,"th",20),t.YNc(11,Q,2,1,"td",21),t.BQk(),t.ynx(12,24),t.YNc(13,w,3,3,"th",20),t.YNc(14,E,2,1,"td",21),t.BQk(),t.ynx(15,25),t.YNc(16,I,3,3,"th",20),t.YNc(17,R,2,1,"td",21),t.BQk(),t.ynx(18,26),t.YNc(19,B,3,3,"th",20),t.YNc(20,F,2,1,"td",21),t.BQk(),t.ynx(21,27),t.YNc(22,J,3,3,"th",20),t.YNc(23,z,2,1,"td",21),t.BQk(),t.ynx(24,28),t.YNc(25,P,3,3,"th",20),t.YNc(26,k,3,4,"td",21),t.BQk(),t.ynx(27,29),t.YNc(28,H,3,3,"th",20),t.YNc(29,$,2,1,"td",21),t.BQk(),t.ynx(30,30),t.YNc(31,G,3,3,"th",20),t.YNc(32,j,2,1,"td",21),t.BQk(),t.ynx(33,31),t.YNc(34,X,3,3,"th",20),t.YNc(35,W,2,1,"td",21),t.BQk(),t.YNc(36,V,1,0,"tr",32),t.YNc(37,K,1,0,"tr",33),t.qZA(),t.TgZ(38,"mat-paginator",34),t.NdJ("page",function(i){return t.CHM(a),t.oxw().onChangePage(i)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=t.oxw();t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(34),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",a.pageSizeOptions)("pageIndex",a.page)("length",a.totalRow)("disabled",!1)}}let et=(()=>{class e{constructor(a,n,i,r,dt){this.dataService=a,this.notificationService=n,this.pagin=i,this.translateService=r,this.datePipe=dt,this.displayedColumns=["position","emName","depName","vehicleType","plateNumber","cardNo","cardNumber","datePay","dateApply","dateEnd","emNameCreated"],this.dataSource=new d.by,this.pageSizeOptions=[10,25,50,100],this.pageSize=this.pageSizeOptions[0],this.page=0,this.totalRow=0,this.totalPage=0,this.disableButton=!0,this.keyword="",this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.showList=!1,this.totalMoney=0}ngOnInit(){this.loadDataExport()}changeDateTo(a){this.dateTo=a.target.value}Refresh(){this.dateFrom=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.dateTo=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.keyword="",this.showList=!1,this.disableButton=!0}loadData(){this.dataService.get("DetailSaleCardMonthly/GetAllByPaging?fromDate="+this.dateFrom+"&toDate="+this.dateTo+"&page="+this.page+"&pageSize="+this.pageSize+"&keyword="+this.keyword).subscribe(a=>{if(this.data=a.items,0==this.data.length&&(this.showList=!1,this.Refresh(),this.translateService.get("messageSystem.staticsNull").subscribe(n=>c.Q.STATISTIC_NULL=n),this.notificationService.printErrorMessage(c.Q.STATISTIC_NULL)),this.data.length>0&&(this.disableButton=!1,this.showList=!0,this.dataSource=this.data,this.dataSource.sort=this.sort,this.totalRow=a.totalCount,0==this.totalMoney))for(let n=0;n<this.data.length;n++)this.totalMoney+=this.data[n].rePrice},a=>{}),this.loadDataExport()}onChangePage(a){this.page=a.pageIndex,this.pageSize=a.pageSize,this.loadData()}loadDataExport(){this.dataService.get("DetailSaleCardMonthly/GetAll?fromDate="+this.dateFrom+"&toDate="+this.dateTo+"&keyword="+this.keyword).subscribe(a=>{this.dataExports=a},a=>{})}exportExcel(){this.dataService.post("DetailSaleCardMonthly/ExportXls",{dateFrom:this.dateFrom,dateTo:this.dateTo,data:this.dataExports}).subscribe(n=>{window.location.href=n.result},n=>{this.translateService.get("messageSystem.exportExcelFail").subscribe(i=>c.Q.EXPORT_FAILSE_MSG=i),this.notificationService.printErrorMessage(c.Q.EXPORT_FAILSE_MSG)})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(C.D),t.Y36(_.g),t.Y36(u.d),t.Y36(g.sK),t.Y36(s.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-detail-sale-card-monthly"]],viewQuery:function(a,n){if(1&a&&(t.Gf(p.NW,5),t.Gf(M.YE,5)),2&a){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first)}},decls:33,vars:23,consts:[["color","red"],["progressBar",""],["color","primary"],["fxLayout.xl","row","fxLayout.lg","row","fxLayout.md","column","fxLayout.xs","column"],["fxFlex",""],["fxFlex","",2,"margin","5px"],["appearance","outline"],["matInput","","type","date","required","",3,"ngModel","ngModelChange"],["fxLayout","","fxLayoutAlign","center center"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","mat-elevation-z8 table-container",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z8","table-container"],[1,"res-table-container"],["mat-table","","matSort","",1,"example-table",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","emName"],["matColumnDef","depName"],["matColumnDef","vehicleType"],["matColumnDef","plateNumber"],["matColumnDef","cardNo"],["matColumnDef","cardNumber"],["matColumnDef","datePay"],["matColumnDef","dateApply"],["matColumnDef","dateEnd"],["matColumnDef","emNameCreated"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageSize","pageSize","showFirstLastButtons","","aria-label","Select page of cardInOutStatisticModule elements",3,"pageSizeOptions","pageIndex","length","disabled","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,n){1&a&&(t._UZ(0,"ng-progress",0,1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"mat-divider"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t._UZ(10,"div",4),t.TgZ(11,"div",5),t.TgZ(12,"mat-form-field",6),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",7),t.NdJ("ngModelChange",function(r){return n.dateFrom=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"mat-form-field",6),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"input",7),t.NdJ("ngModelChange",function(r){return n.dateTo=r}),t.qZA(),t.qZA(),t.qZA(),t._UZ(23,"div",4),t.qZA(),t.TgZ(24,"div",8),t.YNc(25,A,3,3,"button",9),t.ALo(26,"userRoles"),t.YNc(27,N,3,3,"button",10),t.ALo(28,"userRoles"),t.YNc(29,b,3,4,"button",11),t.ALo(30,"userRoles"),t.qZA(),t.YNc(31,tt,39,8,"div",12),t.ALo(32,"userRoles"),t.qZA()),2&a&&(t.xp6(4),t.Oqu(t.lcZ(5,9,"detailSaleCardMonthlyModule.title")),t.xp6(10),t.Oqu(t.lcZ(15,11,"TicketSell.fromDate")),t.xp6(2),t.Q6J("ngModel",n.dateFrom),t.xp6(4),t.Oqu(t.lcZ(21,13,"TicketSell.toDate")),t.xp6(2),t.Q6J("ngModel",n.dateTo),t.xp6(3),t.Q6J("ngIf",t.lcZ(26,15,"ViewDetailSaleCardMonthly")),t.xp6(2),t.Q6J("ngIf",t.lcZ(28,17,"ViewDetailSaleCardMonthly")),t.xp6(2),t.Q6J("ngIf",t.lcZ(30,19,"ExportDetailSaleCardMonthly")),t.xp6(2),t.Q6J("ngIf",t.lcZ(32,21,n.showList&&"ViewDetailSaleCardMonthly")))},directives:[y.Yh,x.a8,x.n5,T.d,h.xw,h.yH,Z.KE,Z.hX,D.Nt,m.Fj,m.Q7,m.JJ,m.On,h.Wh,s.O5,v.lW,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,p.NW,d.ge,d.ev,d.XQ,d.Gk],pipes:[g.X$,S.v,s.uU],styles:[""]}),e})();var at=l(4382),ot=l(4646),nt=l(8576);const lt=[{path:"",component:et}];let it=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[C.D,_.g,u.d,s.uU,{provide:p.ye,useClass:u.d}],imports:[[s.ez,nt.q,S.a,at.Bz.forChild(lt),y.Q8.withConfig({spinnerPosition:"right",color:"#red"}),ot.bj]]}),e})()}}]);